(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,63382,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let a=e.r(93258);function l({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new a.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},58810,(e,t,s)=>{"use strict";function a(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"encodeURIPath",{enumerable:!0,get:function(){return a}})},19144,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"PreloadChunks",{enumerable:!0,get:function(){return n}});let a=e.r(39637),l=e.r(43259),i=e.r(39729),r=e.r(58810);function n({moduleIds:e}){if("undefined"!=typeof window)return null;let t=i.workAsyncStorage.getStore();if(void 0===t)return null;let s=[];if(t.reactLoadableManifest&&e){let a=t.reactLoadableManifest;for(let t of e){if(!a[t])continue;let e=a[t].files;s.push(...e)}}return 0===s.length?null:(0,a.jsx)(a.Fragment,{children:s.map(e=>{let s=`${t.assetPrefix}/_next/${(0,r.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,a.jsx)("link",{precedence:"dynamic",href:s,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,l.preload)(s,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},99306,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return d}});let a=e.r(39637),l=e.r(94335),i=e.r(63382),r=e.r(19144);function n(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(n(()=>null)),loading:null,ssr:!0},d=function(e){let t={...o,...e},s=(0,l.lazy)(()=>t.loader().then(n)),d=t.loading;function c(e){let n=d?(0,a.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,c=o?l.Suspense:l.Fragment,x=t.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(r.PreloadChunks,{moduleIds:t.modules}):null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(c,{...o?{fallback:n}:{},children:x})}return c.displayName="LoadableComponent",c}},21e3,(e,t,s)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),Object.defineProperty(s,"default",{enumerable:!0,get:function(){return l}});let a=e.r(16889)._(e.r(99306));function l(e,t){let s={};"function"==typeof e&&(s.loader=e);let l={...s,...t};return(0,a.default)({...l,modules:l.loadableGenerated?.modules})}("function"==typeof s.default||"object"==typeof s.default&&null!==s.default)&&void 0===s.default.__esModule&&(Object.defineProperty(s.default,"__esModule",{value:!0}),Object.assign(s.default,s),t.exports=s.default)},22605,e=>{"use strict";var t=e.i(39637),s=e.i(94335),a=e.i(44806),l=e.i(22967),i=e.i(2029),r=e.i(35957),n=e.i(383),o=e.i(21738),d=e.i(36034),c=e.i(3594),x=e.i(66039),m=e.i(59405),h=e.i(38923),p=e.i(17497),g=e.i(68418),u=e.i(33042),f=e.i(52330),b=e.i(28356);let j=(0,b.default)("table-2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]);var v=e.i(83122),y=e.i(52380),N=e.i(76624);let w={layout:"single-table",backgroundColor:"#ffffff",backgroundImage:void 0,headerColor:"#1a56db",textColor:"#1f2937",fontSize:10,fontFamily:"Arial",includeParticipantName:!0,includeParticipationDate:!0,includeTextAnswers:!0,includeChoices:!0,includeRatings:!0,includeEventTitle:!0,includeExportDate:!0,includeParticipantCount:!0,selectedComponentIds:void 0,includeSerialNumber:!1,customTables:[],useCustomTables:!1},C=(e,t,s)=>{let a=t.settings?.questionType||t.type;if(["pdf_upload","image_upload","video_upload"].includes(t.type))return"[ملف مرفق - غير مضمن في PDF]";if("signature"===t.type)return"[توقيع - انظر الصورة]";if(s.includeTextAnswers&&["short_text","long_text","email","phone","number","url"].includes(a))return String(e.answer||"لا توجد إجابة");if(s.includeChoices){if("single_choice"===a||"yes_no"===a||"dropdown"===a)return String(e.answer||"لا توجد إجابة");if("multiple_choice"===a)return(Array.isArray(e.answer)?e.answer:[e.answer]).join("، ")||"لا توجد إجابة"}if(s.includeRatings&&"rating"===t.type){let s=e.answer||0,a=t.settings?.maxRating||5;return`${s}/${a}`}if("date"===a||"time"===a)return String(e.answer||"لا توجد إجابة");if("linear_scale"===a){let s=e.answer||0,a=t.settings?.minValue||1,l=t.settings?.maxValue||10;return`${s} (من ${a} إلى ${l})`}return"table"===t.type?"[بيانات جدول - غير مضمن]":String(e.answer||"لا توجد إجابة")},T=(e,t,s)=>{if(!t||0===t.length)return;let a=t.filter(e=>!1!==e.visible);0===a.length||[...a].sort((e,t)=>(e.zIndex||0)-(t.zIndex||0)).forEach(t=>{let a=document.createElement("div"),l=3.7795*t.position.x,i=3.7795*t.position.y;a.style.position="absolute",a.style.left=`${l}px`,a.style.top=`${i}px`,a.style.fontSize=`${t.fontSize}px`,a.style.color=t.color,a.style.fontWeight=t.fontWeight.toString(),a.style.textAlign=t.textAlign,a.style.fontFamily=t.fontFamily||s,a.style.direction="rtl",a.style.unicodeBidi="embed",a.style.whiteSpace="pre-wrap",a.style.lineHeight="1.6",a.style.zIndex=(t.zIndex||0).toString(),a.style.setProperty("text-rendering","optimizeLegibility"),a.style.setProperty("-webkit-font-smoothing","antialiased"),a.style.setProperty("-moz-osx-font-smoothing","grayscale"),t.rotation&&(a.style.transform=`rotate(${t.rotation}deg)`,a.style.transformOrigin="top right"),void 0!==t.opacity&&(a.style.opacity=t.opacity.toString()),t.backgroundColor&&(a.style.backgroundColor=t.backgroundColor,a.style.padding="8px 12px",a.style.borderRadius="4px"),a.textContent=t.content,e.appendChild(a)})},S=async(e,t,s,a)=>{let l=document.createElement("div");l.style.position="absolute",l.style.left="-9999px",l.style.top="0",l.style.width="2000px",l.style.padding="30px",l.style.fontFamily="Arial, sans-serif",l.style.direction="rtl",l.style.backgroundColor=a.backgroundColor;let i="";if(a.backgroundImage&&(i+=`
      <div style="
        background-image: url(${a.backgroundImage});
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        padding: 40px;
        min-height: 100%;
      ">
        <div style="
          background-color: rgba(255, 255, 255, 0.96);
          padding: 40px;
          border-radius: 16px;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
        ">
    `),a.logo){let e="small"===a.logo.size?"80px":"medium"===a.logo.size?"120px":"160px",t="center"===a.logo.position?"center":"top-right"===a.logo.position?"flex-end":"flex-start";i+=`
      <div style="display: flex; justify-content: ${t}; margin-bottom: 20px;">
        <img src="${a.logo.data}" style="width: ${e}; height: ${e}; object-fit: contain;" />
      </div>
    `}if(i+='<div style="text-align: center; margin-bottom: 30px;">',a.includeEventTitle&&(i+=`<h1 style="color: ${a.headerColor}; font-size: 32px; margin-bottom: 10px; font-weight: bold;">${e}</h1>`),a.includeExportDate){let e=new Date().toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"});i+=`<p style="color: ${a.textColor}; font-size: 14px; margin: 5px 0;">تاريخ التصدير: ${e}</p>`}a.includeParticipantCount&&(i+=`<p style="color: ${a.textColor}; font-size: 14px; margin: 5px 0;">عدد المشاركين: ${t.length}</p>`),i+="</div>";let r=s.filter(e=>"question"===e.type||"rating"===e.type||"signature"===e.type);a.selectedComponentIds&&a.selectedComponentIds.length>0&&(r=r.filter(e=>a.selectedComponentIds.includes(e.id)));let n=[];a.includeSerialNumber&&n.push("#"),a.includeParticipantName&&n.push("المشارك"),a.includeParticipationDate&&n.push("التاريخ");let o=n.length>0?"120px":"0px",d=r.length>0?`${Math.max(100,800/r.length)}px`:"0px";i+=`
    <div style="overflow-x: auto; width: 100%;">
      <table style="
        width: 100%;
        border-collapse: collapse;
        font-size: ${Math.max(10,a.fontSize-2)}px;
        table-layout: fixed;
      ">
        <thead>
          <tr style="background-color: ${a.headerColor}; color: white;">
  `,a.includeSerialNumber&&(i+=`
      <th style="
        padding: 8px 6px;
        border: 1px solid #ddd;
        text-align: center;
        font-weight: bold;
        width: 60px;
        min-width: 50px;
        word-wrap: break-word;
      ">#</th>
    `),a.includeParticipantName&&(i+=`
      <th style="
        padding: 8px 6px;
        border: 1px solid #ddd;
        text-align: center;
        font-weight: bold;
        width: ${o};
        min-width: 100px;
        word-wrap: break-word;
      ">المشارك</th>
    `),a.includeParticipationDate&&(i+=`
      <th style="
        padding: 8px 6px;
        border: 1px solid #ddd;
        text-align: center;
        font-weight: bold;
        width: ${o};
        min-width: 100px;
        word-wrap: break-word;
      ">التاريخ</th>
    `),r.forEach(e=>{let t=e.settings?.label||"سؤال",s=t.length>30?t.substring(0,27)+"...":t;i+=`
      <th style="
        padding: 8px 6px;
        border: 1px solid #ddd;
        text-align: center;
        font-weight: bold;
        width: ${d};
        min-width: 80px;
        word-wrap: break-word;
        font-size: ${Math.max(9,a.fontSize-3)}px;
      " title="${t}">
        ${s}
      </th>
    `}),i+=`
          </tr>
        </thead>
        <tbody>
  `,t.forEach((e,t)=>{if(i+=`<tr style="background-color: ${t%2==0?"#f9fafb":"white"};">`,a.includeSerialNumber&&(i+=`
        <td style="
          padding: 6px 4px;
          border: 1px solid #ddd;
          text-align: center;
          color: ${a.textColor};
          font-weight: bold;
          word-wrap: break-word;
        ">${t+1}</td>
      `),a.includeParticipantName){let t=e.participant?.name||"مشارك مجهول";i+=`
        <td style="
          padding: 6px 4px;
          border: 1px solid #ddd;
          text-align: center;
          color: ${a.textColor};
          word-wrap: break-word;
          overflow: hidden;
        ">${t}</td>
      `}if(a.includeParticipationDate){let t=new Date(e.submittedAt||e.completedAt||new Date).toLocaleDateString("ar-EG",{year:"2-digit",month:"2-digit",day:"2-digit"});i+=`
        <td style="
          padding: 6px 4px;
          border: 1px solid #ddd;
          text-align: center;
          color: ${a.textColor};
          word-wrap: break-word;
        ">${t}</td>
      `}r.forEach(t=>{let s=e.answers.find(e=>e.componentId===t.id),l=s?C(s,t,a):"لا توجد إجابة";l.length>50&&(l=l.substring(0,47)+"..."),i+=`
        <td style="
          padding: 6px 4px;
          border: 1px solid #ddd;
          text-align: center;
          color: ${a.textColor};
          word-wrap: break-word;
          overflow: hidden;
          font-size: ${Math.max(9,a.fontSize-3)}px;
        " title="${s?C(s,t,a):"لا توجد إجابة"}">
          ${l}
        </td>
      `}),i+="</tr>"}),i+=`
        </tbody>
      </table>
    </div>
  `,a.customFooter&&(i+=`
      <div style="text-align: center; margin-top: 30px; color: ${a.textColor}; font-size: 12px;">
        ${a.customFooter}
      </div>
    `),a.backgroundImage&&(i+=`
        </div>
      </div>
    `),l.innerHTML=i,document.body.appendChild(l);try{let t=await (0,N.default)(l,{scale:2,useCORS:!0,logging:!1,backgroundColor:null}),s=new y.default({orientation:"landscape",unit:"mm",format:"a4"}),a=297*t.height/t.width,i=Math.ceil(a/210);for(let e=0;e<i;e++){e>0&&s.addPage();let a=210*e*t.width/297,l=Math.min(210*t.width/297,t.height-a);if(l>0){let e=document.createElement("canvas");e.width=t.width,e.height=l;let i=e.getContext("2d");if(i){i.drawImage(t,0,a,t.width,l,0,0,t.width,l);let r=e.toDataURL("image/png"),n=297*l/t.width;s.addImage(r,"PNG",0,0,297,n)}}}let r=`${e.replace(/\s+/g,"-")}-results-${new Date().toISOString().split("T")[0]}.pdf`;s.save(r)}finally{document.body.removeChild(l)}},k=async(e,t,s,a)=>{let l=new y.default({orientation:"portrait",unit:"mm",format:"a4"});for(let i=0;i<t.length;i++){let r=t[i];i>0&&l.addPage();let n=document.createElement("div");n.style.position="absolute",n.style.left="-9999px",n.style.top="0",n.style.width="800px",n.style.padding="40px",n.style.fontFamily="Arial, sans-serif",n.style.direction="rtl",n.style.backgroundColor=a.backgroundColor;let o="";if(a.backgroundImage&&(o+=`
        <div style="
          background-image: url(${a.backgroundImage});
          background-size: cover;
          background-position: center;
          background-repeat: no-repeat;
          padding: 40px;
          min-height: 100%;
        ">
          <div style="
            background-color: rgba(255, 255, 255, 0.96);
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
          ">
      `),a.logo){let e="small"===a.logo.size?"60px":"medium"===a.logo.size?"90px":"120px",t="center"===a.logo.position?"center":"top-right"===a.logo.position?"flex-end":"flex-start";o+=`
        <div style="display: flex; justify-content: ${t}; margin-bottom: 20px;">
          <img src="${a.logo.data}" style="width: ${e}; height: ${e}; object-fit: contain;" />
        </div>
      `}if(a.includeEventTitle&&(o+=`
        <h1 style="color: ${a.headerColor}; font-size: 28px; text-align: center; margin-bottom: 20px; font-weight: bold;">
          ${e}
        </h1>
      `),a.includeParticipantName){if(o+=`
        <div style="background-color: #f3f4f6; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
          <p style="color: ${a.textColor}; font-size: 16px; margin: 5px 0; font-weight: bold;">
            المشارك: ${r.participant?.name||"مشارك مجهول"}
          </p>
      `,a.includeParticipationDate){let e=new Date(r.submittedAt||r.completedAt||new Date).toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"});o+=`
          <p style="color: ${a.textColor}; font-size: 14px; margin: 5px 0;">
            تاريخ المشاركة: ${e}
          </p>
        `}o+="</div>"}o+=`
      <table style="width: 100%; border-collapse: collapse; font-size: ${a.fontSize}px;">
        <tbody>
    `;let d=s.filter(e=>"question"===e.type||"rating"===e.type||"signature"===e.type);a.selectedComponentIds&&a.selectedComponentIds.length>0&&(d=d.filter(e=>a.selectedComponentIds.includes(e.id))),d.forEach((e,t)=>{let s=r.answers.find(t=>t.componentId===e.id),l=e.settings?.label||"سؤال",i=t%2==0?"#f9fafb":"white",n="";if("signature"===e.type){if(n='<span style="color: #94a3b8; font-style: italic;">لا يوجد توقيع</span>',s&&"object"==typeof s.answer&&null!==s.answer){let e=s.answer.signatureData;e&&(n=`<img src="${e}" style="max-width: 200px; max-height: 80px;" />`)}}else n=s?C(s,e,a):"لا توجد إجابة";o+=`
        <tr style="background-color: ${i};">
          <td style="padding: 12px; border: 1px solid #ddd; font-weight: bold; color: ${a.textColor}; width: 40%;">
            ${l}
          </td>
          <td style="padding: 12px; border: 1px solid #ddd; color: ${a.textColor}; width: 60%;">
            ${n}
          </td>
        </tr>
      `}),o+=`
        </tbody>
      </table>
    `,a.customFooter&&i===t.length-1&&(o+=`
        <div style="text-align: center; margin-top: 30px; color: ${a.textColor}; font-size: 12px;">
          ${a.customFooter}
        </div>
      `),a.backgroundImage&&(o+=`
          </div>
        </div>
      `),n.innerHTML=o,document.body.appendChild(n);try{let e=await (0,N.default)(n,{scale:2,useCORS:!0,logging:!1,backgroundColor:null}),t=210*e.height/e.width,s=Math.ceil(t/297);for(let t=0;t<s;t++){t>0&&l.addPage();let s=297*t*e.width/210,a=Math.min(297*e.width/210,e.height-s);if(a>0){let t=document.createElement("canvas");t.width=e.width,t.height=a;let i=t.getContext("2d");if(i){i.drawImage(e,0,s,e.width,a,0,0,e.width,a);let r=t.toDataURL("image/png"),n=210*a/e.width;l.addImage(r,"PNG",0,0,210,n)}}}}finally{document.body.removeChild(n)}}let i=`${e.replace(/\s+/g,"-")}-results-${new Date().toISOString().split("T")[0]}.pdf`;l.save(i)},D=async(e,t,s,a,l)=>{if(!a.customTables||0===a.customTables.length)throw Error("لا توجد جداول مخصصة للتصدير");let i=[...a.customTables].sort((e,t)=>e.order-t.order).filter(e=>e.componentIds.length>0);if(0===i.length)throw Error("جميع الجداول فارغة. يرجى إضافة مكونات إلى الجداول");let r=l?.page.orientation||"landscape",n=l?.page.size||"a4",o=new y.default({orientation:r,unit:"mm",format:n}),d=o.internal.pageSize.getWidth(),c=o.internal.pageSize.getHeight(),x=l?.page.margins.top||5,m=x,h=!0;for(let r=0;r<i.length;r++){let n,p=i[r],g=s.filter(e=>p.componentIds.includes(e.id)&&("question"===e.type||"rating"===e.type||"signature"===e.type));g.sort((e,t)=>p.componentIds.indexOf(e.id)-p.componentIds.indexOf(t.id));let u=a.fontSize?a.fontSize/10:1,f=l?.fonts.sizes.eventTitle||Math.round(58*u),b=l?.fonts.sizes.tableTitle||Math.round(48*u),j=l?.fonts.sizes.header||Math.round(26*u),v=l?.fonts.sizes.content||Math.round(24*u),y=l?.fonts.sizes.info||Math.round(20*u),w=l?.fonts.sizes.footer||Math.round(18*u),S=l?.fonts.weights.eventTitle||900,k=l?.fonts.weights.tableTitle||900,D=l?.fonts.weights.header||800,z=l?.fonts.weights.content||400,$=l?.fonts.family||"'Cairo', 'Amiri', 'Tahoma', 'Arial', sans-serif",P=document.createElement("div");P.style.position="fixed",P.style.left="-9999px",P.style.top="0",P.style.width="3500px",P.style.height="auto";let E=l?.spacing.containerPadding.vertical||40,I=l?.spacing.containerPadding.horizontal||50;P.style.padding=`${E}px ${I}px`,P.style.fontFamily=$,P.style.direction="rtl",P.style.unicodeBidi="embed",P.style.setProperty("text-rendering","optimizeLegibility"),P.style.setProperty("-webkit-font-smoothing","antialiased"),P.style.setProperty("-moz-osx-font-smoothing","grayscale");let A=l?.page.backgroundColor||"#ffffff";P.style.backgroundColor=A,P.style.zIndex="-9999",P.style.pointerEvents="none";let L="";if(a.logo&&0===r){let e="small"===a.logo.size?"70px":"large"===a.logo.size?"140px":"100px",t="top-right"===a.logo.position?"flex-end":"top-left"===a.logo.position?"flex-start":"center";L+=`
        <div style="display: flex; justify-content: ${t}; margin-bottom: 20px;">
          <img src="${a.logo.data}" style="width: ${e}; height: ${e}; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);" />
        </div>
      `}if(a.includeEventTitle&&0===r){let t=l?.spacing.titleMargins.eventTitle||100,s=l?.colors.eventTitleText||"#ffffff",a=l?.colors.eventTitleBg||"linear-gradient(135deg, #1e293b 0%, #334155 100%)";L+=`
        <div style="
          text-align: center;
          margin-bottom: ${t}px;
          padding: 48px 60px;
          background: ${a};
          border: none;
          border-radius: 16px;
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12), 0 2px 8px rgba(0, 0, 0, 0.08);
          position: relative;
          overflow: hidden;
        ">
          <div style="
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #ec4899 100%);
          "></div>
          <h1 style="
            font-size: ${f}px;
            font-weight: ${S};
            color: ${s};
            margin: 0;
            font-family: ${$};
            direction: rtl;
            unicode-bidi: bidi-override;
            line-height: 1.5;
            letter-spacing: 0;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            white-space: pre-wrap;
            word-break: keep-all;
          ">${e}</h1>
        </div>
      `}if(!1!==p.settings.showTitle){let e=l?.spacing.titleMargins.tableTitle||80,t=0===r?"0px":"40px",s=l?.colors.tableTitleText||"#1e293b",a=l?.colors.tableTitleBg||"linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%)",i=l?.colors.primary||"#3b82f6";L+=`
        <div style="
          text-align: right;
          margin-bottom: ${e}px;
          margin-top: ${t};
          padding: 24px 36px;
          background: ${a};
          border-right: 5px solid ${i};
          border-radius: 12px;
          box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        ">
          <h2 style="
            font-size: ${b}px;
            font-weight: ${k};
            color: ${s};
            margin: 0;
            font-family: ${$};
            direction: rtl;
            unicode-bidi: bidi-override;
            line-height: 1.5;
            letter-spacing: 0;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            white-space: pre-wrap;
            word-break: keep-all;
          ">${p.title}</h2>
        </div>
      `}if((a.includeExportDate||a.includeParticipantCount)&&0===r){let e="";if(a.includeExportDate){let t=new Date().toLocaleDateString("ar-EG",{year:"numeric",month:"long",day:"numeric"});e+=`تاريخ التصدير: ${t}`}a.includeParticipantCount&&(e&&(e+="  |  "),e+=`عدد المشاركين: ${t.length}`),L+=`
        <div style="
          text-align: center;
          font-size: ${y}px;
          font-weight: 600;
          color: #4b5563;
          margin-bottom: 20px;
          padding: 10px 15px;
          background-color: #f3f4f6;
          border: 1px solid #e5e7eb;
          border-radius: 4px;
          font-family: 'Arial', 'Tahoma', sans-serif;
        ">${e}</div>
      `}let F=l?.spacing.cellPadding.vertical||18,_=l?.spacing.cellPadding.horizontal||14;L+=`
      <table style="
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
        font-family: ${$};
        direction: rtl;
        background-color: white;
        border: 1px solid #e2e8f0;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
      ">
    `;let B=l?.colors.headerBg||"linear-gradient(135deg, #334155 0%, #475569 100%)",R=l?.colors.headerText||"#ffffff";!1!==p.settings.showHeader&&(L+=`<thead><tr style="background: ${B};">`,p.settings.includeSerialNumber&&(L+=`
          <th style="
            padding: ${F+4}px ${_}px;
            border: none;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            color: ${R};
            font-weight: ${D};
            font-size: ${j}px;
            min-width: 80px;
            direction: rtl;
            unicode-bidi: bidi-override;
            letter-spacing: 0;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            white-space: nowrap;
          ">#</th>
        `),a.includeParticipantName&&(L+=`
          <th style="
            padding: ${F+4}px ${_}px;
            border: none;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            color: ${R};
            font-weight: ${D};
            font-size: ${j}px;
            min-width: 220px;
            direction: rtl;
            unicode-bidi: bidi-override;
            letter-spacing: 0;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            white-space: nowrap;
          ">اسم المشارك</th>
        `),a.includeParticipationDate&&(L+=`
          <th style="
            padding: ${F+4}px ${_}px;
            border: none;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            color: ${R};
            font-weight: ${D};
            font-size: ${j}px;
            min-width: 180px;
            direction: rtl;
            unicode-bidi: bidi-override;
            letter-spacing: 0;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            white-space: nowrap;
          ">التاريخ</th>
        `),g.forEach(e=>{let t=e.settings?.label||"سؤال";L+=`
          <th style="
            padding: ${F+4}px ${_}px;
            border: none;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
            text-align: center;
            color: ${R};
            font-weight: ${D};
            font-size: ${j}px;
            min-width: 220px;
            max-width: 400px;
            word-wrap: break-word;
            direction: rtl;
            unicode-bidi: bidi-override;
            letter-spacing: 0;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
            white-space: pre-wrap;
          ">${t}</th>
        `}),L+="</tr></thead>"),L+="<tbody>";let M=l?.colors.text||"#1e293b",O=l?.colors.alternateRowBg||"#f8fafc",H=l?.table.zebraStriping===void 0||l.table.zebraStriping;t.forEach((e,t)=>{let s=H&&t%2==1?O:"#ffffff";if(L+=`<tr style="background-color: ${s}; transition: background-color 0.2s;">`,p.settings.includeSerialNumber&&(L+=`
          <td style="
            padding: ${F}px ${_}px;
            border: none;
            border-bottom: 1px solid #e2e8f0;
            text-align: center;
            color: #64748b;
            font-size: ${v}px;
            font-weight: 600;
            line-height: 1.6;
            direction: rtl;
            unicode-bidi: bidi-override;
            text-rendering: optimizeLegibility;
            white-space: nowrap;
          ">${t+1}</td>
        `),a.includeParticipantName){let t=e.participant?.name||"مشارك مجهول";L+=`
          <td style="
            padding: ${F}px ${_}px;
            border: none;
            border-bottom: 1px solid #e2e8f0;
            text-align: center;
            color: ${M};
            font-size: ${v}px;
            font-weight: ${z};
            line-height: 1.6;
            direction: rtl;
            unicode-bidi: bidi-override;
            text-rendering: optimizeLegibility;
            white-space: pre-wrap;
          ">${t}</td>
        `}if(a.includeParticipationDate){let t=new Date(e.submittedAt||e.completedAt||new Date).toLocaleDateString("ar-EG",{year:"numeric",month:"2-digit",day:"2-digit"});L+=`
          <td style="
            padding: ${F}px ${_}px;
            border: none;
            border-bottom: 1px solid #e2e8f0;
            text-align: center;
            color: #64748b;
            font-size: ${v}px;
            font-weight: 500;
            line-height: 1.6;
            direction: rtl;
            unicode-bidi: bidi-override;
            text-rendering: optimizeLegibility;
            white-space: nowrap;
          ">${t}</td>
        `}g.forEach(t=>{let s=e.answers.find(e=>e.componentId===t.id);if("signature"===t.type){let e='<span style="color: #94a3b8; font-style: italic;">لا يوجد توقيع</span>';if(s&&"object"==typeof s.answer&&null!==s.answer){let t=s.answer.signatureData;t&&(e=`<img src="${t}" style="max-width: 120px; max-height: 60px; display: block; margin: 0 auto;" />`)}L+=`
            <td style="
              padding: ${F}px ${_}px;
              border: none;
              border-bottom: 1px solid #e2e8f0;
              text-align: center;
              vertical-align: middle;
            ">${e}</td>
          `}else{let e=s?C(s,t,a):"لا توجد إجابة";L+=`
            <td style="
              padding: ${F}px ${_}px;
              border: none;
              border-bottom: 1px solid #e2e8f0;
              text-align: center;
              color: ${s?M:"#94a3b8"};
              font-size: ${v}px;
              font-weight: ${z};
              word-wrap: break-word;
              line-height: 1.6;
              direction: rtl;
              unicode-bidi: bidi-override;
              text-rendering: optimizeLegibility;
              white-space: pre-wrap;
            ">${e}</td>
          `}}),L+="</tr>"}),L+="</tbody></table>",a.customFooter&&(L+=`
        <div style="
          text-align: center;
          margin-top: 20px;
          padding-top: 15px;
          border-top: 1px solid #dee2e6;
        ">
          <div style="
            font-size: ${w}px;
            color: #868e96;
            font-family: 'Arial', 'Tahoma', sans-serif;
          ">${a.customFooter}</div>
        </div>
      `),P.innerHTML=L+="</div>",document.body.appendChild(P),l?.customTextOverlays&&T(P,l.customTextOverlays,$),await new Promise(e=>setTimeout(e,300));let U=l?.advanced.quality||"high",V="low"===U?1:"medium"===U?2:3;try{n=await (0,N.default)(P,{scale:V,useCORS:!0,allowTaint:!0,backgroundColor:A,logging:!1,width:3500,windowWidth:3500,imageTimeout:0,removeContainer:!1})}catch(e){throw P&&P.parentNode===document.body&&document.body.removeChild(P),console.error(`Failed to render table ${r+1}:`,e),Error(`فشل في تحويل الجدول ${r+1} إلى صورة. ${e instanceof Error?e.message:"خطأ غير معروف"}`)}P&&P.parentNode===document.body&&document.body.removeChild(P);let G=n.toDataURL("image/png",1),W=l?.page.margins.left||5,q=l?.page.margins.right||5,X=l?.page.margins.bottom||5;if(!n||n.width<=0||n.height<=0)throw console.error("Invalid canvas dimensions:",{width:n?.width,height:n?.height}),Error(`فشل في إنشاء الجدول ${r+1}. أبعاد غير صالحة.`);let Z=d-W-q,J=n.height*Z/n.width;if(!isFinite(Z)||Z<=0||!isFinite(J)||J<=0)throw console.error("Invalid image dimensions:",{imgWidth:Z,imgHeight:J,pageWidth:d,leftMargin:W,rightMargin:q,canvasWidth:n.width,canvasHeight:n.height}),Error(`فشل في حساب أبعاد الجدول ${r+1}. قيم غير صالحة.`);if(!isFinite(W)||W<0||!isFinite(m)||m<0)throw console.error("Invalid position values:",{leftMargin:W,currentY:m}),Error(`فشل في تحديد موضع الجدول ${r+1}. قيم غير صالحة.`);let Y=l?.spacing.tableSeparation||15,K=h?0:Y;J+K<=c-m-X?m+=K:(o.addPage(),m=x),o.addImage(G,"PNG",W,m,Z,J),m+=J,h=!1}let p=`${e.replace(/\s+/g,"-")}-custom-tables-${new Date().toISOString().split("T")[0]}.pdf`;o.save(p)};var z=e.i(79286),$=e.i(72358);function P({open:e,onOpenChange:o,table:d,components:c,onSave:x,existingTables:m}){let[h,p]=(0,s.useState)(""),[g,f]=(0,s.useState)([]),[b,j]=(0,s.useState)("#1a56db"),[v,y]=(0,s.useState)(10),[N,w]=(0,s.useState)(!1),[C,T]=(0,s.useState)(!0),[S,k]=(0,s.useState)(!0),D=c.filter(e=>"question"===e.type||"rating"===e.type||"signature"===e.type);(0,s.useEffect)(()=>{d?(p(d.title),f(d.componentIds),j(d.settings.headerColor||"#1a56db"),y(d.settings.fontSize||10),w(d.settings.includeSerialNumber||!1),T(!1!==d.settings.showHeader),k(!1!==d.settings.showTitle)):(p(""),f([]),j("#1a56db"),y(10),w(!1),T(!0),k(!0))},[d,e]);let z=e=>{f(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])};return(0,t.jsx)(a.Dialog,{open:e,onOpenChange:o,children:(0,t.jsxs)(a.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(a.DialogHeader,{children:(0,t.jsx)(a.DialogTitle,{className:"text-xl font-bold",children:d?"تعديل الجدول":"إنشاء جدول جديد"})}),(0,t.jsxs)("div",{className:"space-y-6 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"table-title",className:"text-base font-semibold",children:"عنوان الجدول *"}),(0,t.jsx)(r.Input,{id:"table-title",value:h,onChange:e=>p(e.target.value),placeholder:"مثال: المعلومات الشخصية، التقييمات، الأسئلة المفتوحة...",className:"text-lg"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)(i.Label,{className:"text-base font-semibold",children:"إعدادات الجدول"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg border",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"header-color",className:"text-sm font-medium",children:"لون رأس الجدول"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Input,{id:"header-color",type:"color",value:b,onChange:e=>j(e.target.value),className:"w-20 h-10 cursor-pointer"}),(0,t.jsx)(r.Input,{value:b,onChange:e=>j(e.target.value),placeholder:"#1a56db",className:"flex-1"})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"font-size",className:"text-sm font-medium",children:"حجم الخط"}),(0,t.jsx)(r.Input,{id:"font-size",type:"number",min:"8",max:"16",value:v,onChange:e=>y(Number(e.target.value)),className:"w-full"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-900 rounded border",children:[(0,t.jsx)(n.Checkbox,{id:"include-serial",checked:N,onCheckedChange:e=>w(e)}),(0,t.jsx)(i.Label,{htmlFor:"include-serial",className:"cursor-pointer text-sm font-medium",children:"إضافة ترقيم تسلسلي (#)"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-900 rounded border",children:[(0,t.jsx)(n.Checkbox,{id:"show-header",checked:C,onCheckedChange:e=>T(e)}),(0,t.jsx)(i.Label,{htmlFor:"show-header",className:"cursor-pointer text-sm font-medium",children:"إظهار رأس الجدول"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white dark:bg-gray-900 rounded border col-span-2",children:[(0,t.jsx)(n.Checkbox,{id:"show-title",checked:S,onCheckedChange:e=>k(e)}),(0,t.jsx)(i.Label,{htmlFor:"show-title",className:"cursor-pointer text-sm font-medium",children:"إظهار عنوان الجدول في PDF"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)(i.Label,{className:"text-base font-semibold",children:["اختيار المكونات (",g.length," من ",D.length,")"]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{f(D.map(e=>e.id))},children:"تحديد الكل"}),(0,t.jsx)(l.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{f([])},children:"إلغاء الكل"})]})]}),(0,t.jsx)("div",{className:"border rounded-lg divide-y max-h-[300px] overflow-y-auto",children:0===D.length?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:(0,t.jsx)("p",{children:"لا توجد مكونات متاحة"})}):D.map((e,s)=>{let a=g.includes(e.id),l=e.settings?.label||"سؤال بدون عنوان",i=e.settings?.questionType||e.type;return(0,t.jsx)("div",{className:`p-3 hover:bg-gray-50 transition-colors cursor-pointer ${a?"bg-blue-50":""}`,onClick:()=>z(e.id),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(n.Checkbox,{checked:a,onCheckedChange:()=>z(e.id),onClick:e=>e.stopPropagation()}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:s+1}),(0,t.jsx)("span",{className:"text-xs text-gray-500 bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:{short_text:"نص قصير",long_text:"نص طويل",email:"بريد إلكتروني",phone:"هاتف",number:"رقم",url:"رابط",single_choice:"اختيار من متعدد",multiple_choice:"اختيار متعدد",yes_no:"نعم/لا",dropdown:"قائمة منسدلة",rating:"تقييم",date:"تاريخ",time:"وقت",linear_scale:"مقياس خطي",signature:"توقيع إلكتروني"}[i]||i})]}),(0,t.jsx)("p",{className:"font-medium text-gray-900 text-sm",title:l,children:l}),e.settings?.description&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.settings.description})]})]})},e.id)})})]}),g.length>0&&(0,t.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-green-800",children:["✅ ",(0,t.jsxs)("strong",{children:["تم تحديد ",g.length," مكون"]})," لهذا الجدول"]})})]}),(0,t.jsxs)(a.DialogFooter,{className:"gap-2",children:[(0,t.jsxs)(l.Button,{variant:"outline",onClick:()=>o(!1),children:[(0,t.jsx)(u.X,{className:"w-4 h-4 ml-2"}),"إلغاء"]}),(0,t.jsxs)(l.Button,{onClick:()=>{if(!h.trim())return void alert("يرجى إدخال عنوان للجدول");if(0===g.length)return void alert("يرجى اختيار مكون واحد على الأقل");let e={id:d?.id||`table-${Date.now()}`,title:h.trim(),componentIds:g,order:d?.order||m.length,settings:{headerColor:b,fontSize:v,includeSerialNumber:N,showHeader:C,showTitle:S}};x(e),o(!1)},children:[(0,t.jsx)($.Check,{className:"w-4 h-4 ml-2"}),d?"حفظ التغييرات":"إنشاء الجدول"]})]})]})})}var E=e.i(26271),I=e.i(74283),A=e.i(17744),L=e.i(35721),F=e.i(66128);function _({table:e,index:s,totalTables:a,onEdit:i,onDelete:r,onDuplicate:n,onMoveUp:o,onMoveDown:d}){return(0,t.jsxs)("div",{className:"group relative border-2 rounded-lg p-4 hover:border-primary transition-all bg-white shadow-sm hover:shadow-md",children:[(0,t.jsx)("div",{className:"absolute -top-3 -right-3 w-8 h-8 bg-primary text-white rounded-full flex items-center justify-center font-bold text-sm shadow-md",children:s+1}),(0,t.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,t.jsx)("div",{className:"p-2 bg-primary/10 rounded-lg",children:(0,t.jsx)(j,{className:"w-5 h-5 text-primary"})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h3",{className:"font-bold text-lg text-gray-900 truncate",title:e.title,children:e.title}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:[e.componentIds.length," مكون محدد"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.settings.includeSerialNumber&&(0,t.jsx)("span",{className:"text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded",children:"ترقيم تسلسلي"}),!1!==e.settings.showHeader&&(0,t.jsx)("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"رأس الجدول"}),!1!==e.settings.showTitle&&(0,t.jsx)("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded",children:"عنوان الجدول"}),(0,t.jsxs)("span",{className:"text-xs bg-gray-100 text-gray-700 px-2 py-1 rounded",children:["خط ",e.settings.fontSize||10]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,t.jsx)("span",{className:"text-xs text-gray-600",children:"لون الرأس:"}),(0,t.jsx)("div",{className:"w-6 h-6 rounded border-2 border-gray-300",style:{backgroundColor:e.settings.headerColor||"#1a56db"}}),(0,t.jsx)("span",{className:"text-xs text-gray-500 font-mono",children:e.settings.headerColor||"#1a56db"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"flex gap-1",children:[(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>o(e.id),disabled:0===s,title:"تحريك لأعلى",children:(0,t.jsx)(L.ChevronUp,{className:"w-4 h-4"})}),(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>d(e.id),disabled:s===a-1,title:"تحريك لأسفل",children:(0,t.jsx)(F.ChevronDown,{className:"w-4 h-4"})})]}),(0,t.jsx)("div",{className:"flex-1"}),(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>i(e),title:"تعديل",children:[(0,t.jsx)(E.Edit,{className:"w-4 h-4 ml-1"}),"تعديل"]}),(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:()=>n(e),title:"نسخ",children:(0,t.jsx)(A.Copy,{className:"w-4 h-4"})}),(0,t.jsx)(l.Button,{variant:"destructive",size:"sm",onClick:()=>{confirm(`هل أنت متأكد من حذف الجدول "${e.title}"؟`)&&r(e.id)},title:"حذف",children:(0,t.jsx)(I.Trash2,{className:"w-4 h-4"})})]}),0===e.componentIds.length&&(0,t.jsx)("div",{className:"mt-3 p-2 bg-amber-50 border border-amber-200 rounded text-xs text-amber-800",children:"⚠️ هذا الجدول فارغ. يرجى إضافة مكونات."})]})}let B=[{value:"Arial",label:"Arial"},{value:"Tahoma",label:"Tahoma"},{value:"Cairo",label:"Cairo"},{value:"Amiri",label:"Amiri"},{value:"Helvetica",label:"Helvetica"},{value:"Times New Roman",label:"Times New Roman"}],R=[{value:400,label:"عادي (400)"},{value:600,label:"متوسط (600)"},{value:700,label:"سميك (700)"},{value:800,label:"سميك جداً (800)"},{value:900,label:"أسود (900)"}],M={page:{orientation:"landscape",size:"a4",margins:{top:5,right:5,bottom:5,left:5},backgroundColor:"#ffffff"},fonts:{family:"Cairo",sizes:{eventTitle:76,tableTitle:60,header:34,content:30,info:24,footer:20},weights:{eventTitle:900,tableTitle:900,header:800,content:400}},colors:{primary:"#3b82f6",secondary:"#f8fafc",text:"#1e293b",border:"#e2e8f0",eventTitleBg:"#1e293b",eventTitleText:"#ffffff",tableTitleBg:"#f8fafc",tableTitleText:"#1e293b",headerBg:"#334155",headerText:"#ffffff",alternateRowBg:"#f8fafc"},spacing:{tableSeparation:20,containerPadding:{vertical:50,horizontal:60},cellPadding:{vertical:20,horizontal:16},titleMargins:{eventTitle:80,tableTitle:40}},table:{border:{width:1,style:"solid",radius:0},columnWidthMode:"auto",zebraStriping:!1,headerStyle:"gradient"},advanced:{quality:"high",compression:!1,embedFonts:!0},customTexts:{header:{enabled:!1,text:"",fontSize:28,color:"#1e293b",alignment:"center",bold:!0,italic:!1,marginBottom:40},footer:{enabled:!1,text:"",fontSize:24,color:"#64748b",alignment:"center",bold:!1,italic:!0,marginTop:60},separator:{enabled:!1,text:"• • •",fontSize:20,color:"#94a3b8",alignment:"center",bold:!1,italic:!1,marginTop:30,marginBottom:30}}},O=[{id:"professional",name:"احترافي أزرق",description:"التصميم الحالي v9.0 + v9.1 - احترافي بألوان هادئة وتدرجات جميلة مع دعم كامل للعربية",settings:{...M},createdAt:new Date,updatedAt:new Date,isPreset:!0},{id:"minimal",name:"بسيط أبيض وأسود",description:"تصميم بسيط وأنيق بالأبيض والأسود - مثالي للطباعة",settings:{...M,fonts:{...M.fonts,family:"Cairo",sizes:{...M.fonts.sizes,eventTitle:72,tableTitle:56,header:32,content:28},weights:{eventTitle:800,tableTitle:700,header:700,content:400}},colors:{...M.colors,primary:"#000000",secondary:"#f9fafb",text:"#000000",border:"#d1d5db",eventTitleBg:"#000000",eventTitleText:"#ffffff",tableTitleBg:"#f3f4f6",tableTitleText:"#000000",headerBg:"#000000",headerText:"#ffffff",alternateRowBg:"#f9fafb"},spacing:{...M.spacing,tableSeparation:18,cellPadding:{vertical:18,horizontal:14}},table:{...M.table,border:{width:2,style:"solid",radius:0},headerStyle:"solid",zebraStriping:!0}},createdAt:new Date,updatedAt:new Date,isPreset:!0},{id:"colorful",name:"ملون إبداعي",description:"تصميم ملون وجذاب بألوان بنفسجية وحواف دائرية",settings:{...M,fonts:{...M.fonts,family:"Cairo",sizes:{...M.fonts.sizes,eventTitle:80,tableTitle:62,header:36,content:32},weights:{eventTitle:900,tableTitle:800,header:700,content:600}},colors:{...M.colors,primary:"#8b5cf6",secondary:"#faf5ff",text:"#581c87",border:"#e9d5ff",eventTitleBg:"#7c3aed",eventTitleText:"#ffffff",tableTitleBg:"#f3e8ff",tableTitleText:"#6b21a8",headerBg:"#8b5cf6",headerText:"#ffffff",alternateRowBg:"#faf5ff"},spacing:{...M.spacing,tableSeparation:22,cellPadding:{vertical:22,horizontal:18},titleMargins:{eventTitle:85,tableTitle:45}},table:{...M.table,zebraStriping:!0,border:{width:1,style:"solid",radius:12},headerStyle:"gradient"}},createdAt:new Date,updatedAt:new Date,isPreset:!0},{id:"modern",name:"عصري أخضر",description:"تصميم عصري بألوان خضراء منعشة وحواف دائرية كبيرة",settings:{...M,fonts:{...M.fonts,family:"Cairo",sizes:{...M.fonts.sizes,eventTitle:78,tableTitle:58,header:34,content:30},weights:{eventTitle:900,tableTitle:800,header:700,content:400}},colors:{...M.colors,primary:"#10b981",secondary:"#f0fdf4",text:"#064e3b",border:"#d1fae5",eventTitleBg:"#059669",eventTitleText:"#ffffff",tableTitleBg:"#d1fae5",tableTitleText:"#065f46",headerBg:"#10b981",headerText:"#ffffff",alternateRowBg:"#f0fdf4"},spacing:{...M.spacing,tableSeparation:20,cellPadding:{vertical:20,horizontal:16}},table:{...M.table,border:{width:1,style:"solid",radius:16},zebraStriping:!0,headerStyle:"gradient"}},createdAt:new Date,updatedAt:new Date,isPreset:!0},{id:"elegant",name:"أنيق ذهبي",description:"تصميم أنيق كلاسيكي بألوان ذهبية وبنية فاخرة",settings:{...M,fonts:{...M.fonts,family:"Amiri",sizes:{...M.fonts.sizes,eventTitle:74,tableTitle:58,header:32,content:28},weights:{eventTitle:900,tableTitle:800,header:700,content:400}},colors:{...M.colors,primary:"#d97706",secondary:"#fffbeb",text:"#78350f",border:"#fde68a",eventTitleBg:"#b45309",eventTitleText:"#ffffff",tableTitleBg:"#fef3c7",tableTitleText:"#92400e",headerBg:"#d97706",headerText:"#ffffff",alternateRowBg:"#fffbeb"},spacing:{...M.spacing,tableSeparation:18,cellPadding:{vertical:18,horizontal:16}},table:{...M.table,border:{width:2,style:"solid",radius:6},zebraStriping:!0,headerStyle:"solid"}},createdAt:new Date,updatedAt:new Date,isPreset:!0},{id:"pastel",name:"هادئ باستيل",description:"تصميم هادئ بألوان باستيل ناعمة وحواف دائرية",settings:{...M,fonts:{...M.fonts,family:"Cairo",sizes:{...M.fonts.sizes,eventTitle:74,tableTitle:56,header:32,content:28},weights:{eventTitle:800,tableTitle:700,header:700,content:400}},colors:{...M.colors,primary:"#ec4899",secondary:"#fdf2f8",text:"#831843",border:"#fbcfe8",eventTitleBg:"#db2777",eventTitleText:"#ffffff",tableTitleBg:"#fce7f3",tableTitleText:"#9f1239",headerBg:"#ec4899",headerText:"#ffffff",alternateRowBg:"#fdf2f8"},spacing:{...M.spacing,tableSeparation:22,cellPadding:{vertical:22,horizontal:18},titleMargins:{eventTitle:85,tableTitle:45}},table:{...M.table,border:{width:1,style:"solid",radius:14},zebraStriping:!0,headerStyle:"gradient"}},createdAt:new Date,updatedAt:new Date,isPreset:!0},{id:"contrast",name:"تباين عالي",description:"تصميم بتباين عالي للقراءة الواضحة - مثالي لضعاف البصر",settings:{...M,fonts:{...M.fonts,family:"Cairo",sizes:{...M.fonts.sizes,eventTitle:82,tableTitle:64,header:38,content:34},weights:{eventTitle:900,tableTitle:900,header:800,content:700}},colors:{...M.colors,primary:"#dc2626",secondary:"#ffffff",text:"#000000",border:"#000000",eventTitleBg:"#000000",eventTitleText:"#ffffff",tableTitleBg:"#fef2f2",tableTitleText:"#000000",headerBg:"#dc2626",headerText:"#ffffff",alternateRowBg:"#fef2f2"},spacing:{...M.spacing,tableSeparation:24,cellPadding:{vertical:24,horizontal:20},titleMargins:{eventTitle:90,tableTitle:50}},table:{...M.table,border:{width:3,style:"solid",radius:0},zebraStriping:!0,headerStyle:"solid"}},createdAt:new Date,updatedAt:new Date,isPreset:!0}],H=(0,s.createContext)(void 0),U="pdf-editor-templates",V="pdf-editor-current-settings",G="pdf-editor-selected-template";function W(e,t){switch(t.type){case"SET_SETTINGS":return{...e,currentSettings:t.payload,isDirty:!0};case"UPDATE_PAGE_SETTINGS":return{...e,currentSettings:{...e.currentSettings,page:{...e.currentSettings.page,...t.payload}},isDirty:!0};case"UPDATE_FONT_SETTINGS":return{...e,currentSettings:{...e.currentSettings,fonts:{...e.currentSettings.fonts,...t.payload,sizes:{...e.currentSettings.fonts.sizes,...t.payload.sizes||{}},weights:{...e.currentSettings.fonts.weights,...t.payload.weights||{}}}},isDirty:!0};case"UPDATE_COLOR_SETTINGS":return{...e,currentSettings:{...e.currentSettings,colors:{...e.currentSettings.colors,...t.payload}},isDirty:!0};case"UPDATE_SPACING_SETTINGS":return{...e,currentSettings:{...e.currentSettings,spacing:{...e.currentSettings.spacing,...t.payload,containerPadding:{...e.currentSettings.spacing.containerPadding,...t.payload.containerPadding||{}},cellPadding:{...e.currentSettings.spacing.cellPadding,...t.payload.cellPadding||{}},titleMargins:{...e.currentSettings.spacing.titleMargins,...t.payload.titleMargins||{}}}},isDirty:!0};case"UPDATE_TABLE_SETTINGS":return{...e,currentSettings:{...e.currentSettings,table:{...e.currentSettings.table,...t.payload,border:{...e.currentSettings.table.border,...t.payload.border||{}}}},isDirty:!0};case"UPDATE_ADVANCED_SETTINGS":return{...e,currentSettings:{...e.currentSettings,advanced:{...e.currentSettings.advanced,...t.payload}},isDirty:!0};case"LOAD_TEMPLATE":{let s=e.templates.find(e=>e.id===t.payload);if(!s)return e;return{...e,currentSettings:s.settings,selectedTemplateId:s.id,isDirty:!1}}case"SAVE_TEMPLATE":{let s={id:`custom-${Date.now()}`,name:t.payload.name,description:t.payload.description,settings:e.currentSettings,createdAt:new Date,updatedAt:new Date,isPreset:!1},a=[...e.templates,s];return localStorage.setItem(U,JSON.stringify(a.filter(e=>!e.isPreset))),{...e,templates:a,selectedTemplateId:s.id,isDirty:!1}}case"DELETE_TEMPLATE":{let s=e.templates.find(e=>e.id===t.payload);if(!s||s.isPreset)return e;let a=e.templates.filter(e=>e.id!==t.payload);return localStorage.setItem(U,JSON.stringify(a.filter(e=>!e.isPreset))),{...e,templates:a,selectedTemplateId:e.selectedTemplateId===t.payload?void 0:e.selectedTemplateId}}case"SET_PREVIEW_LOADING":return{...e,isPreviewLoading:t.payload};case"SET_PREVIEW_ZOOM":return{...e,previewZoom:Math.max(.5,Math.min(2,t.payload))};case"RESET_TO_DEFAULT":return{...e,currentSettings:M,selectedTemplateId:"professional",isDirty:!1};case"MARK_CLEAN":return{...e,isDirty:!1};case"ADD_CUSTOM_TEXT_OVERLAY":{let s={...t.payload,id:`overlay-${Date.now()}-${Math.random().toString(36).substr(2,9)}`};return{...e,currentSettings:{...e.currentSettings,customTextOverlays:[...e.currentSettings.customTextOverlays||[],s]},isDirty:!0}}case"UPDATE_CUSTOM_TEXT_OVERLAY":{let s=(e.currentSettings.customTextOverlays||[]).map(e=>e.id===t.payload.id?{...e,...t.payload.updates}:e);return{...e,currentSettings:{...e.currentSettings,customTextOverlays:s},isDirty:!0}}case"DELETE_CUSTOM_TEXT_OVERLAY":{let s=(e.currentSettings.customTextOverlays||[]).filter(e=>e.id!==t.payload);return{...e,currentSettings:{...e.currentSettings,customTextOverlays:s},isDirty:!0}}case"SELECT_ELEMENT":return{...e,selectedElement:t.payload};case"DESELECT_ELEMENT":return{...e,selectedElement:null};case"SET_PREVIEW_MODE":return{...e,previewMode:t.payload,selectedElement:null};default:return e}}function q({children:e}){let[a,l]=(0,s.useReducer)(W,null,()=>{let e=localStorage.getItem(U),t=e?JSON.parse(e):[],s=localStorage.getItem(V);return{currentSettings:s?JSON.parse(s):M,templates:[...O,...t],selectedTemplateId:localStorage.getItem(G)||"professional",isPreviewLoading:!1,previewZoom:1,isDirty:!1,selectedElement:null,previewMode:"preview"}});(0,s.useEffect)(()=>{localStorage.setItem(V,JSON.stringify(a.currentSettings)),a.selectedTemplateId&&localStorage.setItem(G,a.selectedTemplateId)},[a.currentSettings,a.selectedTemplateId]);let i=(0,s.useCallback)(e=>{l({type:"SET_SETTINGS",payload:e})},[]),r=(0,s.useCallback)(e=>{l({type:"SET_SETTINGS",payload:{...a.currentSettings,...e,page:{...a.currentSettings.page,...e.page||{}},fonts:{...a.currentSettings.fonts,...e.fonts||{},sizes:{...a.currentSettings.fonts.sizes,...e.fonts?.sizes||{}},weights:{...a.currentSettings.fonts.weights,...e.fonts?.weights||{}}},colors:{...a.currentSettings.colors,...e.colors||{}},spacing:{...a.currentSettings.spacing,...e.spacing||{},containerPadding:{...a.currentSettings.spacing.containerPadding,...e.spacing?.containerPadding||{}},cellPadding:{...a.currentSettings.spacing.cellPadding,...e.spacing?.cellPadding||{}},titleMargins:{...a.currentSettings.spacing.titleMargins,...e.spacing?.titleMargins||{}}},table:{...a.currentSettings.table,...e.table||{},border:{...a.currentSettings.table.border,...e.table?.border||{}}},advanced:{...a.currentSettings.advanced,...e.advanced||{}}}})},[a.currentSettings]),n=(0,s.useCallback)(e=>{l({type:"UPDATE_PAGE_SETTINGS",payload:e})},[]),o=(0,s.useCallback)(e=>{l({type:"UPDATE_FONT_SETTINGS",payload:e})},[]),d=(0,s.useCallback)(e=>{l({type:"UPDATE_COLOR_SETTINGS",payload:e})},[]),c=(0,s.useCallback)(e=>{l({type:"UPDATE_SPACING_SETTINGS",payload:e})},[]),x=(0,s.useCallback)(e=>{l({type:"UPDATE_TABLE_SETTINGS",payload:e})},[]),m=(0,s.useCallback)(e=>{l({type:"UPDATE_ADVANCED_SETTINGS",payload:e})},[]),h=(0,s.useCallback)(e=>{l({type:"ADD_CUSTOM_TEXT_OVERLAY",payload:e})},[]),p=(0,s.useCallback)((e,t)=>{l({type:"UPDATE_CUSTOM_TEXT_OVERLAY",payload:{id:e,updates:t}})},[]),g=(0,s.useCallback)(e=>{l({type:"DELETE_CUSTOM_TEXT_OVERLAY",payload:e})},[]),u=(0,s.useCallback)(e=>{l({type:"LOAD_TEMPLATE",payload:e})},[]),f=(0,s.useCallback)((e,t)=>{l({type:"SAVE_TEMPLATE",payload:{name:e,description:t}})},[]),b=(0,s.useCallback)(e=>{l({type:"DELETE_TEMPLATE",payload:e})},[]),j=(0,s.useCallback)(e=>{l({type:"SET_PREVIEW_LOADING",payload:e})},[]),v=(0,s.useCallback)(e=>{l({type:"SET_PREVIEW_ZOOM",payload:e})},[]),y=(0,s.useCallback)(e=>{l({type:"SELECT_ELEMENT",payload:e})},[]),N=(0,s.useCallback)(()=>{l({type:"DESELECT_ELEMENT"})},[]),w=(0,s.useCallback)(e=>{l({type:"SET_PREVIEW_MODE",payload:e})},[]),C=(0,s.useCallback)(()=>{l({type:"RESET_TO_DEFAULT"})},[]),T=(0,s.useCallback)(()=>{l({type:"MARK_CLEAN"})},[]);return(0,t.jsx)(H.Provider,{value:{state:a,dispatch:l,setSettings:i,updateSettings:r,updatePageSettings:n,updateFontSettings:o,updateColorSettings:d,updateSpacingSettings:c,updateTableSettings:x,updateAdvancedSettings:m,addCustomTextOverlay:h,updateCustomTextOverlay:p,deleteCustomTextOverlay:g,loadTemplate:u,saveTemplate:f,deleteTemplate:b,setPreviewLoading:j,setPreviewZoom:v,selectElement:y,deselectElement:N,setPreviewMode:w,resetToDefault:C,markClean:T},children:e})}function X(){let e=(0,s.useContext)(H);if(void 0===e)throw Error("usePDFEditor must be used within PDFEditorProvider");return e}var Z=e.i(59914),J=e.i(13491),Y=e.i(55766),K=e.i(23534),Q=e.i(95338),ee=e.i(50057),et=e.i(69384),es=e.i(42273),ea=e.i(13402),el="Collapsible",[ei,er]=(0,Z.createContextScope)(el),[en,eo]=ei(el),ed=s.forwardRef((e,a)=>{let{__scopeCollapsible:l,open:i,defaultOpen:r,disabled:n,onOpenChange:o,...d}=e,[c,x]=(0,Q.useControllableState)({prop:i,defaultProp:r??!1,onChange:o,caller:el});return(0,t.jsx)(en,{scope:l,disabled:n,contentId:(0,ea.useId)(),open:c,onOpenToggle:s.useCallback(()=>x(e=>!e),[x]),children:(0,t.jsx)(ee.Primitive.div,{"data-state":eg(c),"data-disabled":n?"":void 0,...d,ref:a})})});ed.displayName=el;var ec="CollapsibleTrigger",ex=s.forwardRef((e,s)=>{let{__scopeCollapsible:a,...l}=e,i=eo(ec,a);return(0,t.jsx)(ee.Primitive.button,{type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":eg(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled,...l,ref:s,onClick:(0,K.composeEventHandlers)(e.onClick,i.onOpenToggle)})});ex.displayName=ec;var em="CollapsibleContent",eh=s.forwardRef((e,s)=>{let{forceMount:a,...l}=e,i=eo(em,e.__scopeCollapsible);return(0,t.jsx)(es.Presence,{present:a||i.open,children:({present:e})=>(0,t.jsx)(ep,{...l,ref:s,present:e})})});eh.displayName=em;var ep=s.forwardRef((e,a)=>{let{__scopeCollapsible:l,present:i,children:r,...n}=e,o=eo(em,l),[d,c]=s.useState(i),x=s.useRef(null),m=(0,Y.useComposedRefs)(a,x),h=s.useRef(0),p=h.current,g=s.useRef(0),u=g.current,f=o.open||d,b=s.useRef(f),j=s.useRef(void 0);return s.useEffect(()=>{let e=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(e)},[]),(0,et.useLayoutEffect)(()=>{let e=x.current;if(e){j.current=j.current||{transitionDuration:e.style.transitionDuration,animationName:e.style.animationName},e.style.transitionDuration="0s",e.style.animationName="none";let t=e.getBoundingClientRect();h.current=t.height,g.current=t.width,b.current||(e.style.transitionDuration=j.current.transitionDuration,e.style.animationName=j.current.animationName),c(i)}},[o.open,i]),(0,t.jsx)(ee.Primitive.div,{"data-state":eg(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!f,...n,ref:m,style:{"--radix-collapsible-content-height":p?`${p}px`:void 0,"--radix-collapsible-content-width":u?`${u}px`:void 0,...e.style},children:f&&r})});function eg(e){return e?"open":"closed"}var eu=e.i(55805),ef="Accordion",eb=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[ej,ev,ey]=(0,J.createCollection)(ef),[eN,ew]=(0,Z.createContextScope)(ef,[ey,er]),eC=er(),eT=s.default.forwardRef((e,s)=>{let{type:a,...l}=e;return(0,t.jsx)(ej.Provider,{scope:e.__scopeAccordion,children:"multiple"===a?(0,t.jsx)(eP,{...l,ref:s}):(0,t.jsx)(e$,{...l,ref:s})})});eT.displayName=ef;var[eS,ek]=eN(ef),[eD,ez]=eN(ef,{collapsible:!1}),e$=s.default.forwardRef((e,a)=>{let{value:l,defaultValue:i,onValueChange:r=()=>{},collapsible:n=!1,...o}=e,[d,c]=(0,Q.useControllableState)({prop:l,defaultProp:i??"",onChange:r,caller:ef});return(0,t.jsx)(eS,{scope:e.__scopeAccordion,value:s.default.useMemo(()=>d?[d]:[],[d]),onItemOpen:c,onItemClose:s.default.useCallback(()=>n&&c(""),[n,c]),children:(0,t.jsx)(eD,{scope:e.__scopeAccordion,collapsible:n,children:(0,t.jsx)(eA,{...o,ref:a})})})}),eP=s.default.forwardRef((e,a)=>{let{value:l,defaultValue:i,onValueChange:r=()=>{},...n}=e,[o,d]=(0,Q.useControllableState)({prop:l,defaultProp:i??[],onChange:r,caller:ef}),c=s.default.useCallback(e=>d((t=[])=>[...t,e]),[d]),x=s.default.useCallback(e=>d((t=[])=>t.filter(t=>t!==e)),[d]);return(0,t.jsx)(eS,{scope:e.__scopeAccordion,value:o,onItemOpen:c,onItemClose:x,children:(0,t.jsx)(eD,{scope:e.__scopeAccordion,collapsible:!0,children:(0,t.jsx)(eA,{...n,ref:a})})})}),[eE,eI]=eN(ef),eA=s.default.forwardRef((e,a)=>{let{__scopeAccordion:l,disabled:i,dir:r,orientation:n="vertical",...o}=e,d=s.default.useRef(null),c=(0,Y.useComposedRefs)(d,a),x=ev(l),m="ltr"===(0,eu.useDirection)(r),h=(0,K.composeEventHandlers)(e.onKeyDown,e=>{if(!eb.includes(e.key))return;let t=e.target,s=x().filter(e=>!e.ref.current?.disabled),a=s.findIndex(e=>e.ref.current===t),l=s.length;if(-1===a)return;e.preventDefault();let i=a,r=l-1,o=()=>{(i=a+1)>r&&(i=0)},d=()=>{(i=a-1)<0&&(i=r)};switch(e.key){case"Home":i=0;break;case"End":i=r;break;case"ArrowRight":"horizontal"===n&&(m?o():d());break;case"ArrowDown":"vertical"===n&&o();break;case"ArrowLeft":"horizontal"===n&&(m?d():o());break;case"ArrowUp":"vertical"===n&&d()}let c=i%l;s[c].ref.current?.focus()});return(0,t.jsx)(eE,{scope:l,disabled:i,direction:r,orientation:n,children:(0,t.jsx)(ej.Slot,{scope:l,children:(0,t.jsx)(ee.Primitive.div,{...o,"data-orientation":n,ref:c,onKeyDown:i?void 0:h})})})}),eL="AccordionItem",[eF,e_]=eN(eL),eB=s.default.forwardRef((e,s)=>{let{__scopeAccordion:a,value:l,...i}=e,r=eI(eL,a),n=ek(eL,a),o=eC(a),d=(0,ea.useId)(),c=l&&n.value.includes(l)||!1,x=r.disabled||e.disabled;return(0,t.jsx)(eF,{scope:a,open:c,disabled:x,triggerId:d,children:(0,t.jsx)(ed,{"data-orientation":r.orientation,"data-state":eG(c),...o,...i,ref:s,disabled:x,open:c,onOpenChange:e=>{e?n.onItemOpen(l):n.onItemClose(l)}})})});eB.displayName=eL;var eR="AccordionHeader",eM=s.default.forwardRef((e,s)=>{let{__scopeAccordion:a,...l}=e,i=eI(ef,a),r=e_(eR,a);return(0,t.jsx)(ee.Primitive.h3,{"data-orientation":i.orientation,"data-state":eG(r.open),"data-disabled":r.disabled?"":void 0,...l,ref:s})});eM.displayName=eR;var eO="AccordionTrigger",eH=s.default.forwardRef((e,s)=>{let{__scopeAccordion:a,...l}=e,i=eI(ef,a),r=e_(eO,a),n=ez(eO,a),o=eC(a);return(0,t.jsx)(ej.ItemSlot,{scope:a,children:(0,t.jsx)(ex,{"aria-disabled":r.open&&!n.collapsible||void 0,"data-orientation":i.orientation,id:r.triggerId,...o,...l,ref:s})})});eH.displayName=eO;var eU="AccordionContent",eV=s.default.forwardRef((e,s)=>{let{__scopeAccordion:a,...l}=e,i=eI(ef,a),r=e_(eU,a),n=eC(a);return(0,t.jsx)(eh,{role:"region","aria-labelledby":r.triggerId,"data-orientation":i.orientation,...n,...l,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...e.style}})});function eG(e){return e?"open":"closed"}eV.displayName=eU;var eW=e.i(70274);let eq=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(eB,{ref:a,className:(0,eW.cn)("",e),...s}));eq.displayName="AccordionItem";let eX=s.forwardRef(({className:e,children:s,...a},l)=>(0,t.jsx)(eM,{className:"flex",children:(0,t.jsxs)(eH,{ref:l,className:(0,eW.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all [&[data-state=open]>svg]:rotate-180",e),...a,children:[s,(0,t.jsx)(F.ChevronDown,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));eX.displayName=eH.displayName;let eZ=s.forwardRef(({className:e,children:s,...a},l)=>(0,t.jsx)(eV,{ref:l,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:(0,t.jsx)("div",{className:(0,eW.cn)("pb-4 pt-0",e),children:s})}));eZ.displayName=eV.displayName;var eJ=e.i(38433);function eY({label:e,value:s,options:a,onChange:l,description:r,disabled:n=!1,placeholder:o="اختر..."}){return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{className:"text-sm font-medium",children:e}),(0,t.jsxs)(d.Select,{value:s,onValueChange:l,disabled:n,children:[(0,t.jsx)(d.SelectTrigger,{className:"w-full",children:(0,t.jsx)(d.SelectValue,{placeholder:o})}),(0,t.jsx)(d.SelectContent,{children:a.map(e=>(0,t.jsx)(d.SelectItem,{value:e.value,children:e.label},e.value))})]}),r&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:r})]})}function eK({label:e,value:s,min:a,max:l,step:r=1,unit:n="",onChange:o,description:d,disabled:x=!1}){return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.Label,{className:"text-sm font-medium",children:e}),(0,t.jsxs)("span",{className:"text-sm font-semibold text-primary",children:[s,n]})]}),(0,t.jsx)(c.Slider,{value:[s],min:a,max:l,step:r,onValueChange:e=>{o(e[0])},disabled:x,className:"w-full"}),d&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:d})]})}function eQ({label:e,value:s,onChange:a,description:l,disabled:n=!1}){return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{className:"text-sm font-medium",children:e}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"relative",children:(0,t.jsx)("input",{type:"color",value:s,onChange:e=>{a(e.target.value)},disabled:n,className:"w-12 h-10 rounded border border-input cursor-pointer disabled:cursor-not-allowed disabled:opacity-50"})}),(0,t.jsx)(r.Input,{type:"text",value:s,onChange:e=>{let t=e.target.value;/^#[0-9A-Fa-f]{0,6}$/.test(t)&&a(t)},disabled:n,placeholder:"#000000",className:"flex-1 font-mono text-sm",maxLength:7})]}),l&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:l})]})}var e0=e.i(19459);function e1(){let{state:e,updatePageSettings:s}=X(),{page:a}=e.currentSettings;return(0,t.jsxs)(e0.Card,{children:[(0,t.jsxs)(e0.CardHeader,{children:[(0,t.jsx)(e0.CardTitle,{className:"text-lg",children:"إعدادات الصفحة"}),(0,t.jsx)(e0.CardDescription,{children:"تخصيص حجم الصفحة، الاتجاه، والهوامش"})]}),(0,t.jsxs)(e0.CardContent,{className:"space-y-6",children:[(0,t.jsx)(eY,{label:"اتجاه الصفحة",value:a.orientation,options:[{value:"landscape",label:"أفقي (Landscape)"},{value:"portrait",label:"عمودي (Portrait)"}],onChange:e=>s({orientation:e}),description:"اختر اتجاه الصفحة (أفقي أو عمودي)"}),(0,t.jsx)(eY,{label:"حجم الصفحة",value:a.size,options:[{value:"a4",label:"A4"},{value:"a3",label:"A3"},{value:"letter",label:"Letter"},{value:"legal",label:"Legal"},{value:"custom",label:"مخصص (Custom)"}],onChange:e=>s({size:e}),description:"اختر حجم الصفحة القياسي أو مخصص"}),"custom"===a.size&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(eK,{label:"العرض المخصص",value:a.customWidth||210,min:100,max:500,step:10,unit:"mm",onChange:e=>s({customWidth:e}),description:"عرض الصفحة بالمليمتر"}),(0,t.jsx)(eK,{label:"الارتفاع المخصص",value:a.customHeight||297,min:100,max:700,step:10,unit:"mm",onChange:e=>s({customHeight:e}),description:"ارتفاع الصفحة بالمليمتر"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"الهوامش (Margins)"}),(0,t.jsx)(eK,{label:"الهامش العلوي",value:a.margins.top,min:0,max:50,step:1,unit:"mm",onChange:e=>s({margins:{...a.margins,top:e}})}),(0,t.jsx)(eK,{label:"الهامش الأيمن",value:a.margins.right,min:0,max:50,step:1,unit:"mm",onChange:e=>s({margins:{...a.margins,right:e}})}),(0,t.jsx)(eK,{label:"الهامش السفلي",value:a.margins.bottom,min:0,max:50,step:1,unit:"mm",onChange:e=>s({margins:{...a.margins,bottom:e}})}),(0,t.jsx)(eK,{label:"الهامش الأيسر",value:a.margins.left,min:0,max:50,step:1,unit:"mm",onChange:e=>s({margins:{...a.margins,left:e}})})]}),(0,t.jsx)(eQ,{label:"لون خلفية الصفحة",value:a.backgroundColor,onChange:e=>s({backgroundColor:e}),description:"لون خلفية الصفحة (عادة أبيض)"})]})]})}function e2(){let{state:e,updateFontSettings:s}=X(),{fonts:a}=e.currentSettings;return(0,t.jsxs)(e0.Card,{children:[(0,t.jsxs)(e0.CardHeader,{children:[(0,t.jsx)(e0.CardTitle,{className:"text-lg",children:"إعدادات الخطوط"}),(0,t.jsx)(e0.CardDescription,{children:"تخصيص نوع الخط، الأحجام، والأوزان"})]}),(0,t.jsxs)(e0.CardContent,{className:"space-y-6",children:[(0,t.jsx)(eY,{label:"نوع الخط",value:a.family,options:B.map(e=>({value:e.value,label:e.label})),onChange:e=>s({family:e}),description:"اختر نوع الخط المستخدم في PDF"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"أحجام الخطوط"}),(0,t.jsx)(eK,{label:"حجم عنوان الحدث",value:a.sizes.eventTitle,min:40,max:120,step:2,unit:"px",onChange:e=>s({sizes:{...a.sizes,eventTitle:e}}),description:"حجم العنوان الرئيسي للحدث"}),(0,t.jsx)(eK,{label:"حجم عنوان الجدول",value:a.sizes.tableTitle,min:30,max:100,step:2,unit:"px",onChange:e=>s({sizes:{...a.sizes,tableTitle:e}}),description:"حجم عنوان كل جدول"}),(0,t.jsx)(eK,{label:"حجم رأس الجدول",value:a.sizes.header,min:20,max:60,step:1,unit:"px",onChange:e=>s({sizes:{...a.sizes,header:e}}),description:"حجم خط رؤوس الأعمدة"}),(0,t.jsx)(eK,{label:"حجم محتوى الخلايا",value:a.sizes.content,min:16,max:50,step:1,unit:"px",onChange:e=>s({sizes:{...a.sizes,content:e}}),description:"حجم خط محتوى الجدول"}),(0,t.jsx)(eK,{label:"حجم النصوص الإضافية",value:a.sizes.info,min:14,max:40,step:1,unit:"px",onChange:e=>s({sizes:{...a.sizes,info:e}}),description:"حجم النصوص الإضافية (تاريخ التصدير، إلخ)"}),(0,t.jsx)(eK,{label:"حجم التذييل",value:a.sizes.footer,min:12,max:36,step:1,unit:"px",onChange:e=>s({sizes:{...a.sizes,footer:e}}),description:"حجم خط التذييل"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"أوزان الخطوط"}),(0,t.jsx)(eY,{label:"وزن عنوان الحدث",value:a.weights.eventTitle.toString(),options:R.map(e=>({value:e.value.toString(),label:e.label})),onChange:e=>s({weights:{...a.weights,eventTitle:parseInt(e)}}),description:"سُمك خط عنوان الحدث"}),(0,t.jsx)(eY,{label:"وزن عنوان الجدول",value:a.weights.tableTitle.toString(),options:R.map(e=>({value:e.value.toString(),label:e.label})),onChange:e=>s({weights:{...a.weights,tableTitle:parseInt(e)}}),description:"سُمك خط عنوان الجدول"}),(0,t.jsx)(eY,{label:"وزن رأس الجدول",value:a.weights.header.toString(),options:R.map(e=>({value:e.value.toString(),label:e.label})),onChange:e=>s({weights:{...a.weights,header:parseInt(e)}}),description:"سُمك خط رؤوس الأعمدة"}),(0,t.jsx)(eY,{label:"وزن محتوى الخلايا",value:a.weights.content.toString(),options:R.map(e=>({value:e.value.toString(),label:e.label})),onChange:e=>s({weights:{...a.weights,content:parseInt(e)}}),description:"سُمك خط محتوى الجدول"})]})]})]})}var e4=e.i(90201);function e5(){let{state:e,updateColorSettings:s}=X(),{colors:a}=e.currentSettings;return(0,t.jsxs)(e0.Card,{children:[(0,t.jsxs)(e0.CardHeader,{children:[(0,t.jsx)(e0.CardTitle,{className:"text-lg",children:"إعدادات الألوان"}),(0,t.jsx)(e0.CardDescription,{children:"تخصيص نظام الألوان لجميع عناصر PDF"})]}),(0,t.jsxs)(e0.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"الألوان الأساسية"}),(0,t.jsx)(eQ,{label:"اللون الأساسي",value:a.primary,onChange:e=>s({primary:e}),description:"اللون الرئيسي المستخدم في العناوين والتمييزات"}),(0,t.jsx)(eQ,{label:"اللون الثانوي",value:a.secondary,onChange:e=>s({secondary:e}),description:"اللون الثانوي للخلفيات الخفيفة"}),(0,t.jsx)(eQ,{label:"لون النص",value:a.text,onChange:e=>s({text:e}),description:"اللون الافتراضي للنصوص"}),(0,t.jsx)(eQ,{label:"لون الحدود",value:a.border,onChange:e=>s({border:e}),description:"لون حدود الجداول والعناصر"})]}),(0,t.jsx)(e4.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"ألوان عنوان الحدث"}),(0,t.jsx)(eQ,{label:"لون خلفية عنوان الحدث",value:a.eventTitleBg,onChange:e=>s({eventTitleBg:e}),description:"لون الخلفية المتدرجة لعنوان الحدث"}),(0,t.jsx)(eQ,{label:"لون نص عنوان الحدث",value:a.eventTitleText,onChange:e=>s({eventTitleText:e}),description:"لون النص في عنوان الحدث (عادة أبيض)"})]}),(0,t.jsx)(e4.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"ألوان عنوان الجدول"}),(0,t.jsx)(eQ,{label:"لون خلفية عنوان الجدول",value:a.tableTitleBg,onChange:e=>s({tableTitleBg:e}),description:"لون خلفية عنوان الجدول (يفضل شفاف)"}),(0,t.jsx)(eQ,{label:"لون نص عنوان الجدول",value:a.tableTitleText,onChange:e=>s({tableTitleText:e}),description:"لون النص في عنوان الجدول"})]}),(0,t.jsx)(e4.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"ألوان رأس الجدول"}),(0,t.jsx)(eQ,{label:"لون خلفية رأس الجدول",value:a.headerBg,onChange:e=>s({headerBg:e}),description:"لون خلفية رؤوس الأعمدة"}),(0,t.jsx)(eQ,{label:"لون نص رأس الجدول",value:a.headerText,onChange:e=>s({headerText:e}),description:"لون النص في رؤوس الأعمدة (عادة أبيض)"})]}),(0,t.jsx)(e4.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"ألوان إضافية"}),(0,t.jsx)(eQ,{label:"لون الصفوف المتبادلة",value:a.alternateRowBg||"#f9fafb",onChange:e=>s({alternateRowBg:e}),description:"لون خلفية الصفوف المتبادلة (Zebra Striping)"})]})]})]})}function e3(){let{state:e,updateSpacingSettings:s}=X(),{spacing:a}=e.currentSettings;return(0,t.jsxs)(e0.Card,{children:[(0,t.jsxs)(e0.CardHeader,{children:[(0,t.jsx)(e0.CardTitle,{className:"text-lg",children:"إعدادات المسافات"}),(0,t.jsx)(e0.CardDescription,{children:"تخصيص المسافات والحشو بين العناصر"})]}),(0,t.jsxs)(e0.CardContent,{className:"space-y-6",children:[(0,t.jsx)(eK,{label:"المسافة بين الجداول",value:a.tableSeparation,min:5,max:50,step:5,unit:"mm",onChange:e=>s({tableSeparation:e}),description:"المسافة الفاصلة بين جدول وآخر"}),(0,t.jsx)(e4.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"حشو الحاوية (Container Padding)"}),(0,t.jsx)(eK,{label:"الحشو العمودي",value:a.containerPadding.vertical,min:20,max:80,step:5,unit:"px",onChange:e=>s({containerPadding:{...a.containerPadding,vertical:e}}),description:"المسافة العمودية داخل الحاوية (أعلى وأسفل)"}),(0,t.jsx)(eK,{label:"الحشو الأفقي",value:a.containerPadding.horizontal,min:20,max:100,step:5,unit:"px",onChange:e=>s({containerPadding:{...a.containerPadding,horizontal:e}}),description:"المسافة الأفقية داخل الحاوية (يمين ويسار)"})]}),(0,t.jsx)(e4.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"حشو الخلايا (Cell Padding)"}),(0,t.jsx)(eK,{label:"الحشو العمودي للخلايا",value:a.cellPadding.vertical,min:8,max:32,step:2,unit:"px",onChange:e=>s({cellPadding:{...a.cellPadding,vertical:e}}),description:"المسافة العمودية داخل خلايا الجدول"}),(0,t.jsx)(eK,{label:"الحشو الأفقي للخلايا",value:a.cellPadding.horizontal,min:8,max:32,step:2,unit:"px",onChange:e=>s({cellPadding:{...a.cellPadding,horizontal:e}}),description:"المسافة الأفقية داخل خلايا الجدول"})]}),(0,t.jsx)(e4.Separator,{}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"هوامش العناوين (Title Margins)"}),(0,t.jsx)(eK,{label:"هامش عنوان الحدث",value:a.titleMargins.eventTitle,min:10,max:60,step:2,unit:"px",onChange:e=>s({titleMargins:{...a.titleMargins,eventTitle:e}}),description:"المسافة أسفل عنوان الحدث"}),(0,t.jsx)(eK,{label:"هامش عنوان الجدول",value:a.titleMargins.tableTitle,min:10,max:50,step:2,unit:"px",onChange:e=>s({titleMargins:{...a.titleMargins,tableTitle:e}}),description:"المسافة أسفل عنوان الجدول"})]})]})]})}var e6=e.i(40110),e8=e.i(67701),e9="Switch",[e7,te]=(0,Z.createContextScope)(e9),[tt,ts]=e7(e9),ta=s.forwardRef((e,a)=>{let{__scopeSwitch:l,name:i,checked:r,defaultChecked:n,required:o,disabled:d,value:c="on",onCheckedChange:x,form:m,...h}=e,[p,g]=s.useState(null),u=(0,Y.useComposedRefs)(a,e=>g(e)),f=s.useRef(!1),b=!p||m||!!p.closest("form"),[j,v]=(0,Q.useControllableState)({prop:r,defaultProp:n??!1,onChange:x,caller:e9});return(0,t.jsxs)(tt,{scope:l,checked:j,disabled:d,children:[(0,t.jsx)(ee.Primitive.button,{type:"button",role:"switch","aria-checked":j,"aria-required":o,"data-state":tn(j),"data-disabled":d?"":void 0,disabled:d,value:c,...h,ref:u,onClick:(0,K.composeEventHandlers)(e.onClick,e=>{v(e=>!e),b&&(f.current=e.isPropagationStopped(),f.current||e.stopPropagation())})}),b&&(0,t.jsx)(tr,{control:p,bubbles:!f.current,name:i,value:c,checked:j,required:o,disabled:d,form:m,style:{transform:"translateX(-100%)"}})]})});ta.displayName=e9;var tl="SwitchThumb",ti=s.forwardRef((e,s)=>{let{__scopeSwitch:a,...l}=e,i=ts(tl,a);return(0,t.jsx)(ee.Primitive.span,{"data-state":tn(i.checked),"data-disabled":i.disabled?"":void 0,...l,ref:s})});ti.displayName=tl;var tr=s.forwardRef(({__scopeSwitch:e,control:a,checked:l,bubbles:i=!0,...r},n)=>{let o=s.useRef(null),d=(0,Y.useComposedRefs)(o,n),c=(0,e6.usePrevious)(l),x=(0,e8.useSize)(a);return s.useEffect(()=>{let e=o.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==l&&t){let s=new Event("click",{bubbles:i});t.call(e,l),e.dispatchEvent(s)}},[c,l,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:l,...r,tabIndex:-1,ref:d,style:{...r.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function tn(e){return e?"checked":"unchecked"}tr.displayName="SwitchBubbleInput";let to=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)(ta,{className:(0,eW.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-gray-300",e),...s,ref:a,children:(0,t.jsx)(ti,{className:(0,eW.cn)("pointer-events-none block h-5 w-5 rounded-full bg-gray-900 shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0 data-[state=checked]:bg-white")})}));function td(){let{state:e,updateTableSettings:s}=X(),{table:a}=e.currentSettings;return(0,t.jsxs)(e0.Card,{children:[(0,t.jsxs)(e0.CardHeader,{children:[(0,t.jsx)(e0.CardTitle,{className:"text-lg",children:"إعدادات الجداول"}),(0,t.jsx)(e0.CardDescription,{children:"تخصيص مظهر الجداول والحدود"})]}),(0,t.jsxs)(e0.CardContent,{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"إعدادات الحدود"}),(0,t.jsx)(eK,{label:"سُمك الحدود",value:a.border.width,min:0,max:5,step:1,unit:"px",onChange:e=>s({border:{...a.border,width:e}}),description:"سُمك حدود الجدول والخلايا"}),(0,t.jsx)(eY,{label:"نمط الحدود",value:a.border.style,options:[{value:"solid",label:"صلب (Solid)"},{value:"dashed",label:"متقطع (Dashed)"},{value:"dotted",label:"منقط (Dotted)"}],onChange:e=>s({border:{...a.border,style:e}}),description:"نمط خطوط الحدود"}),(0,t.jsx)(eK,{label:"استدارة الحواف",value:a.border.radius,min:0,max:20,step:1,unit:"px",onChange:e=>s({border:{...a.border,radius:e}}),description:"استدارة زوايا الجدول (0 = حواف حادة)"})]}),(0,t.jsx)(e4.Separator,{}),(0,t.jsx)(eY,{label:"وضع عرض الأعمدة",value:a.columnWidthMode,options:[{value:"auto",label:"تلقائي (Auto)"},{value:"fixed",label:"ثابت (Fixed)"},{value:"custom",label:"مخصص (Custom)"}],onChange:e=>s({columnWidthMode:e}),description:"كيفية تحديد عرض الأعمدة"}),(0,t.jsx)(e4.Separator,{}),(0,t.jsx)(eY,{label:"نمط رأس الجدول",value:a.headerStyle,options:[{value:"gradient",label:"متدرج (Gradient)"},{value:"solid",label:"صلب (Solid)"},{value:"none",label:"بدون (None)"}],onChange:e=>s({headerStyle:e}),description:"نمط خلفية رؤوس الأعمدة"}),(0,t.jsx)(e4.Separator,{}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"space-y-0.5",children:[(0,t.jsx)(i.Label,{className:"text-sm font-medium",children:"تلوين الصفوف المتبادل"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"تفعيل تلوين الصفوف بالتبادل (Zebra Striping)"})]}),(0,t.jsx)(to,{checked:a.zebraStriping,onCheckedChange:e=>s({zebraStriping:e})})]})]})]})}to.displayName=ta.displayName;var tc=e.i(8537),tx=e.i(89836),tm=e.i(23676),th=e.i(97976),tp=e.i(73712),tg=e.i(36270);let tu=(0,e.i(80503).cva)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),tf=s.forwardRef(({className:e,variant:s,...a},l)=>(0,t.jsx)("div",{ref:l,role:"alert",className:(0,eW.cn)(tu({variant:s}),e),...a}));tf.displayName="Alert";let tb=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("h5",{ref:a,className:(0,eW.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));tb.displayName="AlertTitle";let tj=s.forwardRef(({className:e,...s},a)=>(0,t.jsx)("div",{ref:a,className:(0,eW.cn)("text-sm [&_p]:leading-relaxed",e),...s}));function tv(){let{state:e,loadTemplate:n,saveTemplate:o,deleteTemplate:d,updateSettings:c}=X(),[x,m]=(0,s.useState)(!1),[h,g]=(0,s.useState)(""),[u,f]=(0,s.useState)(""),[b,j]=(0,s.useState)(null),[v,y]=(0,s.useState)([]),N=e=>{n(e)};return(0,t.jsxs)(e0.Card,{children:[(0,t.jsxs)(e0.CardHeader,{children:[(0,t.jsx)(e0.CardTitle,{className:"text-lg",children:"إدارة القوالب"}),(0,t.jsx)(e0.CardDescription,{children:"حفظ وتحميل قوالب الإعدادات المخصصة"})]}),(0,t.jsxs)(e0.CardContent,{className:"space-y-6",children:[v.length>0&&(0,t.jsxs)(tf,{children:[(0,t.jsx)(tp.AlertCircle,{className:"h-4 w-4"}),(0,t.jsx)(tb,{children:"تحذيرات الاستيراد"}),(0,t.jsx)(tj,{children:(0,t.jsx)("ul",{className:"list-disc list-inside space-y-1 text-xs mt-2",children:v.map((e,s)=>(0,t.jsx)("li",{children:e},s))})})]}),(0,t.jsxs)(a.Dialog,{open:x,onOpenChange:m,children:[(0,t.jsx)(a.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(l.Button,{className:"w-full",variant:"default",children:[(0,t.jsx)(tm.Save,{className:"w-4 h-4 mr-2"}),"حفظ الإعدادات الحالية كقالب"]})}),(0,t.jsxs)(a.DialogContent,{children:[(0,t.jsxs)(a.DialogHeader,{children:[(0,t.jsx)(a.DialogTitle,{children:"حفظ قالب جديد"}),(0,t.jsx)(a.DialogDescription,{children:"احفظ الإعدادات الحالية كقالب لاستخدامه لاحقاً"})]}),(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"template-name",children:"اسم القالب *"}),(0,t.jsx)(r.Input,{id:"template-name",value:h,onChange:e=>g(e.target.value),placeholder:"مثال: قالب الفعاليات الرسمية"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"template-description",children:"الوصف (اختياري)"}),(0,t.jsx)(tc.Textarea,{id:"template-description",value:u,onChange:e=>f(e.target.value),placeholder:"وصف مختصر للقالب...",rows:3})]})]}),(0,t.jsxs)(a.DialogFooter,{children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>m(!1),children:"إلغاء"}),(0,t.jsx)(l.Button,{onClick:()=>{h.trim()&&(o(h.trim(),u.trim()||void 0),g(""),f(""),m(!1))},disabled:!h.trim(),children:"حفظ القالب"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(l.Button,{variant:"outline",className:"flex-1",onClick:()=>{try{let t,s,a=JSON.stringify(e.currentSettings,null,2),l=new Blob([a],{type:"application/json"}),i=URL.createObjectURL(l),r=document.createElement("a");r.href=i,t="current-settings".replace(/[^a-zA-Z0-9\u0600-\u06FF\s-]/g,"").replace(/\s+/g,"-").toLowerCase(),s=new Date().toISOString().split("T")[0],r.download=`pdf-template-${t}-${s}.json`,r.click(),URL.revokeObjectURL(i)}catch(e){console.error("Export error:",e),alert("فشل تصدير القالب")}},children:[(0,t.jsx)(th.Download,{className:"w-4 h-4 mr-2"}),"تصدير"]}),(0,t.jsx)(l.Button,{variant:"outline",className:"flex-1",asChild:!0,children:(0,t.jsxs)("label",{children:[(0,t.jsx)(p.Upload,{className:"w-4 h-4 mr-2"}),"استيراد",(0,t.jsx)("input",{type:"file",accept:".json",onChange:e=>{let t=e.target.files?.[0];if(!t)return;j(null),y([]);let s=new FileReader;s.onload=e=>{try{let s=JSON.parse(e.target?.result),a=function(e){let t=[],s=[];if(!e||"object"!=typeof e)return t.push("البيانات غير صالحة أو فارغة"),{isValid:!1,errors:t,warnings:s};if(e.page&&"object"==typeof e.page?(["landscape","portrait"].includes(e.page.orientation)||t.push("اتجاه الصفحة غير صالح"),["a4","a3","letter","legal","custom"].includes(e.page.size)||t.push("حجم الصفحة غير صالح"),e.page.margins&&"object"==typeof e.page.margins?["top","right","bottom","left"].forEach(s=>{"number"!=typeof e.page.margins[s]&&t.push(`هامش ${s} غير صالح`)}):t.push("هوامش الصفحة مفقودة"),"string"==typeof e.page.backgroundColor&&e.page.backgroundColor.match(/^#[0-9A-Fa-f]{6}$/)||s.push("لون خلفية الصفحة غير صالح، سيتم استخدام القيمة الافتراضية")):t.push("إعدادات الصفحة مفقودة"),e.fonts&&"object"==typeof e.fonts)if(B.map(e=>e.value).includes(e.fonts.family)||s.push("نوع الخط غير صالح، سيتم استخدام Arial"),e.fonts.sizes&&"object"==typeof e.fonts.sizes?["eventTitle","tableTitle","header","content","info","footer"].forEach(t=>{("number"!=typeof e.fonts.sizes[t]||e.fonts.sizes[t]<8||e.fonts.sizes[t]>100)&&s.push(`حجم الخط ${t} غير صالح`)}):t.push("أحجام الخطوط مفقودة"),e.fonts.weights&&"object"==typeof e.fonts.weights){let t=[100,200,300,400,500,600,700,800,900];["eventTitle","tableTitle","header","content"].forEach(a=>{t.includes(e.fonts.weights[a])||s.push(`وزن الخط ${a} غير صالح`)})}else t.push("أوزان الخطوط مفقودة");else t.push("إعدادات الخطوط مفقودة");return e.colors&&"object"==typeof e.colors?["primary","secondary","text","border","eventTitleBg","eventTitleText","tableTitleBg","tableTitleText","headerBg","headerText","alternateRowBg"].forEach(t=>{"string"==typeof e.colors[t]&&e.colors[t].match(/^#[0-9A-Fa-f]{6}$/)||s.push(`اللون ${t} غير صالح`)}):t.push("إعدادات الألوان مفقودة"),e.spacing&&"object"==typeof e.spacing?(("number"!=typeof e.spacing.tableSeparation||e.spacing.tableSeparation<0)&&s.push("مسافة الفصل بين الجداول غير صالحة"),e.spacing.containerPadding&&"object"==typeof e.spacing.containerPadding||s.push("حشو الحاوية مفقود"),e.spacing.cellPadding&&"object"==typeof e.spacing.cellPadding||s.push("حشو الخلايا مفقود"),e.spacing.titleMargins&&"object"==typeof e.spacing.titleMargins||s.push("هوامش العناوين مفقودة")):t.push("إعدادات المسافات مفقودة"),e.table&&"object"==typeof e.table?(e.table.border&&"object"==typeof e.table.border?(("number"!=typeof e.table.border.width||e.table.border.width<0||e.table.border.width>10)&&s.push("عرض حدود الجدول غير صالح"),["solid","dashed","dotted"].includes(e.table.border.style)||s.push("نمط حدود الجدول غير صالح")):s.push("إعدادات حدود الجدول مفقودة"),["auto","fixed","custom"].includes(e.table.columnWidthMode)||s.push("وضع عرض الأعمدة غير صالح"),"boolean"!=typeof e.table.zebraStriping&&s.push("إعداد الصفوف المتناوبة غير صالح")):t.push("إعدادات الجداول مفقودة"),e.advanced&&"object"==typeof e.advanced?["low","medium","high"].includes(e.advanced.quality)||s.push("جودة التصدير غير صالحة"):t.push("الإعدادات المتقدمة مفقودة"),{isValid:0===t.length,errors:t,warnings:s}}(s);if(!a.isValid){j(`فشل التحقق من القالب:
${a.errors.join("\n")}`),alert(`فشل استيراد القالب:

${a.errors.join("\n")}`);return}a.warnings.length>0&&(y(a.warnings),console.warn("Template import warnings:",a.warnings));let l=function(e){let t={...e};if(t.colors&&Object.keys(t.colors).forEach(e=>{"string"!=typeof t.colors[e]||t.colors[e].startsWith("#")||(t.colors[e]="#"+t.colors[e])}),t.fonts?.weights){let e=[100,200,300,400,500,600,700,800,900];Object.keys(t.fonts.weights).forEach(s=>{let a=t.fonts.weights[s];e.includes(a)||(t.fonts.weights[s]=e.reduce((e,t)=>Math.abs(t-a)<Math.abs(e-a)?t:e))})}return t.page?.size&&(t.page.size=t.page.size.toLowerCase()),t.page?.orientation&&(t.page.orientation=t.page.orientation.toLowerCase()),t}(s);c(l);let i=`مستورد - ${t.name.replace(".json","")}`;o(i,"قالب مستورد من ملف");let r=a.warnings.length>0?`

تحذيرات: ${a.warnings.length}`:"";alert(`تم استيراد القالب بنجاح!${r}`)}catch(e){console.error("Failed to import template:",e),j("فشل قراءة الملف. تأكد من أنه ملف JSON صالح."),alert("فشل استيراد القالب. تأكد من صحة الملف.")}},s.readAsText(t),e.target.value=""},className:"hidden"})]})})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"القوالب المتاحة"}),(0,t.jsx)("div",{className:"space-y-2",children:e.templates.map(s=>(0,t.jsxs)("div",{className:`
                  flex flex-col gap-3 p-3 rounded-lg border cursor-pointer
                  ${e.selectedTemplateId===s.id?"border-primary bg-primary/5":"border-border hover:border-primary/50 hover:bg-primary/5"}
                  transition-all duration-200
                `,onClick:()=>N(s.id),children:[(0,t.jsxs)("div",{className:"flex-1 pointer-events-none",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsx)("h5",{className:"text-sm font-medium",children:s.name}),s.isPreset&&(0,t.jsx)(tg.Badge,{variant:"secondary",className:"text-xs",children:"مدمج"})]}),s.description&&(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1 leading-relaxed",children:s.description})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 pointer-events-auto",children:[(0,t.jsx)(l.Button,{size:"sm",variant:e.selectedTemplateId===s.id?"default":"outline",onClick:e=>{e.stopPropagation(),N(s.id)},className:"flex-1",children:e.selectedTemplateId===s.id?"محمّل":"تحميل"}),!s.isPreset&&(0,t.jsxs)(tx.AlertDialog,{children:[(0,t.jsx)(tx.AlertDialogTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{size:"sm",variant:"ghost",children:(0,t.jsx)(I.Trash2,{className:"w-4 h-4"})})}),(0,t.jsxs)(tx.AlertDialogContent,{children:[(0,t.jsxs)(tx.AlertDialogHeader,{children:[(0,t.jsx)(tx.AlertDialogTitle,{children:"حذف القالب"}),(0,t.jsxs)(tx.AlertDialogDescription,{children:['هل أنت متأكد من حذف القالب "',s.name,'"؟ لا يمكن التراجع عن هذا الإجراء.']})]}),(0,t.jsxs)(tx.AlertDialogFooter,{children:[(0,t.jsx)(tx.AlertDialogCancel,{children:"إلغاء"}),(0,t.jsx)(tx.AlertDialogAction,{onClick:()=>{d(s.id)},className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"حذف"})]})]})]})]})]},s.id))})]})]})]})}tj.displayName="AlertDescription";var ty=e.i(32740),tN=e.i(23881),tw=e.i(62902),tC=e.i(76588),tT=e.i(38810),tS=e.i(91060);function tk(){let{state:e,updateSettings:s}=X(),{customTexts:a}=e.currentSettings;return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)(e0.Card,{children:[(0,t.jsxs)(e0.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ty.FileText,{className:"h-5 w-5 text-blue-500"}),(0,t.jsx)(e0.CardTitle,{children:"نص المقدمة (Header)"})]}),(0,t.jsx)(to,{checked:a.header.enabled,onCheckedChange:e=>s({customTexts:{...a,header:{...a.header,enabled:e}}})})]}),(0,t.jsx)(e0.CardDescription,{children:"نص يظهر في بداية PDF قبل الجداول - مناسب للمقدمة أو التعريف"})]}),a.header.enabled&&(0,t.jsxs)(e0.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"النص"}),(0,t.jsx)(tc.Textarea,{value:a.header.text,onChange:e=>s({customTexts:{...a,header:{...a.header,text:e.target.value}}}),placeholder:"اكتب نص المقدمة هنا...",rows:4,className:"resize-none"})]}),(0,t.jsx)(e4.Separator,{}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.Label,{className:"flex items-center gap-2",children:[(0,t.jsx)(tT.Type,{className:"h-4 w-4"}),"حجم الخط"]}),(0,t.jsx)(r.Input,{type:"number",min:12,max:60,value:a.header.fontSize,onChange:e=>s({customTexts:{...a,header:{...a.header,fontSize:Number(e.target.value)}}})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.Label,{className:"flex items-center gap-2",children:[(0,t.jsx)(tS.Palette,{className:"h-4 w-4"}),"اللون"]}),(0,t.jsx)(r.Input,{type:"color",value:a.header.color,onChange:e=>s({customTexts:{...a,header:{...a.header,color:e.target.value}}})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"المحاذاة"}),(0,t.jsxs)(d.Select,{value:a.header.alignment,onValueChange:e=>s({customTexts:{...a,header:{...a.header,alignment:e}}}),children:[(0,t.jsx)(d.SelectTrigger,{children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"right",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tC.AlignRight,{className:"h-4 w-4"}),"يمين"]})}),(0,t.jsx)(d.SelectItem,{value:"center",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tw.AlignCenter,{className:"h-4 w-4"}),"وسط"]})}),(0,t.jsx)(d.SelectItem,{value:"left",children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(tN.AlignLeft,{className:"h-4 w-4"}),"يسار"]})})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"المسافة السفلية"}),(0,t.jsx)(r.Input,{type:"number",min:0,max:100,value:a.header.marginBottom,onChange:e=>s({customTexts:{...a,header:{...a.header,marginBottom:Number(e.target.value)}}})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(to,{checked:a.header.bold,onCheckedChange:e=>s({customTexts:{...a,header:{...a.header,bold:e}}})}),(0,t.jsx)(i.Label,{children:"عريض (Bold)"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(to,{checked:a.header.italic,onCheckedChange:e=>s({customTexts:{...a,header:{...a.header,italic:e}}})}),(0,t.jsx)(i.Label,{children:"مائل (Italic)"})]})]})]})]}),(0,t.jsxs)(e0.Card,{children:[(0,t.jsxs)(e0.CardHeader,{children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(ty.FileText,{className:"h-5 w-5 text-purple-500"}),(0,t.jsx)(e0.CardTitle,{children:"نص الخاتمة (Footer)"})]}),(0,t.jsx)(to,{checked:a.footer.enabled,onCheckedChange:e=>s({customTexts:{...a,footer:{...a.footer,enabled:e}}})})]}),(0,t.jsx)(e0.CardDescription,{children:"نص يظهر في نهاية PDF بعد الجداول - مناسب للخاتمة أو الملاحظات"})]}),a.footer.enabled&&(0,t.jsxs)(e0.CardContent,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{children:"النص"}),(0,t.jsx)(tc.Textarea,{value:a.footer.text,onChange:e=>s({customTexts:{...a,footer:{...a.footer,text:e.target.value}}}),placeholder:"اكتب نص الخاتمة هنا...",rows:4,className:"resize-none"})]}),(0,t.jsx)(e4.Separator,{}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.Label,{className:"flex items-center gap-2",children:[(0,t.jsx)(tT.Type,{className:"h-4 w-4"}),"حجم الخط"]}),(0,t.jsx)(r.Input,{type:"number",min:12,max:60,value:a.footer.fontSize,onChange:e=>s({customTexts:{...a,footer:{...a.footer,fontSize:Number(e.target.value)}}})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(i.Label,{className:"flex items-center gap-2",children:[(0,t.jsx)(tS.Palette,{className:"h-4 w-4"}),"اللون"]}),(0,t.jsx)(r.Input,{type:"color",value:a.footer.color,onChange:e=>s({customTexts:{...a,footer:{...a.footer,color:e.target.value}}})})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(to,{checked:a.footer.bold,onCheckedChange:e=>s({customTexts:{...a,footer:{...a.footer,bold:e}}})}),(0,t.jsx)(i.Label,{children:"عريض (Bold)"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(to,{checked:a.footer.italic,onCheckedChange:e=>s({customTexts:{...a,footer:{...a.footer,italic:e}}})}),(0,t.jsx)(i.Label,{children:"مائل (Italic)"})]})]})]})]})]})}var tD=e.i(39392),tz=e.i(75315);function t$(){let{state:e,addCustomTextOverlay:n,updateCustomTextOverlay:o,deleteCustomTextOverlay:c}=X(),[x,m]=(0,s.useState)(!1),[h,p]=(0,s.useState)(null),[g,u]=(0,s.useState)({content:"",position:{x:20,y:20},fontSize:16,color:"#000000",fontWeight:400,textAlign:"right",visible:!0}),b=e.currentSettings.customTextOverlays||[],j=()=>{h&&(o(h.id,g),p(null),v())},v=()=>{u({content:"",position:{x:20,y:20},fontSize:16,color:"#000000",fontWeight:400,textAlign:"right",visible:!0})},y=()=>(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"content",children:"محتوى النص"}),(0,t.jsx)(tc.Textarea,{id:"content",value:g.content,onChange:e=>u({...g,content:e.target.value}),placeholder:"أدخل النص المخصص...",rows:3,className:"resize-none"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"posX",children:"الموضع X (mm)"}),(0,t.jsx)(r.Input,{id:"posX",type:"number",value:g.position.x,onChange:e=>u({...g,position:{...g.position,x:Number(e.target.value)}}),min:0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"posY",children:"الموضع Y (mm)"}),(0,t.jsx)(r.Input,{id:"posY",type:"number",value:g.position.y,onChange:e=>u({...g,position:{...g.position,y:Number(e.target.value)}}),min:0})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"fontSize",children:"حجم الخط (px)"}),(0,t.jsx)(r.Input,{id:"fontSize",type:"number",value:g.fontSize,onChange:e=>u({...g,fontSize:Number(e.target.value)}),min:8,max:72})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"color",children:"اللون"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(r.Input,{id:"color",type:"color",value:g.color,onChange:e=>u({...g,color:e.target.value}),className:"w-16 h-10 p-1"}),(0,t.jsx)(r.Input,{type:"text",value:g.color,onChange:e=>u({...g,color:e.target.value}),className:"flex-1"})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"fontWeight",children:"وزن الخط"}),(0,t.jsxs)(d.Select,{value:g.fontWeight.toString(),onValueChange:e=>u({...g,fontWeight:Number(e)}),children:[(0,t.jsx)(d.SelectTrigger,{id:"fontWeight",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"400",children:"عادي (400)"}),(0,t.jsx)(d.SelectItem,{value:"600",children:"متوسط (600)"}),(0,t.jsx)(d.SelectItem,{value:"700",children:"عريض (700)"}),(0,t.jsx)(d.SelectItem,{value:"800",children:"عريض جداً (800)"}),(0,t.jsx)(d.SelectItem,{value:"900",children:"أعرض (900)"})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"textAlign",children:"المحاذاة"}),(0,t.jsxs)(d.Select,{value:g.textAlign,onValueChange:e=>u({...g,textAlign:e}),children:[(0,t.jsx)(d.SelectTrigger,{id:"textAlign",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"right",children:"يمين"}),(0,t.jsx)(d.SelectItem,{value:"center",children:"وسط"}),(0,t.jsx)(d.SelectItem,{value:"left",children:"يسار"})]})]})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"rotation",children:"الدوران (درجات) - اختياري"}),(0,t.jsx)(r.Input,{id:"rotation",type:"number",value:g.rotation||0,onChange:e=>u({...g,rotation:Number(e.target.value)}),min:-180,max:180})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(i.Label,{htmlFor:"opacity",children:"الشفافية (0-1) - اختياري"}),(0,t.jsx)(r.Input,{id:"opacity",type:"number",step:"0.1",value:g.opacity||1,onChange:e=>u({...g,opacity:Number(e.target.value)}),min:0,max:1})]})]});return(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"text-sm font-medium",children:"النصوص المخصصة"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"أضف نصوص في أي مكان على PDF"})]}),(0,t.jsxs)(a.Dialog,{open:x,onOpenChange:m,children:[(0,t.jsx)(a.DialogTrigger,{asChild:!0,children:(0,t.jsxs)(l.Button,{size:"sm",onClick:()=>{v(),m(!0)},children:[(0,t.jsx)(f.Plus,{className:"w-4 h-4 mr-2"}),"إضافة نص"]})}),(0,t.jsxs)(a.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(a.DialogHeader,{children:[(0,t.jsx)(a.DialogTitle,{children:"إضافة نص مخصص"}),(0,t.jsx)(a.DialogDescription,{children:"أضف نص مخصص في أي مكان على PDF"})]}),(0,t.jsx)(y,{}),(0,t.jsxs)(a.DialogFooter,{children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>m(!1),children:"إلغاء"}),(0,t.jsx)(l.Button,{onClick:()=>{n(g),m(!1),v()},disabled:!g.content.trim(),children:"إضافة"})]})]})]})]}),0===b.length?(0,t.jsx)("div",{className:"text-center py-8 text-muted-foreground text-sm border rounded-lg border-dashed",children:'لا توجد نصوص مخصصة. اضغط "إضافة نص" للبدء.'}):(0,t.jsx)("div",{className:"space-y-2",children:b.map(e=>(0,t.jsxs)("div",{className:`
                flex items-center justify-between p-3 rounded-lg border
                ${e.visible?"border-border bg-background":"border-border bg-muted/50 opacity-60"}
                transition-all
              `,children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsxs)("p",{className:"text-sm font-medium truncate",children:[e.content.substring(0,50),e.content.length>50&&"..."]}),!e.visible&&(0,t.jsx)(tg.Badge,{variant:"secondary",className:"text-xs",children:"مخفي"})]}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground mt-1",children:["الموضع: (",e.position.x,", ",e.position.y,") • الحجم: ",e.fontSize,"px • المحاذاة: ","right"===e.textAlign?"يمين":"center"===e.textAlign?"وسط":"يسار"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:[(0,t.jsx)(l.Button,{size:"sm",variant:"ghost",onClick:()=>{o(e.id,{visible:!e.visible})},children:e.visible?(0,t.jsx)(tD.Eye,{className:"w-4 h-4"}):(0,t.jsx)(tz.EyeOff,{className:"w-4 h-4"})}),(0,t.jsxs)(a.Dialog,{open:h?.id===e.id,onOpenChange:e=>!e&&p(null),children:[(0,t.jsx)(a.DialogTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{size:"sm",variant:"ghost",onClick:()=>{p(e),u({content:e.content,position:e.position,fontSize:e.fontSize,color:e.color,fontWeight:e.fontWeight,textAlign:e.textAlign,rotation:e.rotation,opacity:e.opacity,backgroundColor:e.backgroundColor,fontFamily:e.fontFamily,visible:e.visible,zIndex:e.zIndex})},children:(0,t.jsx)(E.Edit,{className:"w-4 h-4"})})}),(0,t.jsxs)(a.DialogContent,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(a.DialogHeader,{children:[(0,t.jsx)(a.DialogTitle,{children:"تعديل النص المخصص"}),(0,t.jsx)(a.DialogDescription,{children:"عدّل خصائص النص المخصص"})]}),(0,t.jsx)(y,{}),(0,t.jsxs)(a.DialogFooter,{children:[(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>p(null),children:"إلغاء"}),(0,t.jsx)(l.Button,{onClick:j,disabled:!g.content.trim(),children:"حفظ التغييرات"})]})]})]}),(0,t.jsxs)(tx.AlertDialog,{children:[(0,t.jsx)(tx.AlertDialogTrigger,{asChild:!0,children:(0,t.jsx)(l.Button,{size:"sm",variant:"ghost",children:(0,t.jsx)(I.Trash2,{className:"w-4 h-4 text-destructive"})})}),(0,t.jsxs)(tx.AlertDialogContent,{children:[(0,t.jsxs)(tx.AlertDialogHeader,{children:[(0,t.jsx)(tx.AlertDialogTitle,{children:"حذف النص المخصص"}),(0,t.jsx)(tx.AlertDialogDescription,{children:"هل أنت متأكد من حذف هذا النص؟ لا يمكن التراجع عن هذا الإجراء."})]}),(0,t.jsxs)(tx.AlertDialogFooter,{children:[(0,t.jsx)(tx.AlertDialogCancel,{children:"إلغاء"}),(0,t.jsx)(tx.AlertDialogAction,{onClick:()=>c(e.id),children:"حذف"})]})]})]})]})]},e.id))})]})}let tP=(0,b.default)("space",[["path",{d:"M22 17v1c0 .5-.5 1-1 1H3c-.5 0-1-.5-1-1v-1",key:"lt2kga"}]]);var tE=e.i(26566),tI=e.i(92711);let tA=(0,b.default)("text-cursor",[["path",{d:"M17 22h-1a4 4 0 0 1-4-4V6a4 4 0 0 1 4-4h1",key:"uvaxm9"}],["path",{d:"M7 22h1a4 4 0 0 0 4-4v-1",key:"11xy8d"}],["path",{d:"M7 2h1a4 4 0 0 1 4 4v1",key:"1uw06m"}]]);function tL(){return(0,t.jsx)("div",{className:"h-full flex flex-col",children:(0,t.jsx)(eJ.ScrollArea,{className:"flex-1",children:(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"إعدادات PDF"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"خصص جميع جوانب PDF المُصدّر حسب احتياجاتك"})]}),(0,t.jsxs)(eT,{type:"multiple",defaultValue:["templates","page","fonts","colors"],className:"space-y-4",children:[(0,t.jsxs)(eq,{value:"templates",className:"border rounded-lg",children:[(0,t.jsx)(eX,{className:"px-4 hover:no-underline",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,t.jsx)(tm.Save,{className:"w-5 h-5 text-primary"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"القوالب"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"حفظ وتحميل القوالب المخصصة"})]})]})}),(0,t.jsx)(eZ,{className:"px-4 pb-4",children:(0,t.jsx)(tv,{})})]}),(0,t.jsxs)(eq,{value:"page",className:"border rounded-lg",children:[(0,t.jsx)(eX,{className:"px-4 hover:no-underline",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-blue-500/10",children:(0,t.jsx)(ty.FileText,{className:"w-5 h-5 text-blue-500"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"الصفحة"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"الحجم، الاتجاه، والهوامش"})]})]})}),(0,t.jsx)(eZ,{className:"px-4 pb-4",children:(0,t.jsx)(e1,{})})]}),(0,t.jsxs)(eq,{value:"fonts",className:"border rounded-lg",children:[(0,t.jsx)(eX,{className:"px-4 hover:no-underline",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-purple-500/10",children:(0,t.jsx)(tT.Type,{className:"w-5 h-5 text-purple-500"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"الخطوط"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"النوع، الأحجام، والأوزان"})]})]})}),(0,t.jsx)(eZ,{className:"px-4 pb-4",children:(0,t.jsx)(e2,{})})]}),(0,t.jsxs)(eq,{value:"colors",className:"border rounded-lg",children:[(0,t.jsx)(eX,{className:"px-4 hover:no-underline",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-pink-500/10",children:(0,t.jsx)(tS.Palette,{className:"w-5 h-5 text-pink-500"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"الألوان"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"نظام الألوان الكامل"})]})]})}),(0,t.jsx)(eZ,{className:"px-4 pb-4",children:(0,t.jsx)(e5,{})})]}),(0,t.jsxs)(eq,{value:"spacing",className:"border rounded-lg",children:[(0,t.jsx)(eX,{className:"px-4 hover:no-underline",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-green-500/10",children:(0,t.jsx)(tP,{className:"w-5 h-5 text-green-500"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"المسافات"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"الحشو والهوامش"})]})]})}),(0,t.jsx)(eZ,{className:"px-4 pb-4",children:(0,t.jsx)(e3,{})})]}),(0,t.jsxs)(eq,{value:"table",className:"border rounded-lg",children:[(0,t.jsx)(eX,{className:"px-4 hover:no-underline",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-orange-500/10",children:(0,t.jsx)(tE.Table,{className:"w-5 h-5 text-orange-500"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"الجداول"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"الحدود والتنسيق"})]})]})}),(0,t.jsx)(eZ,{className:"px-4 pb-4",children:(0,t.jsx)(td,{})})]}),(0,t.jsxs)(eq,{value:"customTexts",className:"border rounded-lg",children:[(0,t.jsx)(eX,{className:"px-4 hover:no-underline",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-pink-500/10",children:(0,t.jsx)(tI.MessageSquare,{className:"w-5 h-5 text-pink-500"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"نصوص مخصصة"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"إضافة مقدمة وخاتمة وفواصل"})]})]})}),(0,t.jsx)(eZ,{className:"px-4 pb-4",children:(0,t.jsx)(tk,{})})]}),(0,t.jsxs)(eq,{value:"customTextOverlays",className:"border rounded-lg",children:[(0,t.jsx)(eX,{className:"px-4 hover:no-underline",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-purple-500/10",children:(0,t.jsx)(tA,{className:"w-5 h-5 text-purple-500"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h3",{className:"font-semibold",children:"نصوص حرة"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"إضافة نصوص في أي مكان على PDF"})]})]})}),(0,t.jsx)(eZ,{className:"px-4 pb-4",children:(0,t.jsx)(t$,{})})]})]})]})})})}var tF=e.i(21e3);e.i(38385);class t_{metrics=new Map;enabled=!1;start(e){this.enabled&&this.metrics.set(e,performance.now())}end(e){if(!this.enabled)return 0;let t=this.metrics.get(e);if(!t)return console.warn(`Performance: No start time found for "${e}"`),0;let s=performance.now()-t;return this.metrics.delete(e),s>100?console.warn(`⚠️ Performance: "${e}" took ${s.toFixed(2)}ms`):console.log(`✓ Performance: "${e}" took ${s.toFixed(2)}ms`),s}measureMemory(){if(this.enabled&&performance.memory){let e=performance.memory.usedJSHeapSize,t=performance.memory.totalJSHeapSize;return console.log(`Memory: ${(e/1048576).toFixed(2)}MB / ${(t/1048576).toFixed(2)}MB (${(e/t*100).toFixed(1)}%)`),e}}clear(){this.metrics.clear()}setEnabled(e){this.enabled=e}}let tB=new t_;var tR=s,tM=e.i(52019);class tO extends tR.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){console.error("Editor Error:",e,t),this.setState({error:e,errorInfo:t})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?(0,t.jsx)("div",{className:"flex flex-col items-center justify-center h-full p-8 bg-gray-50",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,t.jsx)(tp.AlertCircle,{className:"w-6 h-6 text-red-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"حدث خطأ في المحرر"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"عذراً، حدث خطأ غير متوقع"})]})]}),this.state.error&&(0,t.jsx)("div",{className:"bg-gray-100 rounded p-3",children:(0,t.jsx)("p",{className:"text-xs font-mono text-gray-700",children:this.state.error.toString()})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(l.Button,{onClick:this.handleReset,className:"flex-1",children:[(0,t.jsx)(tM.RefreshCw,{className:"w-4 h-4 mr-2"}),"إعادة المحاولة"]}),(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>window.location.reload(),className:"flex-1",children:"تحديث الصفحة"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"إذا استمرت المشكلة، يرجى الاتصال بالدعم الفني"})]})}):this.props.children}}var tH=e.i(43694),tU=e.i(51333),tV=e.i(57851),tG=e.i(81409);let tW=(0,tF.default)(()=>e.A(95911),{loadableGenerated:{modules:[42993]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"flex items-center justify-center h-full",children:"Loading editor..."})});function tq({sampleData:e}){let{state:a,setPreviewZoom:i,setPreviewMode:r,updateSettings:n,updateCustomTextOverlay:o}=X(),{previewUrl:d,isLoading:c,error:x,regeneratePreview:h}=function({settings:e,sampleData:t,debounceDelay:a=500}){let[l,i]=(0,s.useState)(null),[r,n]=(0,s.useState)(!1),[o,d]=(0,s.useState)(null),c=(0,s.useRef)(null),x=(0,s.useRef)(null),m=(0,s.useCallback)(async()=>{try{tB.start("preview-generation"),n(!0),d(null);let s=document.createElement("div");s.style.position="fixed",s.style.left="-9999px",s.style.top="0",s.style.width="3500px",s.style.padding=`${e.spacing.containerPadding.vertical}px ${e.spacing.containerPadding.horizontal}px`,s.style.fontFamily=e.fonts.family,s.style.direction="rtl",s.style.backgroundColor=e.page.backgroundColor,s.style.zIndex="-9999",s.style.unicodeBidi="embed",s.style.textRendering="optimizeLegibility",s.style.webkitFontSmoothing="antialiased",s.style.mozOsxFontSmoothing="grayscale";let a="";if(t?.eventTitle&&(a+=`
          <div style="
            position: relative;
            text-align: center;
            margin-bottom: ${e.spacing.titleMargins.eventTitle}px;
            padding: 48px 60px;
            background: ${e.colors.eventTitleBg};
            border-radius: 16px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            overflow: hidden;
          ">
            <div style="
              position: absolute;
              top: 0;
              right: 0;
              width: 100%;
              height: 6px;
              background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #ec4899 100%);
            "></div>
            <h1 style="
              font-size: ${e.fonts.sizes.eventTitle}px;
              font-weight: ${e.fonts.weights.eventTitle};
              color: ${e.colors.eventTitleText};
              margin: 0;
              font-family: ${e.fonts.family};
              direction: rtl;
              unicode-bidi: bidi-override;
              line-height: 1.5;
              letter-spacing: 0;
              text-rendering: optimizeLegibility;
              -webkit-font-smoothing: antialiased;
              -moz-osx-font-smoothing: grayscale;
              white-space: pre-wrap;
              word-break: keep-all;
            ">${t.eventTitle}</h1>
          </div>
        `),e.customTexts.header.enabled&&e.customTexts.header.text){let t="right"===e.customTexts.header.alignment?"right":"left"===e.customTexts.header.alignment?"left":"center";a+=`
          <div style="
            text-align: ${t};
            margin-bottom: ${e.customTexts.header.marginBottom}px;
            padding: 20px 30px;
            background-color: rgba(248, 250, 252, 0.5);
            border-radius: 8px;
          ">
            <p style="
              font-size: ${e.customTexts.header.fontSize}px;
              color: ${e.customTexts.header.color};
              font-weight: ${e.customTexts.header.bold?"700":"400"};
              font-style: ${e.customTexts.header.italic?"italic":"normal"};
              margin: 0;
              font-family: ${e.fonts.family};
              direction: rtl;
              unicode-bidi: bidi-override;
              line-height: 1.8;
              white-space: pre-wrap;
            ">${e.customTexts.header.text}</p>
          </div>
        `}if(t?.tables&&t.tables.length>0){let s=t.tables[0];a+=`
          <div style="
            text-align: right;
            margin-bottom: ${e.spacing.titleMargins.tableTitle}px;
            margin-top: 60px;
            padding: 24px 36px;
            background: ${e.colors.tableTitleBg};
            border-right: 5px solid ${e.colors.primary};
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
          ">
            <h2 style="
              font-size: ${e.fonts.sizes.tableTitle}px;
              font-weight: ${e.fonts.weights.tableTitle};
              color: ${e.colors.tableTitleText};
              margin: 0;
              font-family: ${e.fonts.family};
              direction: rtl;
              unicode-bidi: bidi-override;
              line-height: 1.5;
              letter-spacing: 0;
              text-rendering: optimizeLegibility;
              -webkit-font-smoothing: antialiased;
              -moz-osx-font-smoothing: grayscale;
              white-space: pre-wrap;
              word-break: keep-all;
            ">${s.title}</h2>
          </div>
        
          <table style="
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);
            direction: rtl;
          ">
            <thead>
              <tr style="
                background: ${e.colors.headerBg};
              ">
                ${s.headers.map(t=>`
                  <th style="
                    padding: ${e.spacing.cellPadding.vertical+4}px ${e.spacing.cellPadding.horizontal}px;
                    border: none;
                    border-bottom: 2px solid rgba(255, 255, 255, 0.2);
                    text-align: center;
                    color: ${e.colors.headerText};
                    font-weight: ${e.fonts.weights.header};
                    font-size: ${e.fonts.sizes.header}px;
                    direction: rtl;
                    unicode-bidi: bidi-override;
                    letter-spacing: 0;
                    text-rendering: optimizeLegibility;
                    -webkit-font-smoothing: antialiased;
                    white-space: nowrap;
                  ">${t}</th>
                `).join("")}
              </tr>
            </thead>
            <tbody>
              ${s.rows.map((t,a)=>`
                <tr style="
                  background-color: ${e.table.zebraStriping&&a%2==1?e.colors.alternateRowBg:"#ffffff"};
                  transition: background-color 0.2s;
                ">
                  ${s.headers.map(s=>{let a=t[s]||"-",l=a.startsWith?.("data:image")?`<img src="${a}" style="max-width: 180px; max-height: 70px; object-fit: contain; display: block; margin: 0 auto;" alt="توقيع" />`:a;return`
                    <td style="
                      padding: ${e.spacing.cellPadding.vertical}px ${e.spacing.cellPadding.horizontal}px;
                      border: none;
                      border-bottom: 1px solid #e2e8f0;
                      text-align: center;
                      color: ${e.colors.text};
                      font-weight: ${e.fonts.weights.content};
                      font-size: ${e.fonts.sizes.content}px;
                      direction: rtl;
                      unicode-bidi: bidi-override;
                      text-rendering: optimizeLegibility;
                      white-space: pre-wrap;
                      line-height: 1.6;
                      vertical-align: middle;
                    ">${l}</td>
                  `}).join("")}
                </tr>
              `).join("")}
            </tbody>
          </table>
        `}if(e.customTexts.footer.enabled&&e.customTexts.footer.text){let t="right"===e.customTexts.footer.alignment?"right":"left"===e.customTexts.footer.alignment?"left":"center";a+=`
          <div style="
            text-align: ${t};
            margin-top: ${e.customTexts.footer.marginTop}px;
            padding: 20px 30px;
            background-color: rgba(248, 250, 252, 0.5);
            border-radius: 8px;
            border-top: 2px solid #e2e8f0;
          ">
            <p style="
              font-size: ${e.customTexts.footer.fontSize}px;
              color: ${e.customTexts.footer.color};
              font-weight: ${e.customTexts.footer.bold?"700":"400"};
              font-style: ${e.customTexts.footer.italic?"italic":"normal"};
              margin: 0;
              font-family: ${e.fonts.family};
              direction: rtl;
              unicode-bidi: bidi-override;
              line-height: 1.8;
              white-space: pre-wrap;
            ">${e.customTexts.footer.text}</p>
          </div>
        `}s.innerHTML=a,document.body.appendChild(s);let l=(e.customTextOverlays||[]).filter(e=>!1!==e.visible);l.length>0&&[...l].sort((e,t)=>(e.zIndex||0)-(t.zIndex||0)).forEach(t=>{let a=document.createElement("div"),l=3.7795*t.position.x,i=3.7795*t.position.y;a.style.position="absolute",a.style.left=`${l}px`,a.style.top=`${i}px`,a.style.fontSize=`${t.fontSize}px`,a.style.color=t.color,a.style.fontWeight=t.fontWeight.toString(),a.style.textAlign=t.textAlign,a.style.fontFamily=t.fontFamily||e.fonts.family,a.style.direction="rtl",a.style.unicodeBidi="embed",a.style.whiteSpace="pre-wrap",a.style.lineHeight="1.6",a.style.zIndex=(t.zIndex||0).toString(),t.rotation&&(a.style.transform=`rotate(${t.rotation}deg)`,a.style.transformOrigin="top right"),void 0!==t.opacity&&(a.style.opacity=t.opacity.toString()),t.backgroundColor&&(a.style.backgroundColor=t.backgroundColor,a.style.padding="8px 12px",a.style.borderRadius="4px"),a.textContent=t.content,s.appendChild(a)}),x.current=s;let r=(await (0,N.default)(s,{scale:2,useCORS:!0,allowTaint:!0,backgroundColor:e.page.backgroundColor,logging:!1,width:3500,windowWidth:3500})).toDataURL("image/png",.8);i(r),s&&s.parentNode===document.body&&document.body.removeChild(s),x.current=null,tB.end("preview-generation"),tB.measureMemory(),n(!1)}catch(e){console.error("Preview generation error:",e),d("فشل إنشاء المعاينة"),n(!1),tB.end("preview-generation"),x.current&&document.body.contains(x.current)&&(document.body.removeChild(x.current),x.current=null)}},[e,t]),h=(0,s.useCallback)(()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{m()},a)},[m,a]),p=(0,s.useCallback)(()=>{m()},[m]),g=(0,s.useCallback)(()=>{i(null),d(null)},[]);return(0,s.useEffect)(()=>(h(),()=>{c.current&&clearTimeout(c.current),x.current&&document.body.contains(x.current)&&document.body.removeChild(x.current)}),[h]),{previewUrl:l,isLoading:r,error:o,regeneratePreview:p,clearPreview:g}}({settings:a.currentSettings,sampleData:e,debounceDelay:800}),[p,g]=(0,s.useState)(!1),u=(0,s.useMemo)(()=>[.5,.75,1,1.25,1.5,2],[]),f=(0,s.useMemo)(()=>u.indexOf(a.previewZoom),[u,a.previewZoom]),b=(0,s.useCallback)(()=>{let e=Math.min(f+1,u.length-1);i(u[e])},[f,u,i]),j=(0,s.useCallback)(()=>{i(u[Math.max(f-1,0)])},[f,u,i]),v=(0,s.useCallback)(()=>{i(1)},[i]),y=(0,s.useCallback)(()=>{g(e=>!e)},[]),w=(0,s.useCallback)(()=>{h()},[h]),C=(0,s.useCallback)(()=>{r("preview"===a.previewMode?"edit":"preview")},[a.previewMode,r]);return((0,s.useCallback)(e=>{let t=a.selectedElement;if(t)switch(t.type){case"header":n({...a.currentSettings,colors:{...a.currentSettings.colors,eventTitleText:e}});break;case"table":n({...a.currentSettings,colors:{...a.currentSettings.colors,headerBg:e}});break;case"customTextOverlay":let s=t.id,l=a.currentSettings.customTextOverlays?.find(e=>e.id===s);l&&o(s,{...l,color:e})}},[a.selectedElement,a.currentSettings,n,o]),"edit"===a.previewMode)?(0,t.jsx)("div",{className:"flex flex-col h-full w-full",children:(0,t.jsx)(tO,{children:(0,t.jsx)(tW,{settings:a.currentSettings,sampleData:e,zoom:a.previewZoom,onBack:()=>r("preview")})})}):(0,t.jsxs)(e0.Card,{className:(0,eW.cn)("flex flex-col h-full",p&&"fixed inset-0 z-50 rounded-none"),children:[(0,t.jsx)(e0.CardHeader,{className:"border-b",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(e0.CardTitle,{className:"text-lg",children:"معاينة PDF"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:"معاينة مباشرة للتغييرات"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(l.Button,{size:"sm",variant:"outline",onClick:j,disabled:0===f||c,children:(0,t.jsx)(tU.ZoomOut,{className:"w-4 h-4"})}),(0,t.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:v,disabled:c,className:"min-w-[80px]",children:[Math.round(100*a.previewZoom),"%"]}),(0,t.jsx)(l.Button,{size:"sm",variant:"outline",onClick:b,disabled:f===u.length-1||c,children:(0,t.jsx)(tH.ZoomIn,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,t.jsx)(l.Button,{size:"sm",variant:"outline",onClick:w,disabled:c,children:(0,t.jsx)(tM.RefreshCw,{className:(0,eW.cn)("w-4 h-4",c&&"animate-spin")})}),(0,t.jsx)(l.Button,{size:"sm",variant:"outline",onClick:y,children:(0,t.jsx)(tV.Maximize2,{className:"w-4 h-4"})}),(0,t.jsx)("div",{className:"w-px h-6 bg-border mx-1"}),(0,t.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:C,disabled:c,className:"gap-2 bg-purple-50 border-purple-200 text-purple-700 hover:bg-purple-100",children:[(0,t.jsx)(tG.Edit3,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"تحرير متقدم"})]})]})]})}),(0,t.jsxs)(e0.CardContent,{className:"flex-1 p-0 relative",children:[(0,t.jsx)(eJ.ScrollArea,{className:"h-full",children:(0,t.jsxs)("div",{className:"p-6",children:[c&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 space-y-4",children:[(0,t.jsx)(m.Loader2,{className:"w-12 h-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"جاري إنشاء المعاينة..."})]}),x&&!c&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 space-y-4",children:[(0,t.jsx)("div",{className:"p-4 rounded-full bg-destructive/10",children:(0,t.jsx)(tp.AlertCircle,{className:"w-12 h-12 text-destructive"})}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-destructive",children:x}),(0,t.jsxs)(l.Button,{size:"sm",variant:"outline",onClick:w,children:[(0,t.jsx)(tM.RefreshCw,{className:"w-4 h-4 mr-2"}),"إعادة المحاولة"]})]})]}),!c&&!x&&d&&(0,t.jsx)("div",{className:"flex justify-center",children:(0,t.jsxs)("div",{className:"relative bg-white shadow-2xl rounded-lg overflow-hidden",style:{transform:`scale(${a.previewZoom})`,transformOrigin:"top center",transition:"transform 0.2s ease-in-out"},children:[(0,t.jsx)("img",{src:d,alt:"PDF Preview",className:"max-w-full h-auto",style:{maxWidth:"100%",height:"auto"}}),(0,t.jsx)("div",{className:"absolute top-4 right-4 bg-black/50 text-white px-3 py-1 rounded text-xs font-medium",children:"معاينة"})]})}),!d&&!c&&!x&&(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20 space-y-4",children:[(0,t.jsx)("div",{className:"p-4 rounded-full bg-muted",children:(0,t.jsx)(ty.FileText,{className:"w-12 h-12 text-muted-foreground"})}),(0,t.jsxs)("div",{className:"text-center space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium",children:"لا توجد معاينة"}),(0,t.jsx)("p",{className:"text-xs text-muted-foreground",children:"قم بتعديل الإعدادات لرؤية المعاينة"})]})]})]})}),c&&d&&(0,t.jsx)("div",{className:"absolute inset-0 bg-background/50 backdrop-blur-sm flex items-center justify-center",children:(0,t.jsxs)("div",{className:"bg-background border rounded-lg p-4 shadow-lg flex items-center gap-3",children:[(0,t.jsx)(m.Loader2,{className:"w-5 h-5 animate-spin text-primary"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"جاري التحديث..."})]})})]}),(0,t.jsx)("div",{className:"border-t px-6 py-3 bg-muted/30",children:(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("span",{children:["الصفحة: ",a.currentSettings.page.size.toUpperCase(),"(","landscape"===a.currentSettings.page.orientation?"أفقي":"عمودي",")"]}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:["الخط: ",a.currentSettings.fonts.family]})]}),a.isDirty&&(0,t.jsx)("span",{className:"text-orange-500 font-medium",children:"• تم التعديل"})]})})]})}var tX=e.i(1123),tZ=e.i(39386);function tJ({onClose:e,eventData:i,onExport:r}){let{state:n,resetToDefault:d}=X(),[c,x]=(0,s.useState)(!1),[m,p]=(0,s.useState)(!1),[g,f]=(0,s.useState)("settings"),b=(()=>{if(0===i.customTables.length||0===i.responses.length)return{eventTitle:i.eventTitle,tables:[{title:"لا توجد بيانات",headers:["#","الاسم"],rows:[{"#":"1",الاسم:"لا توجد بيانات حقيقية"}]}]};let e=i.customTables.map(e=>{let t=i.components.filter(t=>e.componentIds.includes(t.id)&&("question"===t.type||"rating"===t.type||"signature"===t.type));t.sort((t,s)=>e.componentIds.indexOf(t.id)-e.componentIds.indexOf(s.id));let s=[];e.settings.includeSerialNumber&&s.push("#"),s.push("اسم المشارك"),t.forEach(e=>{let t=e.settings?.label||e.settings?.question||"سؤال";s.push(t)});let a=i.responses.slice(0,3).map((s,a)=>{let l={};return e.settings.includeSerialNumber&&(l["#"]=String(a+1)),l["اسم المشارك"]=s.participant?.name||"مشارك مجهول",t.forEach(e=>{let t=e.settings?.label||e.settings?.question||"سؤال",a=s.answers?.find(t=>t.componentId===e.id),i=a?.answer;null!=i?"object"==typeof i?Array.isArray(i)?l[t]=i.join(", "):i.fileName?l[t]=i.fileName:i.signatureData?l[t]=i.signatureData:i.rows?l[t]=`${i.rows.length} صف`:l[t]=JSON.stringify(i):l[t]=String(i):l[t]="-"}),l});return{title:e.title,headers:s,rows:a}});return{eventTitle:i.eventTitle,tables:e}})(),j=async()=>{try{p(!0),r&&await r(n.currentSettings),p(!1),e()}catch(e){console.error("Export error:",e),p(!1)}},y=()=>{(!n.isDirty||confirm("لديك تغييرات غير محفوظة. هل تريد المتابعة؟"))&&e()};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(a.DialogContent,{className:"max-w-[98vw] w-[98vw] h-[98vh] max-h-[98vh] p-0 gap-0 flex flex-col",children:["edit"===n.previewMode&&(0,t.jsx)(tX.Root,{asChild:!0,children:(0,t.jsx)(a.DialogTitle,{children:"محرر PDF المتقدم - وضع التحرير"})}),"edit"!==n.previewMode&&(0,t.jsx)(a.DialogHeader,{className:"px-3 sm:px-6 py-3 sm:py-4 border-b shrink-0",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3",children:[(0,t.jsx)("div",{className:"p-1.5 sm:p-2 rounded-lg bg-primary/10 shrink-0",children:(0,t.jsx)(v.Sparkles,{className:"w-5 h-5 sm:w-6 sm:h-6 text-primary"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)(a.DialogTitle,{className:"text-base sm:text-xl truncate",children:"محرر PDF المتقدم"}),(0,t.jsxs)(a.DialogDescription,{className:"mt-0.5 sm:mt-1 text-xs sm:text-sm line-clamp-1 sm:line-clamp-none",children:[(0,t.jsx)("span",{className:"hidden sm:inline",children:"خصص PDF بالكامل حسب احتياجاتك - تحكم كامل في كل التفاصيل"}),(0,t.jsx)("span",{className:"sm:hidden",children:"خصص PDF حسب احتياجاتك"})]})]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:y,disabled:m,className:"sm:hidden shrink-0 mr-auto",children:(0,t.jsx)(u.X,{className:"w-5 h-5"})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 justify-end",children:[(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:()=>x(!0),disabled:m,className:"flex-1 sm:flex-none",children:[(0,t.jsx)(h.RotateCcw,{className:"w-4 h-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"إعادة تعيين"})]}),(0,t.jsxs)(l.Button,{size:"sm",onClick:j,disabled:m,className:"flex-1 sm:flex-none",children:[(0,t.jsx)(th.Download,{className:"w-4 h-4 sm:mr-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:m?"جاري التصدير...":"تصدير PDF"}),(0,t.jsx)("span",{className:"sm:hidden",children:m?"تصدير...":"تصدير"})]}),(0,t.jsx)(l.Button,{variant:"ghost",size:"icon",onClick:y,disabled:m,className:"hidden sm:flex",children:(0,t.jsx)(u.X,{className:"w-5 h-5"})})]})]})}),"edit"===n.previewMode?(0,t.jsx)("div",{className:"flex-1 overflow-hidden min-h-0",children:(0,t.jsx)(tq,{sampleData:b})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex-1 flex flex-col overflow-hidden min-h-0 lg:hidden",children:(0,t.jsxs)(o.Tabs,{value:g,onValueChange:e=>f(e),className:"flex-1 flex flex-col min-h-0",children:[(0,t.jsxs)(o.TabsList,{className:"grid w-full grid-cols-2 shrink-0 mx-3 mt-2",style:{width:"calc(100% - 24px)"},children:[(0,t.jsxs)(o.TabsTrigger,{value:"settings",className:"gap-2",children:[(0,t.jsx)(tZ.Settings,{className:"w-4 h-4"}),"الإعدادات"]}),(0,t.jsxs)(o.TabsTrigger,{value:"preview",className:"gap-2",children:[(0,t.jsx)(tD.Eye,{className:"w-4 h-4"}),"المعاينة"]})]}),(0,t.jsx)("div",{className:`flex-1 overflow-y-auto min-h-0 ${"settings"===g?"block":"hidden"}`,children:(0,t.jsx)(o.TabsContent,{value:"settings",className:"mt-0 h-full",children:(0,t.jsx)("div",{className:"bg-muted/30",children:(0,t.jsx)(tL,{})})})}),(0,t.jsx)("div",{className:`flex-1 overflow-hidden min-h-0 ${"preview"===g?"block":"hidden"}`,children:(0,t.jsx)(o.TabsContent,{value:"preview",className:"mt-0 h-full",children:(0,t.jsx)(tq,{sampleData:b})})})]})}),(0,t.jsxs)("div",{className:"hidden lg:flex flex-1 overflow-hidden min-h-0",children:[(0,t.jsx)("div",{className:"w-[580px] border-r bg-muted/30 overflow-y-auto shrink-0",children:(0,t.jsx)(tL,{})}),(0,t.jsx)("div",{className:"flex-1 overflow-hidden min-w-0",children:(0,t.jsx)(tq,{sampleData:b})})]})]}),"edit"!==n.previewMode&&(0,t.jsx)("div",{className:"hidden sm:block px-3 sm:px-6 py-2 sm:py-3 border-t bg-muted/30 shrink-0",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-1 sm:gap-0 text-xs text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-foreground",children:"محرر PDF المتقدم v1.0"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"•"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"تحكم كامل في التصميم والتنسيق"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 sm:gap-4",children:[n.selectedTemplateId&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("span",{children:["القالب: ",n.templates.find(e=>e.id===n.selectedTemplateId)?.name]}),(0,t.jsx)("span",{children:"•"})]}),(0,t.jsxs)("span",{children:[n.templates.length," قالب متاح"]})]})]})})]}),(0,t.jsx)(tx.AlertDialog,{open:c,onOpenChange:x,children:(0,t.jsxs)(tx.AlertDialogContent,{children:[(0,t.jsxs)(tx.AlertDialogHeader,{children:[(0,t.jsx)(tx.AlertDialogTitle,{children:"إعادة تعيين الإعدادات"}),(0,t.jsx)(tx.AlertDialogDescription,{children:"هل أنت متأكد من إعادة تعيين جميع الإعدادات إلى القيم الافتراضية؟ سيتم فقدان جميع التغييرات الحالية."})]}),(0,t.jsxs)(tx.AlertDialogFooter,{children:[(0,t.jsx)(tx.AlertDialogCancel,{children:"إلغاء"}),(0,t.jsx)(tx.AlertDialogAction,{onClick:()=>{d(),x(!1)},children:"إعادة تعيين"})]})]})})]})}function tY({open:e,onOpenChange:s,eventData:l,onExport:i}){return(0,t.jsx)(a.Dialog,{open:e,onOpenChange:s,children:(0,t.jsx)(q,{children:(0,t.jsx)(tJ,{onClose:()=>s(!1),eventData:l,onExport:i})})})}function tK({open:e,onOpenChange:b,eventTitle:y,responses:N,components:C,isSingleParticipant:T=!1}){let $=T?{...w,layout:"separate-tables"}:w,[E,I]=(0,s.useState)($),[A,L]=(0,s.useState)(!1),F=(0,s.useRef)(null),B=(0,s.useRef)(null),R=C.filter(e=>"question"===e.type||"rating"===e.type||"signature"===e.type),[M,O]=(0,s.useState)(R.map(e=>e.id)),[H,U]=(0,s.useState)([]),[V,G]=(0,s.useState)(!1),[W,X]=(0,s.useState)(null),[Z,J]=(0,s.useState)(!1),Y=e=>{O(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},K=()=>{X(null),G(!0)},Q=e=>{X(e),G(!0)},ee=e=>{U(t=>t.filter(t=>t.id!==e)),z.toast.success("تم حذف الجدول بنجاح")},et=e=>{let t={...e,id:`table-${Date.now()}`,title:`${e.title} (نسخة)`,order:H.length};U(e=>[...e,t]),z.toast.success("تم نسخ الجدول بنجاح!")},es=e=>{U(t=>{let s=t.findIndex(t=>t.id===e);if(s<=0)return t;let a=[...t];return[a[s-1],a[s]]=[a[s],a[s-1]],a.map((e,t)=>({...e,order:t}))})},ea=e=>{U(t=>{let s=t.findIndex(t=>t.id===e);if(s<0||s>=t.length-1)return t;let a=[...t];return[a[s],a[s+1]]=[a[s+1],a[s]],a.map((e,t)=>({...e,order:t}))})},el=async e=>{if(0===N.length)return void z.toast.error("لا توجد نتائج للتصدير");if("custom-tables"===E.layout){if(0===H.length)return void z.toast.error("يرجى إنشاء جدول واحد على الأقل");if(0===H.filter(e=>e.componentIds.length>0).length)return void z.toast.error("جميع الجداول فارغة. يرجى إضافة مكونات إلى الجداول")}else if(0===M.length)return void z.toast.error("يرجى اختيار مكون واحد على الأقل للتصدير");L(!0);try{let t={...E,selectedComponentIds:M.length===R.length?void 0:M,customTables:H};"custom-tables"===E.layout?await D(y,N,C,t,e):"single-table"===E.layout?await S(y,N,C,t):await k(y,N,C,t),z.toast.success("تم تصدير PDF بنجاح!"),b(!1)}catch(e){console.error("Error exporting PDF:",e),z.toast.error(e instanceof Error?e.message:"حدث خطأ أثناء تصدير PDF")}finally{L(!1)}},ei=async e=>{await el(e)};return(0,t.jsxs)(a.Dialog,{open:e,onOpenChange:b,children:[(0,t.jsxs)(a.DialogContent,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(a.DialogHeader,{children:[(0,t.jsxs)(a.DialogTitle,{className:"text-2xl flex items-center gap-2",children:[(0,t.jsx)(x.FileDown,{className:"w-6 h-6 text-primary"}),"تصدير النتائج إلى PDF"]}),(0,t.jsx)(a.DialogDescription,{children:"قم بتخصيص شكل ومحتوى ملف PDF قبل التصدير"})]}),(0,t.jsxs)(o.Tabs,{defaultValue:"layout",className:"w-full",children:[(0,t.jsxs)(o.TabsList,{className:"flex w-full overflow-x-auto no-scrollbar",children:[(0,t.jsx)(o.TabsTrigger,{value:"layout",className:"flex-shrink-0",children:"التخطيط"}),"custom-tables"===E.layout?(0,t.jsxs)(o.TabsTrigger,{value:"custom-tables",className:"flex-shrink-0",children:[(0,t.jsx)(j,{className:"w-4 h-4 ml-1"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"جداول مخصصة"}),(0,t.jsx)("span",{className:"sm:hidden",children:"جداول"})]}):(0,t.jsx)(o.TabsTrigger,{value:"components",className:"flex-shrink-0",children:"المكونات"}),(0,t.jsx)(o.TabsTrigger,{value:"colors",className:"flex-shrink-0",children:"الألوان"}),(0,t.jsx)(o.TabsTrigger,{value:"logo",className:"flex-shrink-0",children:"الشعار"}),(0,t.jsx)(o.TabsTrigger,{value:"content",className:"flex-shrink-0",children:"المحتوى"}),(0,t.jsx)(o.TabsTrigger,{value:"info",className:"flex-shrink-0",children:"معلومات"})]}),(0,t.jsxs)(o.TabsContent,{value:"layout",className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(i.Label,{className:"text-base font-semibold",children:"تخطيط البيانات"}),T?(0,t.jsx)("div",{className:"p-4 border-2 border-primary bg-primary/5 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-primary flex items-center justify-center mt-0.5",children:(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-primary"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"تخطيط مشارك واحد"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"سيتم تصدير بيانات المشارك في صفحة مخصصة مع جدول تفصيلي لجميع الأسئلة والإجابات."})]})]})}):(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${"single-table"===E.layout?"border-primary bg-primary/5":"border-gray-200 hover:border-primary/50"}`,onClick:()=>I({...E,layout:"single-table"}),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-primary flex items-center justify-center mt-0.5",children:"single-table"===E.layout&&(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-primary"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"جدول واحد لجميع المشاركين"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"جدول كبير يحتوي على جميع المشاركين وإجاباتهم. كل صف يمثل مشاركاً واحداً."})]})]})}),(0,t.jsx)("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${"separate-tables"===E.layout?"border-primary bg-primary/5":"border-gray-200 hover:border-primary/50"}`,onClick:()=>I({...E,layout:"separate-tables"}),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-primary flex items-center justify-center mt-0.5",children:"separate-tables"===E.layout&&(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-primary"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-1",children:"جدول منفصل لكل مشارك"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"كل مشارك له صفحة خاصة مع جدول يعرض أسئلته وإجاباته بشكل تفصيلي."})]})]})}),(0,t.jsx)("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${"custom-tables"===E.layout?"border-primary bg-primary/5":"border-gray-200 hover:border-primary/50"}`,onClick:()=>I({...E,layout:"custom-tables"}),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-primary flex items-center justify-center mt-0.5",children:"custom-tables"===E.layout&&(0,t.jsx)("div",{className:"w-3 h-3 rounded-full bg-primary"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("h4",{className:"font-semibold text-gray-900 mb-1 flex items-center gap-2",children:[(0,t.jsx)(j,{className:"w-4 h-4"}),"جداول متعددة مخصصة",(0,t.jsx)("span",{className:"text-xs bg-gradient-to-r from-purple-500 to-pink-500 text-white px-2 py-0.5 rounded-full",children:"جديد"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"أنشئ عدة جداول مخصصة بمكونات مختلفة لكل جدول. تحكم كامل في التنظيم والتنسيق."})]})]})})]})]}),(0,t.jsxs)("div",{className:"space-y-3 pt-4 border-t",children:[(0,t.jsx)(i.Label,{className:"text-base font-semibold",children:"إعدادات الخط"}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)(i.Label,{htmlFor:"fontSize",className:"text-sm mb-2 block",children:["حجم الخط: ",E.fontSize]}),(0,t.jsx)(c.Slider,{id:"fontSize",min:8,max:18,step:1,value:[E.fontSize],onValueChange:e=>I({...E,fontSize:e[0]}),className:"w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"fontFamily",className:"text-sm mb-2 block",children:"نوع الخط"}),(0,t.jsxs)(d.Select,{value:E.fontFamily,onValueChange:e=>I({...E,fontFamily:e}),children:[(0,t.jsx)(d.SelectTrigger,{id:"fontFamily",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"Arial",children:"Arial"}),(0,t.jsx)(d.SelectItem,{value:"Helvetica",children:"Helvetica"}),(0,t.jsx)(d.SelectItem,{value:"Times",children:"Times New Roman"}),(0,t.jsx)(d.SelectItem,{value:"Courier",children:"Courier"})]})]})]})]})]})]}),(0,t.jsx)(o.TabsContent,{value:"custom-tables",className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"الجداول المخصصة"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"أنشئ جداول متعددة بمكونات مختلفة لتنظيم بياناتك بشكل احترافي"})]}),(0,t.jsxs)(l.Button,{onClick:K,className:"gap-2",children:[(0,t.jsx)(f.Plus,{className:"w-4 h-4"}),"إضافة جدول جديد"]})]}),0===H.length?(0,t.jsx)("div",{className:"border-2 border-dashed rounded-lg p-12 text-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center",children:(0,t.jsx)(j,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"لم يتم إنشاء أي جداول بعد"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"ابدأ بإنشاء جدول جديد لتنظيم بياناتك بالطريقة التي تريدها"}),(0,t.jsxs)(l.Button,{onClick:K,variant:"outline",className:"gap-2",children:[(0,t.jsx)(f.Plus,{className:"w-4 h-4"}),"إنشاء أول جدول"]})]})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:H.sort((e,t)=>e.order-t.order).map((e,s)=>(0,t.jsx)(_,{table:e,index:s,totalTables:H.length,onEdit:Q,onDelete:ee,onDuplicate:et,onMoveUp:es,onMoveDown:ea},e.id))}),(0,t.jsx)("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-semibold text-gray-900",children:["📊 إجمالي الجداول: ",(0,t.jsx)("span",{className:"text-primary",children:H.length})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["إجمالي المكونات المُصدّرة:"," ",(0,t.jsx)("span",{className:"font-medium",children:H.reduce((e,t)=>e+t.componentIds.length,0)})," ","من ",R.length]})]}),(0,t.jsxs)(l.Button,{onClick:K,variant:"outline",size:"sm",className:"gap-2",children:[(0,t.jsx)(f.Plus,{className:"w-4 h-4"}),"إضافة جدول"]})]})}),H.some(e=>0===e.componentIds.length)&&(0,t.jsx)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-amber-800",children:["⚠️ ",(0,t.jsx)("strong",{children:"تحذير:"})," بعض الجداول فارغة. يرجى إضافة مكونات إليها أو حذفها."]})})]})]})}),(0,t.jsx)(o.TabsContent,{value:"components",className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)(i.Label,{className:"text-base font-semibold",children:"اختيار المكونات للتصدير"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(l.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{O(R.map(e=>e.id))},children:"تحديد الكل"}),(0,t.jsx)(l.Button,{type:"button",variant:"outline",size:"sm",onClick:()=>{O([])},children:"إلغاء الكل"})]})]}),(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["اختر الأسئلة والحقول التي تريد تضمينها في ملف PDF (",M.length," من ",R.length," محدد)"]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-4 rounded-lg border-2 border-primary bg-primary/5",children:[(0,t.jsx)(n.Checkbox,{id:"includeSerialNumber",checked:E.includeSerialNumber,onCheckedChange:e=>I({...E,includeSerialNumber:e})}),(0,t.jsxs)(i.Label,{htmlFor:"includeSerialNumber",className:"cursor-pointer flex-1",children:[(0,t.jsx)("div",{className:"font-medium text-primary",children:"إضافة رقم تسلسلي للمشاركين"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:'سيتم إضافة عمود "#" في بداية الجدول يحتوي على أرقام تسلسلية (1، 2، 3...)'})]})]}),(0,t.jsx)("div",{className:"border rounded-lg divide-y max-h-[400px] overflow-y-auto",children:0===R.length?(0,t.jsx)("div",{className:"p-8 text-center text-gray-500",children:(0,t.jsx)("p",{children:"لا توجد مكونات متاحة للتصدير"})}):R.map((e,s)=>{let a=M.includes(e.id),l=e.settings?.label||"سؤال بدون عنوان",i=e.settings?.questionType||e.type;return(0,t.jsx)("div",{className:`p-3 hover:bg-gray-50 transition-colors cursor-pointer ${a?"bg-blue-50":""}`,onClick:()=>Y(e.id),children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(n.Checkbox,{checked:a,onCheckedChange:()=>Y(e.id),onClick:e=>e.stopPropagation()}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("span",{className:"text-xs font-medium text-gray-500 bg-gray-100 px-2 py-0.5 rounded",children:s+1}),(0,t.jsx)("span",{className:"text-xs text-gray-500 bg-blue-100 text-blue-700 px-2 py-0.5 rounded",children:{short_text:"نص قصير",long_text:"نص طويل",email:"بريد إلكتروني",phone:"هاتف",number:"رقم",url:"رابط",single_choice:"اختيار من متعدد",multiple_choice:"اختيار متعدد",yes_no:"نعم/لا",dropdown:"قائمة منسدلة",rating:"تقييم",date:"تاريخ",time:"وقت",linear_scale:"مقياس خطي",signature:"توقيع إلكتروني"}[i]||i})]}),(0,t.jsx)("p",{className:"font-medium text-gray-900 text-sm truncate",title:l,children:l}),e.settings?.description&&(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:e.settings.description})]})]})},e.id)})}),M.length>0&&(0,t.jsx)("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-green-800",children:["✅ ",(0,t.jsxs)("strong",{children:["تم تحديد ",M.length," مكون"]})," للتصدير",E.includeSerialNumber&&" (مع الترقيم التسلسلي)"]})}),0===M.length&&(0,t.jsx)("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-sm text-amber-800",children:["⚠️ ",(0,t.jsx)("strong",{children:"تحذير:"})," لم يتم تحديد أي مكون. يرجى اختيار مكون واحد على الأقل للتصدير."]})})]})}),(0,t.jsx)(o.TabsContent,{value:"colors",className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"headerColor",className:"text-sm mb-2 block",children:"لون العناوين"}),(0,t.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,t.jsx)(r.Input,{id:"headerColor",type:"color",value:E.headerColor,onChange:e=>I({...E,headerColor:e.target.value}),className:"w-20 h-10"}),(0,t.jsx)(r.Input,{type:"text",value:E.headerColor,onChange:e=>I({...E,headerColor:e.target.value}),className:"flex-1"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"textColor",className:"text-sm mb-2 block",children:"لون النصوص"}),(0,t.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,t.jsx)(r.Input,{id:"textColor",type:"color",value:E.textColor,onChange:e=>I({...E,textColor:e.target.value}),className:"w-20 h-10"}),(0,t.jsx)(r.Input,{type:"text",value:E.textColor,onChange:e=>I({...E,textColor:e.target.value}),className:"flex-1"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"backgroundColor",className:"text-sm mb-2 block",children:"لون الخلفية"}),(0,t.jsxs)("div",{className:"flex gap-3 items-center",children:[(0,t.jsx)(r.Input,{id:"backgroundColor",type:"color",value:E.backgroundColor,onChange:e=>I({...E,backgroundColor:e.target.value}),className:"w-20 h-10"}),(0,t.jsx)(r.Input,{type:"text",value:E.backgroundColor,onChange:e=>I({...E,backgroundColor:e.target.value}),className:"flex-1"})]})]}),(0,t.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,t.jsx)(i.Label,{className:"text-sm mb-2 block font-semibold",children:"صورة الخلفية"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mb-3",children:"سيتم استخدام الصورة كخلفية للـ PDF بدلاً من اللون (اختياري)"}),(0,t.jsxs)("div",{className:"flex gap-3 mb-3",children:[(0,t.jsxs)(l.Button,{type:"button",variant:"outline",onClick:()=>B.current?.click(),className:"flex-1",disabled:!!E.backgroundImage,children:[(0,t.jsx)(g.Image,{className:"w-4 h-4 ml-2"}),"رفع صورة خلفية"]}),(0,t.jsx)("input",{ref:B,type:"file",accept:"image/png,image/jpeg,image/jpg",onChange:e=>{let t=e.target.files?.[0];if(!t)return;if(!["image/png","image/jpeg","image/jpg"].includes(t.type))return void z.toast.error("يرجى رفع صورة بصيغة PNG أو JPG فقط");if(t.size>5242880)return void z.toast.error("حجم الصورة يجب أن يكون أقل من 5 ميجابايت");let s=new FileReader;s.onload=()=>{I({...E,backgroundImage:s.result}),z.toast.success("تم رفع صورة الخلفية بنجاح")},s.readAsDataURL(t)},className:"hidden"})]}),E.backgroundImage&&(0,t.jsx)("div",{className:"relative border rounded-lg p-3 bg-gray-50",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-20 h-20 rounded overflow-hidden border",children:(0,t.jsx)("img",{src:E.backgroundImage,alt:"Background Preview",className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"صورة الخلفية"}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"سيتم استخدامها كخلفية للـ PDF"})]}),(0,t.jsxs)(l.Button,{type:"button",variant:"ghost",size:"sm",onClick:()=>{I({...E,backgroundImage:void 0}),B.current&&(B.current.value=""),z.toast.success("تم إزالة صورة الخلفية")},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,t.jsx)(u.X,{className:"w-4 h-4 ml-1"}),"إزالة"]})]})}),(0,t.jsx)("div",{className:"mt-3 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,t.jsxs)("p",{className:"text-xs text-blue-700",children:["💡 ",(0,t.jsx)("strong",{children:"نصيحة:"})," استخدم صورة بجودة عالية وألوان فاتحة لضمان وضوح النصوص. الحد الأقصى: 5 ميجابايت."]})})]})]})}),(0,t.jsx)(o.TabsContent,{value:"logo",className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{className:"text-sm mb-2 block",children:"رفع الشعار"}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsxs)(l.Button,{type:"button",variant:"outline",onClick:()=>F.current?.click(),className:"flex-1",children:[(0,t.jsx)(p.Upload,{className:"w-4 h-4 ml-2"}),E.logo?"تغيير الشعار":"رفع شعار"]}),E.logo&&(0,t.jsx)(l.Button,{type:"button",variant:"outline",onClick:()=>I({...E,logo:void 0}),children:"إزالة"})]}),(0,t.jsx)("input",{ref:F,type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void z.toast.error("يرجى رفع صورة فقط");let s=new FileReader;s.onload=()=>{I({...E,logo:{data:s.result,position:E.logo?.position||"top-right",size:E.logo?.size||"medium"}}),z.toast.success("تم رفع الشعار بنجاح")},s.readAsDataURL(t)},className:"hidden"}),E.logo&&(0,t.jsx)("div",{className:"mt-3 p-3 border rounded-lg bg-gray-50",children:(0,t.jsx)("img",{src:E.logo.data,alt:"Logo preview",className:"max-w-[100px] max-h-[100px] object-contain"})})]}),E.logo&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"logoPosition",className:"text-sm mb-2 block",children:"موضع الشعار"}),(0,t.jsxs)(d.Select,{value:E.logo.position,onValueChange:e=>I({...E,logo:{...E.logo,position:e}}),children:[(0,t.jsx)(d.SelectTrigger,{id:"logoPosition",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"top-right",children:"أعلى اليمين"}),(0,t.jsx)(d.SelectItem,{value:"top-left",children:"أعلى اليسار"}),(0,t.jsx)(d.SelectItem,{value:"center",children:"في المنتصف"})]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"logoSize",className:"text-sm mb-2 block",children:"حجم الشعار"}),(0,t.jsxs)(d.Select,{value:E.logo.size,onValueChange:e=>I({...E,logo:{...E.logo,size:e}}),children:[(0,t.jsx)(d.SelectTrigger,{id:"logoSize",children:(0,t.jsx)(d.SelectValue,{})}),(0,t.jsxs)(d.SelectContent,{children:[(0,t.jsx)(d.SelectItem,{value:"small",children:"صغير"}),(0,t.jsx)(d.SelectItem,{value:"medium",children:"متوسط"}),(0,t.jsx)(d.SelectItem,{value:"large",children:"كبير"})]})]})]})]})]})}),(0,t.jsx)(o.TabsContent,{value:"content",className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(i.Label,{className:"text-base font-semibold",children:"محتوى التصدير"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"اختر أنواع البيانات التي تريد تضمينها في PDF"}),(0,t.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[(0,t.jsx)(n.Checkbox,{id:"includeParticipantName",checked:E.includeParticipantName,onCheckedChange:e=>I({...E,includeParticipantName:e})}),(0,t.jsxs)(i.Label,{htmlFor:"includeParticipantName",className:"cursor-pointer flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"تضمين اسم المشارك"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"عرض أسماء المشاركين من بيانات التسجيل"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[(0,t.jsx)(n.Checkbox,{id:"includeParticipationDate",checked:E.includeParticipationDate,onCheckedChange:e=>I({...E,includeParticipationDate:e})}),(0,t.jsxs)(i.Label,{htmlFor:"includeParticipationDate",className:"cursor-pointer flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"تضمين تاريخ المشاركة"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"عرض تاريخ ووقت إرسال كل مشارك"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[(0,t.jsx)(n.Checkbox,{id:"includeTextAnswers",checked:E.includeTextAnswers,onCheckedChange:e=>I({...E,includeTextAnswers:e})}),(0,t.jsxs)(i.Label,{htmlFor:"includeTextAnswers",className:"cursor-pointer flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"تضمين الإجابات النصية"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"نصوص قصيرة وطويلة، بريد إلكتروني، هاتف، أرقام، روابط"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[(0,t.jsx)(n.Checkbox,{id:"includeChoices",checked:E.includeChoices,onCheckedChange:e=>I({...E,includeChoices:e})}),(0,t.jsxs)(i.Label,{htmlFor:"includeChoices",className:"cursor-pointer flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"تضمين الاختيارات"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"اختيار من متعدد، اختيار متعدد، نعم/لا، قوائم منسدلة"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[(0,t.jsx)(n.Checkbox,{id:"includeRatings",checked:E.includeRatings,onCheckedChange:e=>I({...E,includeRatings:e})}),(0,t.jsxs)(i.Label,{htmlFor:"includeRatings",className:"cursor-pointer flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"تضمين التقييمات"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"نجوم، قلوب، إيموجي، أرقام"})]})]}),(0,t.jsx)("div",{className:"p-3 rounded-lg bg-amber-50 border border-amber-200",children:(0,t.jsxs)("p",{className:"text-sm text-amber-800",children:[(0,t.jsx)("strong",{children:"ملاحظة:"})," الصور والملفات المرفوعة (PDF، فيديو) لن يتم تضمينها في التصدير."]})})]})]})}),(0,t.jsx)(o.TabsContent,{value:"info",className:"space-y-4",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(i.Label,{className:"text-base font-semibold",children:"معلومات إضافية"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"أضف معلومات إضافية إلى PDF"}),(0,t.jsxs)("div",{className:"space-y-3 pt-2",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[(0,t.jsx)(n.Checkbox,{id:"includeEventTitle",checked:E.includeEventTitle,onCheckedChange:e=>I({...E,includeEventTitle:e})}),(0,t.jsxs)(i.Label,{htmlFor:"includeEventTitle",className:"cursor-pointer flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"إضافة عنوان الحدث في الأعلى"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"عرض عنوان الحدث في رأس PDF"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[(0,t.jsx)(n.Checkbox,{id:"includeExportDate",checked:E.includeExportDate,onCheckedChange:e=>I({...E,includeExportDate:e})}),(0,t.jsxs)(i.Label,{htmlFor:"includeExportDate",className:"cursor-pointer flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"إضافة تاريخ التصدير"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"عرض تاريخ إنشاء ملف PDF"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 rounded-lg border border-gray-200 hover:bg-gray-50",children:[(0,t.jsx)(n.Checkbox,{id:"includeParticipantCount",checked:E.includeParticipantCount,onCheckedChange:e=>I({...E,includeParticipantCount:e})}),(0,t.jsxs)(i.Label,{htmlFor:"includeParticipantCount",className:"cursor-pointer flex-1",children:[(0,t.jsx)("div",{className:"font-medium",children:"إضافة عدد المشاركين"}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"عرض إجمالي عدد المشاركين"})]})]}),(0,t.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,t.jsx)(i.Label,{htmlFor:"customFooter",className:"text-sm",children:"نص تذييل مخصص (اختياري)"}),(0,t.jsx)(r.Input,{id:"customFooter",type:"text",placeholder:"مثال: شكراً لمشاركتكم في الاستبيان",value:E.customFooter||"",onChange:e=>I({...E,customFooter:e.target.value})}),(0,t.jsx)("p",{className:"text-xs text-gray-500",children:"سيظهر هذا النص في أسفل كل صفحة من PDF"})]})]})]})})]}),(0,t.jsxs)(a.DialogFooter,{className:"flex flex-col-reverse sm:flex-row gap-2 sm:flex-wrap",children:[(0,t.jsxs)(l.Button,{variant:"outline",onClick:()=>{I(w),z.toast.success("تم إعادة تعيين الإعدادات")},className:"w-full sm:w-auto",children:[(0,t.jsx)(h.RotateCcw,{className:"w-4 h-4 ml-2"}),"إعادة تعيين"]}),"custom-tables"===E.layout&&H.length>0&&(0,t.jsxs)(l.Button,{variant:"outline",onClick:()=>J(!0),className:"w-full sm:w-auto bg-gradient-to-r from-purple-50 to-blue-50 border-purple-200 hover:from-purple-100 hover:to-blue-100",children:[(0,t.jsx)(v.Sparkles,{className:"w-4 h-4 ml-2 text-purple-600"}),(0,t.jsx)("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent font-semibold",children:"محرر PDF متقدم"})]}),(0,t.jsx)(l.Button,{onClick:()=>el(),disabled:A,className:"w-full sm:w-auto",children:A?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(m.Loader2,{className:"w-4 h-4 ml-2 animate-spin"}),"جاري التصدير..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(x.FileDown,{className:"w-4 h-4 ml-2"}),"تصدير PDF"]})})]})]}),(0,t.jsx)(P,{open:V,onOpenChange:G,table:W,components:C,onSave:e=>{U(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?e:t):[...t,e]),z.toast.success(W?"تم حفظ التغييرات بنجاح!":"تم إنشاء الجدول بنجاح!")},existingTables:H}),(0,t.jsx)(q,{children:(0,t.jsx)(tY,{open:Z,onOpenChange:J,eventData:{eventTitle:y,eventId:"current-event",components:C,responses:N,customTables:H},onExport:ei})})]})}e.s(["default",()=>tK],22605)}]);