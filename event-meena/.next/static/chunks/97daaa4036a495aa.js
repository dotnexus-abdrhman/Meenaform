(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43980,e=>{"use strict";let t=(0,e.i(28356).default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);e.s(["BarChart3",()=>t],43980)},68073,e=>{"use strict";let t=(0,e.i(28356).default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>t],68073)},73483,e=>{"use strict";var t=e.i(35427),l=e.i(78122);let s="event-meena-user-templates",r=e=>{try{localStorage.setItem(s,JSON.stringify(e))}catch(e){console.error("Error saving user templates:",e)}},a=(0,t.create)((e,t)=>({templates:[],isLoading:!1,error:null,loadTemplates:()=>{e({isLoading:!0});try{let t=(()=>{try{let e=localStorage.getItem(s);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading user templates:",e),[]}})();e({templates:t,isLoading:!1,error:null})}catch(t){e({isLoading:!1,error:t instanceof Error?t.message:"Failed to load templates"})}},createTemplate:s=>{let a=new Date().toISOString(),i={id:(0,l.v4)(),userId:"",...s,usageCount:0,createdAt:a,updatedAt:a,isFavorite:!1},n=[...t().templates,i];return e({templates:n}),r(n),i},updateTemplate:(l,s)=>{let a=t().templates.map(e=>e.id===l?{...e,...s,updatedAt:new Date().toISOString()}:e);e({templates:a}),r(a)},deleteTemplate:l=>{let s=t().templates.filter(e=>e.id!==l);e({templates:s}),r(s)},duplicateTemplate:s=>{let a=t().templates.find(e=>e.id===s);if(!a)throw Error("Template not found");let i=new Date().toISOString(),n={...a,id:(0,l.v4)(),name:`${a.name} (نسخة)`,usageCount:0,createdAt:i,updatedAt:i,isFavorite:!1},o=[...t().templates,n];return e({templates:o}),r(o),n},incrementUsageCount:l=>{let s=t().templates.map(e=>e.id===l?{...e,usageCount:e.usageCount+1}:e);e({templates:s}),r(s)},toggleFavorite:l=>{let s=t().templates.map(e=>e.id===l?{...e,isFavorite:!e.isFavorite}:e);e({templates:s}),r(s)},getTemplateById:e=>t().templates.find(t=>t.id===e),getTemplatesByType:e=>t().templates.filter(t=>t.type===e),searchTemplates:e=>{let l=e.toLowerCase();return t().templates.filter(e=>e.name.toLowerCase().includes(l)||e.description.toLowerCase().includes(l)||e.tags?.some(e=>e.toLowerCase().includes(l)))},clearTemplates:()=>{e({templates:[]}),r([])}}));e.s(["useUserTemplatesStore",0,a])},74764,e=>{"use strict";var t=e.i(39637),l=e.i(59405);function s({message:e="جاري التحميل..."}){return(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(l.Loader2,{className:"w-12 h-12 text-primary animate-spin mb-4"}),(0,t.jsx)("p",{className:"text-gray-600 font-medium",children:e})]})}e.s(["default",()=>s])},86433,e=>{"use strict";let t=(0,e.i(28356).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],86433)},88262,82131,e=>{"use strict";var t=e.i(39637),l=e.i(36270),s=e.i(32740),r=e.i(27502);let a=(0,e.i(28356).default)("archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);e.s(["Archive",()=>a],82131);let i={draft:{label:"مسودة",icon:s.FileText,className:"bg-yellow-100 text-yellow-800 hover:bg-yellow-100"},active:{label:"نشط",icon:r.CheckCircle,className:"bg-green-100 text-green-800 hover:bg-green-100"},archived:{label:"مؤرشف",icon:a,className:"bg-gray-100 text-gray-800 hover:bg-gray-100"}};function n({status:e,showIcon:s=!0}){let r=i[e],a=r.icon;return(0,t.jsxs)(l.Badge,{className:r.className,children:[s&&(0,t.jsx)(a,{className:"w-3 h-3 ml-1"}),r.label]})}e.s(["default",()=>n],88262)},40987,e=>{"use strict";var t=e.i(39637),l=e.i(44806),s=e.i(22967),r=e.i(45638),a=e.i(74283);function i({open:e,onOpenChange:i,onConfirm:n,eventTitle:o,isLoading:c=!1}){return(0,t.jsx)(l.Dialog,{open:e,onOpenChange:i,children:(0,t.jsxs)(l.DialogContent,{className:"max-w-md",children:[(0,t.jsxs)(l.DialogHeader,{className:"text-right",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,t.jsx)("div",{className:"p-3 rounded-full bg-red-100",children:(0,t.jsx)(r.AlertTriangle,{className:"w-6 h-6 text-red-600"})}),(0,t.jsx)(l.DialogTitle,{className:"text-xl text-gray-900",children:"تأكيد الحذف"})]}),(0,t.jsxs)(l.DialogDescription,{className:"text-base text-right text-gray-600 leading-relaxed",children:["هل أنت متأكد من حذف الحدث"," ",o&&(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:['"',o,'"']}),"؟",(0,t.jsx)("br",{}),(0,t.jsx)("span",{className:"text-red-600 font-medium mt-2 block",children:"لا يمكن التراجع عن هذا الإجراء."})]})]}),(0,t.jsxs)(l.DialogFooter,{className:"flex-row-reverse gap-3 mt-4",children:[(0,t.jsx)(s.Button,{variant:"outline",onClick:()=>i(!1),disabled:c,className:"min-w-[100px]",children:"إلغاء"}),(0,t.jsxs)(s.Button,{onClick:n,disabled:c,className:"bg-red-600 hover:bg-red-700 text-white min-w-[100px]",children:[(0,t.jsx)(a.Trash2,{className:"w-4 h-4 ml-2"}),c?"جاري الحذف...":"حذف"]})]})]})})}e.s(["default",()=>i])},13677,e=>{"use strict";var t=e.i(39637),l=e.i(94335),s=e.i(40441),r=e.i(14592),a=e.i(95549),i=e.i(96347),n=e.i(78881),o=e.i(29121),c=e.i(22967),d=e.i(88262),m=e.i(30543),x=e.i(26271),h=e.i(21172),g=e.i(17744),p=e.i(82131),u=e.i(74283),b=e.i(86433),j=e.i(39392),y=e.i(43980),v=e.i(28356);let f=(0,v.default)("bookmark-plus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]);var N=e.i(99469),w=e.i(32740),C=e.i(79032),k=e.i(45004);let M={survey:{label:"استبيان",color:"text-blue-600",bgColor:"bg-blue-50"},poll:{label:"استطلاع",color:"text-purple-600",bgColor:"bg-purple-50"},form:{label:"نموذج",color:"text-green-600",bgColor:"bg-green-50"},quiz:{label:"اختبار",color:"text-orange-600",bgColor:"bg-orange-50"}};function T({event:e,onDuplicate:l,onArchive:s,onDelete:r,onShare:a,onSaveAsTemplate:i,onPublish:n,onUnpublish:o}){let v=M[e.type];return(0,t.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-white to-purple-50 border-b border-gray-200",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,t.jsx)("div",{className:"mb-4",children:(0,t.jsxs)(C.default,{href:"/dashboard/events",className:"inline-flex items-center text-sm text-gray-600 hover:text-primary transition-colors",children:[(0,t.jsx)(m.ArrowRight,{className:"w-4 h-4 ml-1"}),"العودة إلى الأحداث"]})}),(0,t.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-lg text-gray-600 mb-4 max-w-3xl",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,t.jsx)(d.default,{status:e.status}),(0,t.jsx)("span",{className:`inline-flex items-center gap-1 text-sm px-3 py-1 rounded-full ${v.bgColor} ${v.color} font-medium`,children:v.label}),e.sections&&e.sections.length>0&&(0,t.jsxs)("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 rounded-full bg-gray-100 text-gray-700 font-medium",children:[e.sections.length," قسم"]})]})]}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-2 md:gap-3",children:["draft"===e.status&&n&&(0,t.jsxs)(c.Button,{onClick:n,size:"lg",className:"bg-green-600 hover:bg-green-700 shadow-lg shadow-green-600/30",children:[(0,t.jsx)(N.Send,{className:"w-5 h-5 ml-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"نشر الحدث"}),(0,t.jsx)("span",{className:"sm:hidden",children:"نشر"})]}),"active"===e.status&&o&&(0,t.jsxs)(c.Button,{onClick:o,variant:"outline",size:"lg",className:"hover:bg-yellow-50 hover:border-yellow-500 hover:text-yellow-700",children:[(0,t.jsx)(w.FileText,{className:"w-5 h-5 ml-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"تحويل لمسودة"}),(0,t.jsx)("span",{className:"sm:hidden",children:"مسودة"})]}),(0,t.jsx)(c.Button,{asChild:!0,variant:"outline",size:"lg",className:"hidden md:inline-flex hover:bg-purple-50 hover:border-purple-500 hover:text-purple-600",children:(0,t.jsxs)(C.default,{href:`/dashboard/events/${e.id}/results`,children:[(0,t.jsx)(y.BarChart3,{className:"w-5 h-5 ml-2"}),"عرض النتائج"]})}),(0,t.jsx)(c.Button,{asChild:!0,variant:"outline",size:"lg",className:"hidden md:inline-flex hover:bg-primary/5 hover:border-primary",children:(0,t.jsxs)(C.default,{href:`/preview/${e.id}`,target:"_blank",children:[(0,t.jsx)(j.Eye,{className:"w-5 h-5 ml-2"}),"معاينة"]})}),(0,t.jsx)(c.Button,{asChild:!0,size:"lg",className:"bg-primary hover:bg-primary/90 shadow-lg shadow-primary/30",children:(0,t.jsxs)(C.default,{href:`/dashboard/events/${e.id}/edit`,children:[(0,t.jsx)(x.Edit,{className:"w-5 h-5 ml-2"}),(0,t.jsx)("span",{className:"hidden sm:inline",children:"تعديل"})]})}),(0,t.jsxs)(c.Button,{onClick:a,variant:"outline",size:"lg",className:"hidden md:inline-flex hover:bg-green-50 hover:border-green-500 hover:text-green-600",children:[(0,t.jsx)(h.Share2,{className:"w-5 h-5 ml-2"}),"مشاركة"]}),(0,t.jsxs)(k.DropdownMenu,{children:[(0,t.jsx)(k.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(c.Button,{variant:"outline",size:"lg",className:"px-3",children:(0,t.jsx)(b.MoreVertical,{className:"w-5 h-5"})})}),(0,t.jsxs)(k.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,t.jsx)(k.DropdownMenuItem,{asChild:!0,className:"md:hidden",children:(0,t.jsxs)(C.default,{href:`/dashboard/events/${e.id}/results`,children:[(0,t.jsx)(y.BarChart3,{className:"w-4 h-4 ml-2"}),"عرض النتائج"]})}),(0,t.jsx)(k.DropdownMenuItem,{asChild:!0,className:"md:hidden",children:(0,t.jsxs)(C.default,{href:`/preview/${e.id}`,target:"_blank",children:[(0,t.jsx)(j.Eye,{className:"w-4 h-4 ml-2"}),"معاينة"]})}),(0,t.jsxs)(k.DropdownMenuItem,{onClick:a,className:"md:hidden",children:[(0,t.jsx)(h.Share2,{className:"w-4 h-4 ml-2"}),"مشاركة"]}),(0,t.jsx)(k.DropdownMenuSeparator,{className:"md:hidden"}),(0,t.jsxs)(k.DropdownMenuItem,{onClick:i,children:[(0,t.jsx)(f,{className:"w-4 h-4 ml-2"}),"حفظ كقالب"]}),(0,t.jsxs)(k.DropdownMenuItem,{onClick:l,children:[(0,t.jsx)(g.Copy,{className:"w-4 h-4 ml-2"}),"نسخ الحدث"]}),(0,t.jsx)(k.DropdownMenuSeparator,{}),(0,t.jsxs)(k.DropdownMenuItem,{onClick:s,children:[(0,t.jsx)(p.Archive,{className:"w-4 h-4 ml-2"}),"أرشفة"]}),(0,t.jsxs)(k.DropdownMenuItem,{onClick:r,className:"text-red-600 focus:text-red-600",children:[(0,t.jsx)(u.Trash2,{className:"w-4 h-4 ml-2"}),"حذف"]})]})]})]})]})]})})}var D=e.i(19459),S=e.i(68645),L=e.i(79699),B=e.i(39386),E=e.i(27502),$=e.i(68073),I=e.i(81310),F=e.i(69639);function R({event:e}){let l=[{icon:S.Calendar,label:"تاريخ الإنشاء",value:(0,I.format)(new Date(e.createdAt),"d MMMM yyyy",{locale:F.ar})},{icon:L.Clock,label:"آخر تحديث",value:(0,I.format)(new Date(e.updatedAt),"d MMMM yyyy",{locale:F.ar})},...e.startDate?[{icon:S.Calendar,label:"تاريخ البداية",value:(0,I.format)(new Date(e.startDate),"d MMMM yyyy",{locale:F.ar})}]:[],...e.endDate?[{icon:S.Calendar,label:"تاريخ النهاية",value:(0,I.format)(new Date(e.endDate),"d MMMM yyyy",{locale:F.ar})}]:[],{icon:w.FileText,label:"عدد الأقسام",value:`${e.sections?.length||0} قسم`},{icon:B.Settings,label:"يتطلب تسجيل دخول",value:e.settings.requireAuth?"نعم":"لا",icon2:e.settings.requireAuth?E.CheckCircle:$.XCircle,color:e.settings.requireAuth?"text-green-600":"text-gray-400"},{icon:B.Settings,label:"السماح بتعديل الردود",value:e.settings.allowEdit?"نعم":"لا",icon2:e.settings.allowEdit?E.CheckCircle:$.XCircle,color:e.settings.allowEdit?"text-green-600":"text-gray-400"},{icon:B.Settings,label:"عرض النتائج للمشاركين",value:e.settings.showResults?"نعم":"لا",icon2:e.settings.showResults?E.CheckCircle:$.XCircle,color:e.settings.showResults?"text-green-600":"text-gray-400"}];return(0,t.jsxs)(D.Card,{className:"p-6",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"معلومات الحدث"}),(0,t.jsx)("div",{className:"space-y-4",children:l.map((e,l)=>{let s=e.icon,r=e.icon2;return(0,t.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-gray-50",children:(0,t.jsx)(s,{className:"w-5 h-5 text-gray-600"})}),(0,t.jsx)("span",{className:"text-sm text-gray-600",children:e.label})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.value}),r&&(0,t.jsx)(r,{className:`w-4 h-4 ${e.color||"text-gray-400"}`})]})]},l)})})]})}var H=e.i(39321),z=e.i(97976);let A=(0,v.default)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);function O({shareCode:e,eventTitle:s}){let r=(0,l.useRef)(null),a=`${window.location.origin}/e/${e}`;return(0,t.jsxs)(D.Card,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,t.jsx)(A,{className:"w-5 h-5 text-primary"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"رمز QR للحدث"})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{ref:r,className:"inline-flex p-6 bg-white rounded-xl border-2 border-gray-200 mb-4",children:(0,t.jsx)(H.QRCodeSVG,{value:a,size:200,level:"H",includeMargin:!1,fgColor:"#1a56db"})}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"امسح رمز QR للوصول المباشر إلى الحدث"}),(0,t.jsxs)(c.Button,{onClick:()=>{if(!r.current)return;let t=r.current.querySelector("svg");if(!t)return;let l=document.createElement("canvas"),s=l.getContext("2d");if(!s)return;let a=new XMLSerializer().serializeToString(t),i=new Image,n=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),o=URL.createObjectURL(n);i.onload=()=>{l.width=i.width,l.height=i.height,s.drawImage(i,0,0),URL.revokeObjectURL(o),l.toBlob(t=>{if(!t)return;let l=document.createElement("a");l.download=`qr-code-${e}.png`,l.href=URL.createObjectURL(t),l.click(),URL.revokeObjectURL(l.href)})},i.src=o},variant:"outline",className:"w-full hover:bg-primary/5 hover:border-primary",children:[(0,t.jsx)(z.Download,{className:"w-4 h-4 ml-2"}),"تحميل رمز QR"]})]})]})}var U=e.i(35957),_=e.i(68759),q=e.i(72358),V=e.i(70959);function P({shareCode:e}){let[s,r]=(0,l.useState)(!1),{toast:a}=(0,n.useToast)(),i=`${window.location.origin}/e/${e}`,o=async()=>{try{await navigator.clipboard.writeText(i),r(!0),a({title:"تم النسخ!",description:"تم نسخ رابط الحدث إلى الحافظة"}),setTimeout(()=>r(!1),2e3)}catch(e){a({title:"خطأ",description:"فشل نسخ الرابط",variant:"destructive"})}};return(0,t.jsxs)(D.Card,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-green-50",children:(0,t.jsx)(_.Link2,{className:"w-5 h-5 text-green-600"})}),(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"رابط الحدث العام"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)(U.Input,{value:i,readOnly:!0,className:"flex-1 bg-gray-50 font-mono text-sm",dir:"ltr"}),(0,t.jsx)(c.Button,{onClick:o,variant:"outline",className:`px-4 ${s?"bg-green-50 border-green-500 text-green-600":"hover:bg-primary/5 hover:border-primary"}`,children:s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(q.Check,{className:"w-4 h-4 ml-2"}),"تم النسخ"]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Copy,{className:"w-4 h-4 ml-2"}),"نسخ"]})})]}),(0,t.jsxs)(c.Button,{onClick:()=>{window.open(i,"_blank")},variant:"outline",className:"w-full hover:bg-blue-50 hover:border-blue-500 hover:text-blue-600",children:[(0,t.jsx)(V.ExternalLink,{className:"w-4 h-4 ml-2"}),"فتح في نافذة جديدة"]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"شارك هذا الرابط مع المشاركين للوصول إلى الحدث"})]})]})}var X=e.i(40329),Q=e.i(91096),J=e.i(17497),K=e.i(68418),G=e.i(79806),W=e.i(26566),Y=e.i(75986),Z=e.i(38810),ee=e.i(5096);let et={question:{label:"سؤال",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},rating:{label:"تقييم",icon:Q.Star,color:"text-yellow-600",bgColor:"bg-yellow-50"},pdf_upload:{label:"رفع PDF",icon:J.Upload,color:"text-red-600",bgColor:"bg-red-50"},image_upload:{label:"رفع صورة",icon:K.Image,color:"text-green-600",bgColor:"bg-green-50"},video_upload:{label:"رفع فيديو",icon:G.Video,color:"text-purple-600",bgColor:"bg-purple-50"},link:{label:"رابط",icon:_.Link2,color:"text-cyan-600",bgColor:"bg-cyan-50"},table:{label:"جدول",icon:W.Table,color:"text-orange-600",bgColor:"bg-orange-50"},signature:{label:"توقيع",icon:Y.PenTool,color:"text-pink-600",bgColor:"bg-pink-50"},text:{label:"نص",icon:Z.Type,color:"text-gray-600",bgColor:"bg-gray-50"},display:{label:"عرض",icon:w.FileText,color:"text-indigo-600",bgColor:"bg-indigo-50"},short_text:{label:"نص قصير",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},long_text:{label:"نص طويل",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},single_choice:{label:"اختيار من متعدد",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},multiple_choice:{label:"اختيار متعدد",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},dropdown:{label:"قائمة منسدلة",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},yes_no:{label:"نعم/لا",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},linear_scale:{label:"مقياس خطي",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},choice_grid:{label:"شبكة اختيارات",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},number:{label:"رقم",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},email:{label:"بريد إلكتروني",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},phone:{label:"رقم جوال",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},date:{label:"تاريخ",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},time:{label:"وقت",icon:ee.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"}};function el({event:e}){return e.sections&&0!==e.sections.length?(0,t.jsxs)(D.Card,{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,t.jsx)(X.Layers,{className:"w-5 h-5 text-primary"})}),(0,t.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:["أقسام الحدث (",e.sections.length,")"]})]}),(0,t.jsx)("div",{className:"space-y-4",children:e.sections.map((e,l)=>(0,t.jsxs)("div",{className:"p-4 rounded-lg border border-gray-200 hover:border-primary/30 hover:shadow-md transition-all",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,t.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white text-sm font-bold",children:l+1}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.description})]})]}),e.components&&e.components.length>0&&(0,t.jsxs)("div",{className:"mr-11 space-y-2",children:[(0,t.jsxs)("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:["المكونات (",e.components.length,")"]}),(0,t.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:e.components.map(e=>{let l=et[e.type]||{label:"مكون",icon:ee.HelpCircle,color:"text-gray-600",bgColor:"bg-gray-50"},s=l.icon;return(0,t.jsxs)("div",{className:`flex items-center gap-2 p-2 rounded-lg ${l.bgColor}`,children:[(0,t.jsx)(s,{className:`w-4 h-4 ${l.color}`}),(0,t.jsx)("span",{className:`text-sm font-medium ${l.color}`,children:l.label})]},e.id)})})]}),(!e.components||0===e.components.length)&&(0,t.jsx)("div",{className:"mr-11 text-sm text-gray-400 italic",children:"لا توجد مكونات في هذا القسم"})]},e.id))})]}):(0,t.jsxs)(D.Card,{className:"p-8 text-center",children:[(0,t.jsx)("div",{className:"inline-flex p-4 rounded-full bg-gray-100 mb-4",children:(0,t.jsx)(X.Layers,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"لا توجد أقسام بعد"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"ابدأ بإضافة أقسام ومكونات إلى الحدث"})]})}var es=e.i(40987),er=e.i(5487),ea=e.i(44806),ei=e.i(2029),en=e.i(8537),eo=e.i(73483),ec=e.i(83122),ed=e.i(23725),em=e.i(79286);function ex({event:e,open:s,onOpenChange:r}){let[a,i]=(0,l.useState)(e.title),[n,o]=(0,l.useState)(e.description||""),[d,m]=(0,l.useState)(!1),[x,h]=(0,l.useState)(!1),g=(0,eo.useUserTemplatesStore)(e=>e.createTemplate),p=async t=>{if(t.preventDefault(),!a.trim())return void em.toast.error("الرجاء إدخال اسم القالب");m(!0);try{g({name:a.trim(),description:n.trim(),type:e.type,sections:e.sections,settings:e.settings,sourceEventId:e.id,sourceEventTitle:e.title,tags:[e.type]}),h(!0),em.toast.success("تم حفظ القالب بنجاح!",{description:"يمكنك الآن استخدام هذا القالب لإنشاء أحداث جديدة"}),setTimeout(()=>{r(!1),h(!1),i(e.title),o(e.description||"")},1500)}catch(e){console.error("Error creating template:",e),em.toast.error("حدث خطأ أثناء حفظ القالب")}finally{m(!1)}},u=()=>{d||(r(!1),h(!1),i(e.title),o(e.description||""))};return(0,t.jsx)(ea.Dialog,{open:s,onOpenChange:u,children:(0,t.jsx)(ea.DialogContent,{className:"sm:max-w-[550px]",children:x?(0,t.jsxs)("div",{className:"py-8 text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:(0,t.jsx)(ed.CheckCircle2,{className:"w-10 h-10 text-green-600"})}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"تم الحفظ بنجاح!"}),(0,t.jsx)("p",{className:"text-gray-600",children:"تم حفظ القالب في قوالبك الخاصة"})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ea.DialogHeader,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-amber-100 to-yellow-100 flex items-center justify-center",children:(0,t.jsx)(f,{className:"w-6 h-6 text-amber-600"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)(ea.DialogTitle,{className:"text-xl",children:"حفظ كقالب مخصص"}),(0,t.jsx)(ea.DialogDescription,{children:"احفظ هذا الحدث كقالب لإعادة استخدامه لاحقاً"})]})]})}),(0,t.jsxs)("form",{onSubmit:p,className:"space-y-5 mt-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(ei.Label,{htmlFor:"template-name",className:"text-base font-semibold",children:["اسم القالب ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)(U.Input,{id:"template-name",value:a,onChange:e=>i(e.target.value),placeholder:"مثال: استبيان رضا العملاء",required:!0,className:"text-base"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)(ei.Label,{htmlFor:"template-description",className:"text-base font-semibold",children:["وصف القالب ",(0,t.jsx)("span",{className:"text-gray-400 text-sm",children:"(اختياري)"})]}),(0,t.jsx)(en.Textarea,{id:"template-description",value:n,onChange:e=>o(e.target.value),placeholder:"وصف مختصر للقالب وكيفية استخدامه...",rows:3,className:"resize-none"})]}),(0,t.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-sky-50 border-2 border-blue-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)(ec.Sparkles,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,t.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[(0,t.jsx)("p",{className:"font-semibold text-blue-900",children:"سيتم حفظ:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside space-y-0.5 mr-2",children:[(0,t.jsxs)("li",{children:["جميع الأقسام (",e.sections.length," قسم)"]}),(0,t.jsx)("li",{children:"جميع المكونات والأسئلة"}),(0,t.jsx)("li",{children:"الإعدادات والتخصيصات"}),(0,t.jsx)("li",{children:"رسائل الشكر والنتائج"})]})]})]})}),(0,t.jsxs)(ea.DialogFooter,{className:"gap-2",children:[(0,t.jsx)(c.Button,{type:"button",variant:"outline",onClick:u,disabled:d,children:"إلغاء"}),(0,t.jsx)(c.Button,{type:"submit",disabled:d||!a.trim(),className:"bg-gradient-to-r from-amber-600 to-yellow-600 hover:from-amber-700 hover:to-yellow-700",children:d?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"جاري الحفظ..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(f,{className:"w-4 h-4 mr-2"}),"حفظ القالب"]})})]})]})]})})})}var eh=e.i(74764);function eg(){let e=(0,s.useParams)(),r=(0,s.useRouter)(),{toast:c}=(0,n.useToast)(),d=e.id,{currentEvent:m,fetchEventById:x,deleteEvent:h,duplicateEvent:g,archiveEvent:p,updateEventStatus:u,isLoading:b,events:j}=(0,a.useEventsStore)(),{fetchContacts:y,fetchGroups:v}=(0,i.useContactsStore)(),[f,N]=(0,l.useState)(!1),[w,C]=(0,l.useState)(!1),[k,M]=(0,l.useState)(!1);(0,l.useEffect)(()=>{d&&(x(d),y(),v())},[d,x,y,v]);let D=async()=>{try{await h(d),N(!1),r.push("/dashboard/events")}catch(e){console.error("Error deleting event:",e)}},S=async()=>{try{let e=await g(d);c({title:"تم نسخ الحدث بنجاح",description:`تم إنشاء "${e.title}"`}),r.push("/dashboard/events")}catch(e){console.error("Error duplicating event:",e),c({title:"خطأ",description:"فشل في نسخ الحدث",variant:"destructive"})}},L=async()=>{try{await p(d),c({title:"تمت الأرشفة",description:"تم أرشفة الحدث بنجاح"}),r.push("/dashboard/events")}catch(e){console.error("Error archiving event:",e),c({title:"خطأ",description:"فشل في أرشفة الحدث",variant:"destructive"})}},B=async()=>{try{await u(d,"active"),c({title:"تم النشر",description:"تم نشر الحدث بنجاح وأصبح متاحاً للمشاركين"})}catch(e){console.error("Error publishing event:",e),c({title:"خطأ",description:"فشل في نشر الحدث",variant:"destructive"})}},E=async()=>{try{await u(d,"draft"),c({title:"تم التحويل",description:"تم تحويل الحدث إلى مسودة"})}catch(e){console.error("Error unpublishing event:",e),c({title:"خطأ",description:"فشل في تحويل الحدث إلى مسودة",variant:"destructive"})}};return b||!m?(0,t.jsx)(o.default,{children:(0,t.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsx)(eh.default,{message:"جاري تحميل تفاصيل الحدث..."})})}):(0,t.jsxs)(o.default,{children:[(0,t.jsx)(T,{event:m,onDuplicate:S,onArchive:L,onDelete:()=>N(!0),onShare:()=>{C(!0)},onSaveAsTemplate:()=>M(!0),onPublish:B,onUnpublish:E}),(0,t.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,t.jsx)(R,{event:m}),(0,t.jsx)(el,{event:m})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(O,{shareCode:m.shareCode||"",eventTitle:m.title}),(0,t.jsx)(P,{shareCode:m.shareCode||""})]})]})}),(0,t.jsx)(es.default,{open:f,onOpenChange:N,onConfirm:D,eventTitle:m.title}),(0,t.jsx)(er.default,{open:w,onClose:()=>C(!1),eventId:d,eventTitle:m.title,eventUrl:`${window.location.origin}/events/${d}`}),(0,t.jsx)(ex,{event:m,open:k,onOpenChange:M})]})}function ep(){return(0,t.jsx)(r.default,{children:(0,t.jsx)(eg,{})})}e.s(["default",()=>ep],13677)}]);