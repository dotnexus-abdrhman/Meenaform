(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24085,48055,24401,94244,e=>{"use strict";var t=e.i(39637),s=e.i(83122),a=e.i(79032);function r({creatorName:e}){return(0,t.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm",children:(0,t.jsx)("div",{className:"container mx-auto px-4",children:(0,t.jsx)("div",{className:"flex items-center justify-center h-16",children:(0,t.jsxs)(a.default,{href:"/",className:"flex items-center gap-2.5 group",children:[(0,t.jsx)("div",{className:"relative bg-[#1a56db] p-2 rounded-xl group-hover:bg-[#1648c7] transition-colors duration-200",children:(0,t.jsx)(s.Sparkles,{className:"w-6 h-6 text-white"})}),(0,t.jsxs)("span",{className:"text-2xl font-bold text-gray-900",children:["Event ",(0,t.jsx)("span",{className:"text-[#1a56db]",children:"Meena"})]})]})})})})}function n(){let e=new Date().getFullYear();return(0,t.jsx)("footer",{className:"bg-white border-t border-gray-200 mt-16",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-6",children:(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("p",{className:"text-gray-600 text-sm",children:["Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© Â© Event Meena ",e]})})})})}e.s(["default",()=>r],24085),e.s(["default",()=>n],48055);var i=e.i(36270),l=e.i(68645),o=e.i(79699),c=e.i(32740),d=e.i(5096),m=e.i(19817),h=e.i(40722),x=e.i(81310),u=e.i(69639);let g={survey:{label:"Ø§Ø³ØªØ¨ÙŠØ§Ù†",icon:c.FileText,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",headerBg:"bg-gradient-to-r from-blue-500 to-blue-600"},poll:{label:"Ø§Ø³ØªØ·Ù„Ø§Ø¹ Ø±Ø£ÙŠ",icon:d.HelpCircle,color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",headerBg:"bg-gradient-to-r from-green-500 to-emerald-600"},form:{label:"Ù†Ù…ÙˆØ°Ø¬",icon:m.ClipboardList,color:"text-gray-600",bgColor:"bg-gray-50",borderColor:"border-gray-200",headerBg:"bg-gradient-to-r from-gray-600 to-gray-700"},quiz:{label:"Ø§Ø®ØªØ¨Ø§Ø±",icon:h.Target,color:"text-blue-600",bgColor:"bg-blue-50",borderColor:"border-blue-200",headerBg:"bg-gradient-to-r from-[#1a56db] to-[#0ea5e9]"}};function f({event:e}){let s=g[e.type],a=s.icon,r=e.sections.reduce((e,t)=>e+t.components.length,0);return"quiz"===e.type?(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden mb-8 border border-gray-200",children:[(0,t.jsxs)("div",{className:`${s.headerBg} text-white p-8 md:p-12 text-center relative overflow-hidden`,children:[(0,t.jsx)("div",{className:"absolute inset-0 opacity-10",children:(0,t.jsx)("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"32px 32px"}})}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsx)("div",{className:"flex items-center justify-center gap-3 mb-6",children:(0,t.jsx)("div",{className:"w-20 h-20 rounded-2xl bg-white/20 backdrop-blur-sm flex items-center justify-center border-2 border-white/30 shadow-lg",children:(0,t.jsx)(a,{className:"w-10 h-10 text-white"})})}),(0,t.jsx)(i.Badge,{variant:"secondary",className:"mb-4 bg-white/20 text-white border-white/30 px-4 py-1 text-sm font-semibold",children:s.label}),(0,t.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-4 leading-tight",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-white/95 text-lg leading-relaxed max-w-3xl mx-auto",children:e.description})]})]}),(0,t.jsxs)("div",{className:"p-6 md:p-8 bg-gradient-to-b from-gray-50 to-white",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,t.jsxs)("div",{className:"text-center p-5 bg-white rounded-xl border-2 border-blue-100 shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-[#1a56db] mb-1",children:e.sections.length}),(0,t.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"Ø£Ù‚Ø³Ø§Ù…"})]}),(0,t.jsxs)("div",{className:"text-center p-5 bg-white rounded-xl border-2 border-sky-100 shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-[#0ea5e9] mb-1",children:r}),(0,t.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"Ø£Ø³Ø¦Ù„Ø©"})]}),e.settings.timeLimit&&(0,t.jsxs)("div",{className:"text-center p-5 bg-white rounded-xl border-2 border-red-100 shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)("div",{className:"text-3xl font-bold text-red-600 mb-1",children:e.settings.timeLimit}),(0,t.jsx)("div",{className:"text-sm text-gray-600 font-medium",children:"Ø¯Ù‚ÙŠÙ‚Ø©"})]}),e.endDate&&(0,t.jsxs)("div",{className:"text-center p-5 bg-white rounded-xl border-2 border-orange-100 shadow-sm hover:shadow-md transition-shadow",children:[(0,t.jsx)(l.Calendar,{className:"w-6 h-6 text-orange-600 mx-auto mb-2"}),(0,t.jsx)("div",{className:"text-xs text-gray-600 font-medium",children:(0,x.format)(new Date(e.endDate),"PPP",{locale:u.ar})})]})]}),(e.settings.requireSignature||!e.settings.allowEdit||e.settings.timeLimit)&&(0,t.jsxs)("div",{className:"mt-6 p-5 bg-blue-50 border-2 border-blue-200 rounded-xl",children:[(0,t.jsxs)("h3",{className:"font-bold text-gray-900 mb-3 flex items-center gap-2 text-base",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-[#1a56db] flex items-center justify-center",children:(0,t.jsx)(h.Target,{className:"w-4 h-4 text-white"})}),"ØªØ¹Ù„ÙŠÙ…Ø§Øª Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±"]}),(0,t.jsxs)("ul",{className:"text-sm text-gray-700 space-y-2 mr-10",children:[e.settings.timeLimit&&(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-[#1a56db] font-bold",children:"â€¢"}),(0,t.jsxs)("span",{children:["ÙŠØ¬Ø¨ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø®Ù„Ø§Ù„ ",(0,t.jsxs)("strong",{className:"text-gray-900",children:[e.settings.timeLimit," Ø¯Ù‚ÙŠÙ‚Ø©"]})]})]}),!e.settings.allowEdit&&(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-[#1a56db] font-bold",children:"â€¢"}),(0,t.jsx)("span",{children:"Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"})]}),!e.settings.allowMultipleResponses&&(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-[#1a56db] font-bold",children:"â€¢"}),(0,t.jsx)("span",{children:"Ù…Ø­Ø§ÙˆÙ„Ø© ÙˆØ§Ø­Ø¯Ø© ÙÙ‚Ø· Ù…ØªØ§Ø­Ø©"})]}),e.settings.requireSignature&&(0,t.jsxs)("li",{className:"flex items-start gap-2",children:[(0,t.jsx)("span",{className:"text-[#1a56db] font-bold",children:"â€¢"}),(0,t.jsx)("span",{children:"ÙŠØªØ·Ù„Ø¨ ØªÙˆÙ‚ÙŠØ¹Ø§Ù‹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Ù‹"})]})]})]})]})]}):(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8 border border-gray-100",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-xl ${s.bgColor} flex items-center justify-center border-2 ${s.borderColor}`,children:(0,t.jsx)(a,{className:`w-6 h-6 ${s.color}`})}),(0,t.jsx)(i.Badge,{variant:"outline",className:`${s.color} border-current`,children:s.label})]}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed mb-6",children:e.description}),(0,t.jsxs)("div",{className:"flex flex-wrap gap-6 text-sm text-gray-600 pt-6 border-t border-gray-200",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center",children:(0,t.jsx)(c.FileText,{className:"w-4 h-4 text-blue-600"})}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:e.sections.length})," ",1===e.sections.length?"Ù‚Ø³Ù…":"Ø£Ù‚Ø³Ø§Ù…"]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center",children:(0,t.jsx)(d.HelpCircle,{className:"w-4 h-4 text-purple-600"})}),(0,t.jsxs)("span",{children:[(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:r})," ",1===r?"Ø³Ø¤Ø§Ù„":"Ø£Ø³Ø¦Ù„Ø©"]})]}),e.endDate&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-orange-50 flex items-center justify-center",children:(0,t.jsx)(l.Calendar,{className:"w-4 h-4 text-orange-600"})}),(0,t.jsxs)("span",{children:["ÙŠÙ†ØªÙ‡ÙŠ ÙÙŠ: ",(0,t.jsx)("span",{className:"font-semibold text-gray-900",children:(0,x.format)(new Date(e.endDate),"PPP",{locale:u.ar})})]})]}),e.settings.timeLimit&&(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-lg bg-red-50 flex items-center justify-center",children:(0,t.jsx)(o.Clock,{className:"w-4 h-4 text-red-600"})}),(0,t.jsxs)("span",{children:["Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…Ø­Ø¯Ø¯: ",(0,t.jsxs)("span",{className:"font-semibold text-gray-900",children:[e.settings.timeLimit," Ø¯Ù‚ÙŠÙ‚Ø©"]})]})]})]}),(e.settings.requireSignature||!e.settings.allowEdit||e.settings.timeLimit)&&(0,t.jsxs)("div",{className:"mt-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù…Ù‡Ù…Ø©:"}),(0,t.jsxs)("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.settings.requireSignature&&(0,t.jsx)("li",{children:"â€¢ ÙŠØªØ·Ù„Ø¨ Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø« ØªÙˆÙ‚ÙŠØ¹Ø§Ù‹ Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠØ§Ù‹"}),!e.settings.allowEdit&&(0,t.jsx)("li",{children:"â€¢ Ù„Ø§ ÙŠÙ…ÙƒÙ† ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¯ÙˆØ¯ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„"}),e.settings.timeLimit&&(0,t.jsxs)("li",{children:["â€¢ ÙŠØ¬Ø¨ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø­Ø¯Ø« Ø®Ù„Ø§Ù„ ",e.settings.timeLimit," Ø¯Ù‚ÙŠÙ‚Ø©"]}),!e.settings.allowMultipleResponses&&(0,t.jsx)("li",{children:"â€¢ ÙŠÙØ³Ù…Ø­ Ø¨Ø±Ø¯ ÙˆØ§Ø­Ø¯ ÙÙ‚Ø· Ù„ÙƒÙ„ Ù…Ø´Ø§Ø±Ùƒ"})]})]})]})}e.s(["default",()=>f],24401);var b=e.i(94335),p=e.i(22967),w=e.i(21761),j=e.i(78881),v=e.i(22933),y=e.i(40441),N=e.i(59405),C=e.i(27502),M=e.i(30543),S=e.i(85090),E=e.i(73712),T=e.i(26271),k=e.i(40248);function B({section:e,answers:s,onAnswerChange:a,eventType:r,isPreviewMode:n=!1}){return(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 space-y-8",children:[(0,t.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,t.jsx)("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-3",children:e.title}),e.description&&(0,t.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed",children:e.description})]}),(0,t.jsx)("div",{className:"space-y-8",children:e.components.map((e,i)=>{let l;return(0,t.jsx)("div",{className:`pb-8 border-b border-gray-100 last:border-b-0 last:pb-0 ${n?"pointer-events-none opacity-75":""}`,children:(0,t.jsx)(k.default,{component:e,value:(l=e.id,s.find(e=>e.componentId===l)?.answer),onChange:t=>a(e.id,e.type,t),index:i,eventType:r,isPreviewMode:n})},e.id)})})]})}var I=e.i(43980),R=e.i(52019),P=e.i(97755),A=e.i(41467),z=e.i(59687),F=e.i(78727),L={};!function e(t,s,a,r){var n,i,l,o,c,d,m,h,x,u,g,f=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),b="function"==typeof Path2D&&"function"==typeof DOMMatrix;function p(){}function w(e){var a=s.exports.Promise,r=void 0!==a?a:t.Promise;return"function"==typeof r?new r(e):(e(p,p),null)}var j=(n=function(){if(!t.OffscreenCanvas)return!1;try{var e=new OffscreenCanvas(1,1),s=e.getContext("2d");s.fillRect(0,0,1,1);var a=e.transferToImageBitmap();s.createPattern(a,"no-repeat")}catch(e){return!1}return!0}(),i=new Map,{transform:function(e){if(n)return e;if(i.has(e))return i.get(e);var t=new OffscreenCanvas(e.width,e.height);return t.getContext("2d").drawImage(e,0,0),i.set(e,t),t},clear:function(){i.clear()}}),v=(c=Math.floor(1e3/60),d={},m=0,"function"==typeof requestAnimationFrame&&"function"==typeof cancelAnimationFrame?(l=function(e){var t=Math.random();return d[t]=requestAnimationFrame(function s(a){m===a||m+c-1<a?(m=a,delete d[t],e()):d[t]=requestAnimationFrame(s)}),t},o=function(e){d[e]&&cancelAnimationFrame(d[e])}):(l=function(e){return setTimeout(e,c)},o=function(e){return clearTimeout(e)}),{frame:l,cancel:o}),y=(u={},function(){if(h)return h;if(!a&&f){var t=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {\n  if (msg.data.options) {\n    CONFETTI(msg.data.options).then(function () {\n      if (msg.data.callback) {\n        postMessage({ callback: msg.data.callback });\n      }\n    });\n  } else if (msg.data.reset) {\n    CONFETTI && CONFETTI.reset();\n  } else if (msg.data.resize) {\n    SIZE.width = msg.data.resize.width;\n    SIZE.height = msg.data.resize.height;\n  } else if (msg.data.canvas) {\n    SIZE.width = msg.data.canvas.width;\n    SIZE.height = msg.data.canvas.height;\n    CONFETTI = module.exports.create(msg.data.canvas);\n  }\n}"].join("\n");try{h=new Worker(URL.createObjectURL(new Blob([t])))}catch(e){return"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn("ðŸŽŠ Could not load worker",e),null}var s=h;function r(e,t){s.postMessage({options:e||{},callback:t})}s.init=function(e){var t=e.transferControlToOffscreen();s.postMessage({canvas:t},[t])},s.fire=function(e,t,a){if(x)return r(e,null),x;var n=Math.random().toString(36).slice(2);return x=w(function(t){function i(e){e.data.callback===n&&(delete u[n],s.removeEventListener("message",i),x=null,j.clear(),a(),t())}s.addEventListener("message",i),r(e,n),u[n]=i.bind(null,{data:{callback:n}})})},s.reset=function(){for(var e in s.postMessage({reset:!0}),u)u[e](),delete u[e]}}return h}),N={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function C(e,t,s){var a;return a=e&&null!=e[t]?e[t]:N[t],s?s(a):a}function M(e){return e<0?0:Math.floor(e)}function S(e){return parseInt(e,16)}function E(e){return e.map(T)}function T(e){var t=String(e).replace(/[^0-9a-f]/gi,"");return t.length<6&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),{r:S(t.substring(0,2)),g:S(t.substring(2,4)),b:S(t.substring(4,6))}}function k(e){e.width=document.documentElement.clientWidth,e.height=document.documentElement.clientHeight}function B(e){var t=e.getBoundingClientRect();e.width=t.width,e.height=t.height}function I(e,s){var n,i=!e,l=!!C(s||{},"resize"),o=!1,c=C(s,"disableForReducedMotion",Boolean),d=f&&C(s||{},"useWorker")?y():null,m=i?k:B,h=!!e&&!!d&&!!e.__confetti_initialized,x="function"==typeof matchMedia&&matchMedia("(prefers-reduced-motion)").matches;function u(s){var u,g=c||C(s,"disableForReducedMotion",Boolean),f=C(s,"zIndex",Number);if(g&&x)return w(function(e){e()});i&&n?e=n.canvas:i&&!e&&((u=document.createElement("canvas")).style.position="fixed",u.style.top="0px",u.style.left="0px",u.style.pointerEvents="none",u.style.zIndex=f,e=u,document.body.appendChild(e)),l&&!h&&m(e);var p={width:e.width,height:e.height};function y(){if(d){var t={getBoundingClientRect:function(){if(!i)return e.getBoundingClientRect()}};m(t),d.postMessage({resize:{width:t.width,height:t.height}});return}p.width=p.height=null}function N(){n=null,l&&(o=!1,t.removeEventListener("resize",y)),i&&e&&(document.body.contains(e)&&document.body.removeChild(e),e=null,h=!1)}return(d&&!h&&d.init(e),h=!0,d&&(e.__confetti_initialized=!0),l&&!o&&(o=!0,t.addEventListener("resize",y,!1)),d)?d.fire(s,p,N):function(t,s,i){for(var l,o,c,d,h,x,u,g=C(t,"particleCount",M),f=C(t,"angle",Number),p=C(t,"spread",Number),y=C(t,"startVelocity",Number),N=C(t,"decay",Number),S=C(t,"gravity",Number),T=C(t,"drift",Number),k=C(t,"colors",E),B=C(t,"ticks",Number),I=C(t,"shapes"),R=C(t,"scalar"),P=!!C(t,"flat"),A=((l=C(t,"origin",Object)).x=C(l,"x",Number),l.y=C(l,"y",Number),l),z=g,F=[],L=e.width*A.x,D=e.height*A.y;z--;)F.push(function(e){var t=e.angle*(Math.PI/180),s=e.spread*(Math.PI/180);return{x:e.x,y:e.y,wobble:10*Math.random(),wobbleSpeed:Math.min(.11,.1*Math.random()+.05),velocity:.5*e.startVelocity+Math.random()*e.startVelocity,angle2D:-t+(.5*s-Math.random()*s),tiltAngle:(.5*Math.random()+.25)*Math.PI,color:e.color,shape:e.shape,tick:0,totalTicks:e.ticks,decay:e.decay,drift:e.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:3*e.gravity,ovalScalar:.6,scalar:e.scalar,flat:e.flat}}({x:L,y:D,angle:f,spread:p,startVelocity:y,color:k[z%k.length],shape:I[Math.floor(Math.random()*(I.length-0))+0],ticks:B,decay:N,gravity:S,drift:T,scalar:R,flat:P}));return n?n.addFettis(F):(o=e,h=F.slice(),x=o.getContext("2d"),u=w(function(e){function t(){c=d=null,x.clearRect(0,0,s.width,s.height),j.clear(),i(),e()}c=v.frame(function e(){a&&(s.width!==r.width||s.height!==r.height)&&(s.width=o.width=r.width,s.height=o.height=r.height),s.width||s.height||(m(o),s.width=o.width,s.height=o.height),x.clearRect(0,0,s.width,s.height),(h=h.filter(function(e){return function(e,t){t.x+=Math.cos(t.angle2D)*t.velocity+t.drift,t.y+=Math.sin(t.angle2D)*t.velocity+t.gravity,t.velocity*=t.decay,t.flat?(t.wobble=0,t.wobbleX=t.x+10*t.scalar,t.wobbleY=t.y+10*t.scalar,t.tiltSin=0,t.tiltCos=0,t.random=1):(t.wobble+=t.wobbleSpeed,t.wobbleX=t.x+10*t.scalar*Math.cos(t.wobble),t.wobbleY=t.y+10*t.scalar*Math.sin(t.wobble),t.tiltAngle+=.1,t.tiltSin=Math.sin(t.tiltAngle),t.tiltCos=Math.cos(t.tiltAngle),t.random=Math.random()+2);var s,a,r,n,i,l,o,c,d,m,h,x,u,g,f,p,w=t.tick++/t.totalTicks,v=t.x+t.random*t.tiltCos,y=t.y+t.random*t.tiltSin,N=t.wobbleX+t.random*t.tiltCos,C=t.wobbleY+t.random*t.tiltSin;if(e.fillStyle="rgba("+t.color.r+", "+t.color.g+", "+t.color.b+", "+(1-w)+")",e.beginPath(),b&&"path"===t.shape.type&&"string"==typeof t.shape.path&&Array.isArray(t.shape.matrix)){e.fill((s=t.shape.path,a=t.shape.matrix,r=t.x,n=t.y,i=.1*Math.abs(N-v),l=.1*Math.abs(C-y),o=Math.PI/10*t.wobble,c=new Path2D(s),(d=new Path2D).addPath(c,new DOMMatrix(a)),(m=new Path2D).addPath(d,new DOMMatrix([Math.cos(o)*i,Math.sin(o)*i,-Math.sin(o)*l,Math.cos(o)*l,r,n])),m))}else if("bitmap"===t.shape.type){var M=Math.PI/10*t.wobble,S=.1*Math.abs(N-v),E=.1*Math.abs(C-y),T=t.shape.bitmap.width*t.scalar,k=t.shape.bitmap.height*t.scalar,B=new DOMMatrix([Math.cos(M)*S,Math.sin(M)*S,-Math.sin(M)*E,Math.cos(M)*E,t.x,t.y]);B.multiplySelf(new DOMMatrix(t.shape.matrix));var I=e.createPattern(j.transform(t.shape.bitmap),"no-repeat");I.setTransform(B),e.globalAlpha=1-w,e.fillStyle=I,e.fillRect(t.x-T/2,t.y-k/2,T,k),e.globalAlpha=1}else if("circle"===t.shape)e.ellipse?e.ellipse(t.x,t.y,Math.abs(N-v)*t.ovalScalar,Math.abs(C-y)*t.ovalScalar,Math.PI/10*t.wobble,0,2*Math.PI):(h=t.x,x=t.y,u=Math.abs(N-v)*t.ovalScalar,g=Math.abs(C-y)*t.ovalScalar,f=Math.PI/10*t.wobble,p=2*Math.PI,e.save(),e.translate(h,x),e.rotate(f),e.scale(u,g),e.arc(0,0,1,0,p,void 0),e.restore());else if("star"===t.shape)for(var R=Math.PI/2*3,P=4*t.scalar,A=8*t.scalar,z=t.x,F=t.y,L=5,D=Math.PI/5;L--;)z=t.x+Math.cos(R)*A,F=t.y+Math.sin(R)*A,e.lineTo(z,F),R+=D,z=t.x+Math.cos(R)*P,F=t.y+Math.sin(R)*P,e.lineTo(z,F),R+=D;else e.moveTo(Math.floor(t.x),Math.floor(t.y)),e.lineTo(Math.floor(t.wobbleX),Math.floor(y)),e.lineTo(Math.floor(N),Math.floor(C)),e.lineTo(Math.floor(v),Math.floor(t.wobbleY));return e.closePath(),e.fill(),t.tick<t.totalTicks}(x,e)})).length?c=v.frame(e):t()}),d=t}),(n={addFettis:function(e){return h=h.concat(e),u},canvas:o,promise:u,reset:function(){c&&v.cancel(c),d&&d()}}).promise)}(s,p,N)}return u.reset=function(){d&&d.reset(),n&&n.reset()},u}function R(){return g||(g=I(null,{useWorker:!0,resize:!0})),g}s.exports=function(){return R().apply(this,arguments)},s.exports.reset=function(){R().reset()},s.exports.create=I,s.exports.shapeFromPath=function(e){if(!b)throw Error("path confetti are not supported in this browser");"string"==typeof e?a=e:(a=e.path,r=e.matrix);var t=new Path2D(a),s=document.createElement("canvas").getContext("2d");if(!r){for(var a,r,n,i,l=1e3,o=1e3,c=0,d=0,m=0;m<1e3;m+=2)for(var h=0;h<1e3;h+=2)s.isPointInPath(t,m,h,"nonzero")&&(l=Math.min(l,m),o=Math.min(o,h),c=Math.max(c,m),d=Math.max(d,h));n=c-l;var x=Math.min(10/n,10/(i=d-o));r=[x,0,0,x,-Math.round(n/2+l)*x,-Math.round(i/2+o)*x]}return{type:"path",path:a,matrix:r}},s.exports.shapeFromText=function(e){var t,s=1,a="#000000",r='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';"string"==typeof e?t=e:(t=e.text,s="scalar"in e?e.scalar:s,r="fontFamily"in e?e.fontFamily:r,a="color"in e?e.color:a);var n=10*s,i=""+n+"px "+r,l=new OffscreenCanvas(n,n),o=l.getContext("2d");o.font=i;var c=o.measureText(t),d=Math.ceil(c.actualBoundingBoxRight+c.actualBoundingBoxLeft),m=Math.ceil(c.actualBoundingBoxAscent+c.actualBoundingBoxDescent),h=c.actualBoundingBoxLeft+2,x=c.actualBoundingBoxAscent+2;d+=4,m+=4,(o=(l=new OffscreenCanvas(d,m)).getContext("2d")).font=i,o.fillStyle=a,o.fillText(t,h,x);var u=1/s;return{type:"bitmap",bitmap:l.transferToImageBitmap(),matrix:[u,0,0,u,-d*u/2,-m*u/2]}}}(function(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:this||{}}(),L,!1);let D=L.exports;function O({event:e,answers:s=[],onViewResults:r,onSubmitAnother:n,onEditResponse:i}){let[l,o]=(0,b.useState)(!1),[c,d]=(0,b.useState)(null);(0,b.useEffect)(()=>{if("quiz"===e.type&&s.length>0){var t;let a,r,n,i,l,o,c;d((a=0,r=0,n=0,i=0,e.sections.forEach(e=>{e.components.forEach(e=>{let t=e.settings;if(void 0!==t.points&&t.points>0){i++,a+=t.points;let l=s.find(t=>t.componentId===e.id);if(l){let e=function(e,t,s){if(!s||null==t)return!1;switch(e){case"single_choice":case"yes_no":return String(t).toLowerCase()===String(s).toLowerCase();case"multiple_choice":if(!Array.isArray(t)||!Array.isArray(s)||t.length!==s.length)return!1;let a=[...t].sort(),r=[...s].sort();return a.every((e,t)=>String(e).toLowerCase()===String(r[t]).toLowerCase());case"short_text":case"long_text":return String(t).trim().toLowerCase()===String(s).trim().toLowerCase();case"number":return Number(t)===Number(s);default:return!1}}(t.questionType,l.answer,t.correctAnswer);e&&(r+=t.points,n++),l.isCorrect=e,l.pointsEarned=e?t.points:0}}})}),o=(l=a>0?r/a*100:0)>=50,c=(t=l)>=95?"A+":t>=90?"A":t>=85?"B+":t>=80?"B":t>=75?"C+":t>=70?"C":t>=65?"D+":t>=60?"D":t>=50?"E":"F",{totalPoints:a,earnedPoints:r,percentage:Math.round(100*l)/100,grade:c,passed:o}))}},[e,s]),(0,b.useEffect)(()=>{D({particleCount:100,spread:70,origin:{y:.6}})},[]);let m=e.settings.thankYouMessage||"Ø´ÙƒØ±Ø§Ù‹ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙƒ! ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­.",x="quiz"===e.type,u=x&&e.settings.showResults&&c;if(l&&u){var g,f;let r,l,d,m,x,u,b=(r=(f=g=c.percentage)>=95?{title:"Ù…Ù…ØªØ§Ø² Ø¬Ø¯Ø§Ù‹! ðŸŒŸ",message:"Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹! Ù„Ù‚Ø¯ Ø­Ù‚Ù‚Øª Ù†ØªÙŠØ¬Ø© Ø§Ø³ØªØ«Ù†Ø§Ø¦ÙŠØ©.",emoji:"ðŸŽ‰"}:f>=85?{title:"Ù…Ù…ØªØ§Ø²! ðŸŽ¯",message:"Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹! Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªÙ…ÙŠØ².",emoji:"âœ¨"}:f>=75?{title:"Ø¬ÙŠØ¯ Ø¬Ø¯Ø§Ù‹! ðŸ‘",message:"Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯! Ø£Ù†Øª Ø¹Ù„Ù‰ Ø§Ù„Ø·Ø±ÙŠÙ‚ Ø§Ù„ØµØ­ÙŠØ­.",emoji:"ðŸ’ª"}:f>=65?{title:"Ø¬ÙŠØ¯! ðŸ‘",message:"Ø£Ø¯Ø§Ø¡ Ù…Ù‚Ø¨ÙˆÙ„ØŒ ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø³ÙŠÙ†Ù‡ Ø£ÙƒØ«Ø±.",emoji:"ðŸ“ˆ"}:f>=50?{title:"Ù…Ù‚Ø¨ÙˆÙ„ ðŸ“",message:"Ù„Ù‚Ø¯ Ù†Ø¬Ø­ØªØŒ Ù„ÙƒÙ† Ù‡Ù†Ø§Ùƒ Ù…Ø¬Ø§Ù„ Ù„Ù„ØªØ­Ø³ÙŠÙ†.",emoji:"ðŸ’¡"}:{title:"ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ† ðŸ“š",message:"Ù„Ø§ ØªÙ‚Ù„Ù‚ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ ÙˆØ§Ù„ØªØ­Ø³Ù†.",emoji:"ðŸ”„"},g>=80?{title:r.title,message:e.settings.successMessage||r.message}:g>=50?{title:r.title,message:e.settings.goodMessage||r.message}:{title:r.title,message:e.settings.improvementMessage||r.message}),w=(l=0,d=0,m=0,x=0,e.sections.forEach(e=>{e.components.forEach(e=>{let t=e.settings;if(void 0!==t.points&&t.points>0){l++;let t=s.find(t=>t.componentId===e.id);t&&void 0!==t.answer&&null!==t.answer&&""!==t.answer&&(d++,t.isCorrect?m++:x++)}})}),u=l-d,{totalQuestions:l,answeredQuestions:d,correctAnswers:m,incorrectAnswers:x,skippedQuestions:u});return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-gradient-to-r from-[#1a56db] to-[#0ea5e9] rounded-2xl shadow-xl p-8 md:p-12 text-center text-white",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(A.Trophy,{className:"w-12 h-12 text-white"})}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold mb-4",children:b.title}),(0,t.jsx)("p",{className:"text-white/95 text-lg leading-relaxed max-w-2xl mx-auto",children:b.message})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 md:p-12",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-32 h-32 rounded-full bg-gradient-to-br from-[#1a56db] to-[#0ea5e9] text-white mb-6 shadow-lg",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"text-4xl font-bold",children:[Math.round(c.percentage),"%"]}),(0,t.jsx)("div",{className:"text-sm opacity-90",children:"Ø§Ù„Ù†Ø³Ø¨Ø©"})]})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Ù†ØªÙŠØ¬ØªÙƒ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©"}),(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-3xl font-bold text-gray-900",children:[(0,t.jsx)("span",{className:"text-[#1a56db]",children:c.earnedPoints}),(0,t.jsx)("span",{className:"text-gray-400",children:"/"}),(0,t.jsx)("span",{className:"text-gray-600",children:c.totalPoints})]}),(0,t.jsxs)("p",{className:"text-gray-600 mt-2",children:["Ø¯Ø±Ø¬Ø© ",c.grade]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[(0,t.jsxs)("div",{className:"text-center p-4 bg-blue-50 rounded-xl border-2 border-blue-100",children:[(0,t.jsx)(h.Target,{className:"w-6 h-6 text-[#1a56db] mx-auto mb-2"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:w.totalQuestions}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-xl border-2 border-green-100",children:[(0,t.jsx)(C.CheckCircle,{className:"w-6 h-6 text-green-600 mx-auto mb-2"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-green-600",children:w.correctAnswers}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Ø¥Ø¬Ø§Ø¨Ø§Øª ØµØ­ÙŠØ­Ø©"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-xl border-2 border-red-100",children:[(0,t.jsx)("div",{className:"w-6 h-6 rounded-full bg-red-600 text-white flex items-center justify-center mx-auto mb-2 text-sm font-bold",children:"âœ•"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:w.incorrectAnswers}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"Ø¥Ø¬Ø§Ø¨Ø§Øª Ø®Ø§Ø·Ø¦Ø©"})]}),(0,t.jsxs)("div",{className:"text-center p-4 bg-gray-50 rounded-xl border-2 border-gray-100",children:[(0,t.jsx)(F.TrendingUp,{className:"w-6 h-6 text-gray-600 mx-auto mb-2"}),(0,t.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:w.answeredQuestions}),(0,t.jsx)("div",{className:"text-sm text-gray-600",children:"ØªÙ… Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©"})]})]}),(0,t.jsx)("div",{className:`p-4 rounded-xl text-center ${c.passed?"bg-green-50 border-2 border-green-200":"bg-red-50 border-2 border-red-200"}`,children:(0,t.jsx)("div",{className:"flex items-center justify-center gap-2",children:c.passed?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(z.Award,{className:"w-6 h-6 text-green-600"}),(0,t.jsx)("span",{className:"text-lg font-bold text-green-900",children:"Ù†Ø§Ø¬Ø­ âœ“"})]}):(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("span",{className:"text-lg font-bold text-red-900",children:"ÙŠØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ØªØ­Ø³ÙŠÙ†"})})})}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center mt-8",children:[(0,t.jsxs)(p.Button,{size:"lg",onClick:()=>o(!1),className:"w-full sm:w-auto bg-[#1a56db] hover:bg-[#1a56db]/90",children:[(0,t.jsx)(C.CheckCircle,{className:"w-5 h-5 mr-2"}),"Ø±Ø§Ø¦Ø¹!"]}),e.settings.allowMultipleResponses&&n&&(0,t.jsxs)(p.Button,{size:"lg",variant:"outline",onClick:n,className:"w-full sm:w-auto",children:[(0,t.jsx)(R.RefreshCw,{className:"w-5 h-5 mr-2"}),"Ù…Ø­Ø§ÙˆÙ„Ø© Ø£Ø®Ø±Ù‰"]}),e.settings.allowEdit&&i&&(0,t.jsxs)(p.Button,{size:"lg",variant:"outline",onClick:i,className:"w-full sm:w-auto",children:[(0,t.jsx)(T.Edit,{className:"w-5 h-5 mr-2"}),"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¯"]}),(0,t.jsx)(p.Button,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:(0,t.jsxs)(a.default,{href:"/",children:[(0,t.jsx)(P.Home,{className:"w-5 h-5 mr-2"}),"Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"]})})]})]})]})}return(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 md:p-12 text-center",children:[(0,t.jsx)("div",{className:"w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 animate-bounce",children:(0,t.jsx)(C.CheckCircle,{className:"w-12 h-12 text-green-600"})}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:x?"ØªÙ… Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­!":"ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!"}),(0,t.jsx)("p",{className:"text-gray-600 text-lg leading-relaxed mb-8 max-w-2xl mx-auto",children:m}),(0,t.jsx)("div",{className:"w-24 h-1 bg-gradient-to-r from-primary to-blue-600 rounded-full mx-auto mb-8"}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[u&&(0,t.jsxs)(p.Button,{size:"lg",onClick:()=>o(!0),className:"w-full sm:w-auto bg-[#1a56db] hover:bg-[#1a56db]/90",children:[(0,t.jsx)(I.BarChart3,{className:"w-5 h-5 mr-2"}),"Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬"]}),!x&&e.settings.showResults&&r&&(0,t.jsxs)(p.Button,{size:"lg",onClick:r,className:"w-full sm:w-auto",children:[(0,t.jsx)(I.BarChart3,{className:"w-5 h-5 mr-2"}),"Ø¹Ø±Ø¶ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª"]}),e.settings.allowMultipleResponses&&n&&(0,t.jsxs)(p.Button,{size:"lg",variant:"outline",onClick:n,className:"w-full sm:w-auto",children:[(0,t.jsx)(R.RefreshCw,{className:"w-5 h-5 mr-2"}),"Ø¥Ø±Ø³Ø§Ù„ Ø±Ø¯ Ø¢Ø®Ø±"]}),e.settings.allowEdit&&i&&(0,t.jsxs)(p.Button,{size:"lg",variant:"outline",onClick:i,className:"w-full sm:w-auto",children:[(0,t.jsx)(T.Edit,{className:"w-5 h-5 mr-2"}),"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¯"]}),(0,t.jsx)(p.Button,{size:"lg",variant:"outline",asChild:!0,className:"w-full sm:w-auto",children:(0,t.jsxs)(a.default,{href:"/",children:[(0,t.jsx)(P.Home,{className:"w-5 h-5 mr-2"}),"Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"]})})]}),(0,t.jsx)("div",{className:"mt-12 pt-8 border-t border-gray-200",children:(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ù†Ø³Ø®Ø© Ù…Ù† Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ (Ø¥Ù† ÙˆÙØ¬Ø¯)"})})]})}L.exports.create,e.i(50270);var q=e.i(73684);function $({event:e,participantInfo:s,isPreviewMode:a=!1}){let{user:r}=(0,v.useAuthStore)(),{toast:n}=(0,j.useToast)(),i=(0,y.useRouter)(),[l,o]=(0,b.useState)(0),[c,d]=(0,b.useState)([]),[m,h]=(0,b.useState)(!1),[x,u]=(0,b.useState)(!1),[g]=(0,b.useState)(new Date),[f,k]=(0,b.useState)(null),[I,R]=(0,b.useState)(!1),[P,A]=(0,b.useState)(!1),[z,F]=(0,b.useState)(""),[L,D]=(0,b.useState)(null),[$,U]=(0,b.useState)(!1),[_,H]=(0,b.useState)(!1),V=e.sections&&e.sections.length>0,Y=V?e.sections[l]:null,Z=!V||l===e.sections.length-1,W=0===l,X=V?(l+1)/e.sections.length*100:0,K=(0,b.useRef)(!1),Q=(0,b.useRef)(!1);(0,b.useEffect)(()=>{let t=async()=>{if(K.current||a||f)return;let t=s||{userId:r?.id,name:r?.name,email:r?.email,phone:r?.phone},n=e.settings?.requireAuth===!0,i=t.name||t.email||t.userId;if(n&&!i){console.log("â³ Event requires participant info, waiting..."),Q.current=!0;return}Q.current&&i&&(console.log("âœ… Participant info received!"),Q.current=!1),K.current=!0,R(!0);try{console.log("ðŸ“¤ Starting response with participant info:",t);let s=await q.responsesService.startResponse(e.id,t);k(s.id),console.log("âœ… Response started:",s.id)}catch(a){console.error("âŒ Failed to start response:",a);let s=a?.message||"";if(s.includes("Ù…Ø³Ø¨Ù‚Ø§Ù‹")||s.includes("Ù…Ø³Ø¨Ù‚")){if(A(!0),F(s),e.settings?.allowEdit)try{let s=t?.email||r?.email;if(s){let t=await q.responsesService.getExistingResponse(e.id,s);t&&D(t.id)}}catch(e){console.error("Failed to fetch existing response:",e)}return}K.current=!1}finally{R(!1)}};V&&t()},[e.id,e.settings?.requireAuth,a,V,s,r]);let G=async()=>{if(L){H(!0);try{let t=s?.email||r?.email;if(!t)return void n({title:"Ø®Ø·Ø£",description:"Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ",variant:"destructive"});let a=await q.responsesService.getExistingResponse(e.id,t);a&&(d(a.answers||[]),k(a.id),U(!0),A(!1),o(0))}catch(e){console.error("Failed to load existing response:",e),n({title:"Ø®Ø·Ø£",description:"ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø±Ø¯ Ø§Ù„Ø³Ø§Ø¨Ù‚",variant:"destructive"})}finally{H(!1)}}};if(P)return(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,t.jsx)("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,t.jsx)(C.CheckCircle,{className:"w-10 h-10 text-blue-600"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ù„Ù‚Ø¯ Ø´Ø§Ø±ÙƒØª ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø« Ù…Ø³Ø¨Ù‚Ø§Ù‹"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:z||"Ø´ÙƒØ±Ø§Ù‹ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙƒ Ø§Ù„Ø³Ø§Ø¨Ù‚Ø©! Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø« Ù„Ø§ ÙŠØ³Ù…Ø­ Ø¨ØªÙ‚Ø¯ÙŠÙ… Ø£ÙƒØ«Ø± Ù…Ù† Ø±Ø¯ ÙˆØ§Ø­Ø¯."}),(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[e.settings?.allowEdit&&L&&(0,t.jsx)(p.Button,{onClick:G,disabled:_,className:"w-full sm:w-auto sm:min-w-[200px]",children:_?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Loader2,{className:"w-4 h-4 animate-spin ml-2"}),"Ø¬Ø§Ø±Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„..."]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(T.Edit,{className:"w-4 h-4 ml-2"}),"ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¯"]})}),(0,t.jsx)(p.Button,{variant:"outline",onClick:()=>i.push("/"),className:"w-full sm:w-auto sm:min-w-[200px]",children:"Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©"})]})]});if(!V)return(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,t.jsx)(E.AlertCircle,{className:"w-8 h-8 text-yellow-600"})}),(0,t.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Ø§Ù„Ø­Ø¯Ø« ØºÙŠØ± Ù…ÙƒØªÙ…Ù„"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø« Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø£ÙŠ Ø£Ù‚Ø³Ø§Ù… Ø£Ùˆ Ø£Ø³Ø¦Ù„Ø© Ø¨Ø¹Ø¯. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ù…Ù†Ø´Ø¦ Ø§Ù„Ø­Ø¯Ø«."})]});let J=(()=>{switch(e.type){case"quiz":return{containerClass:"bg-gradient-to-b from-gray-50 to-white",cardClass:"border border-gray-200 shadow-sm",headerClass:"bg-gradient-to-r from-[#1a56db] to-[#0ea5e9] text-white",buttonClass:"bg-[#1a56db] hover:bg-[#1a56db]/90 text-white shadow-md hover:shadow-lg transition-all",progressColor:"text-[#1a56db]"};case"poll":return{containerClass:"bg-gradient-to-br from-green-50 to-emerald-50",cardClass:"border border-green-200 shadow-md",headerClass:"bg-green-600 text-white",buttonClass:"bg-green-600 hover:bg-green-700",progressColor:"text-green-600"};case"form":return{containerClass:"bg-gray-50",cardClass:"border border-gray-200 shadow-sm",headerClass:"bg-gray-700 text-white",buttonClass:"bg-gray-700 hover:bg-gray-800",progressColor:"text-gray-700"};default:return{containerClass:"bg-gradient-to-br from-blue-50 via-white to-purple-50",cardClass:"border border-gray-200 shadow-md",headerClass:"bg-primary text-white",buttonClass:"bg-primary hover:bg-primary/90",progressColor:"text-primary"}}})(),ee=Y?c.filter(e=>Y.components.some(t=>t.id===e.componentId)):[],et=()=>!!Y&&Y.components.filter(e=>e.settings.required).every(e=>c.some(t=>t.componentId===e.id&&t.answer)),es=async()=>{h(!0);try{let t=s||{userId:r?.id,name:r?.name,email:r?.email,phone:r?.phone},a=f;$&&a?(console.log("ðŸ“¤ Updating response answers..."),await q.responsesService.updateResponseAnswers(a,c),console.log("âœ… Response updated successfully!"),U(!1)):(a||(console.log("ðŸ“¤ Starting response on backend..."),a=(await q.responsesService.startResponse(e.id,t)).id,k(a),console.log("âœ… Response started:",a)),console.log("ðŸ“¤ Completing response with answers:",c),await q.responsesService.completeResponse(a,c),console.log("âœ… Response completed successfully!")),u(!0),n({title:$?"ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±Ø¯ Ø¨Ù†Ø¬Ø§Ø­!":"ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø¨Ù†Ø¬Ø§Ø­!",description:$?"ØªÙ… Ø­ÙØ¸ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„Ø§Øª Ø¨Ù†Ø¬Ø§Ø­":"Ø´ÙƒØ±Ø§Ù‹ Ù„Ù…Ø´Ø§Ø±ÙƒØªÙƒØŒ ØªÙ… Ø§Ø³ØªÙ„Ø§Ù… Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø¨Ù†Ø¬Ø§Ø­"})}catch(e){console.error("âŒ Error submitting response:",e),n({title:"Ø®Ø·Ø£",description:"Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§ØªØŒ ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰",variant:"destructive"})}finally{h(!1)}};return x?(0,t.jsx)(O,{event:e,answers:c,onViewResults:()=>{console.log("View results")},onSubmitAnother:()=>{e.settings.allowMultipleResponses?(u(!1),o(0),d([]),k(null),K.current=!1):n({title:"ØªÙ†Ø¨ÙŠÙ‡",description:"Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø« Ù„Ø§ ÙŠØ³Ù…Ø­ Ø¨Ø±Ø¯ÙˆØ¯ Ù…ØªØ¹Ø¯Ø¯Ø©",variant:"destructive"})},onEditResponse:()=>{e.settings.allowEdit?(u(!1),o(0),U(!0)):n({title:"ØªÙ†Ø¨ÙŠÙ‡",description:"Ù‡Ø°Ø§ Ø§Ù„Ø­Ø¯Ø« Ù„Ø§ ÙŠØ³Ù…Ø­ Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ø±Ø¯ÙˆØ¯",variant:"destructive"})}}):(0,t.jsxs)("div",{className:`space-y-6 ${J.containerClass} p-4 md:p-6 rounded-2xl`,children:[e.settings.showProgressBar&&(0,t.jsxs)("div",{className:`bg-white ${J.cardClass} rounded-xl p-6 shadow-md`,children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("span",{className:"text-sm font-bold text-gray-800",children:"quiz"===e.type?`Ø§Ù„Ø³Ø¤Ø§Ù„ ${l+1} Ù…Ù† ${e.sections.length}`:`Ø§Ù„Ù‚Ø³Ù… ${l+1} Ù…Ù† ${e.sections.length}`}),(0,t.jsxs)("span",{className:`text-sm font-bold ${J.progressColor}`,children:[Math.round(X),"%"]})]}),(0,t.jsx)(w.Progress,{value:X,className:"h-3"})]}),"quiz"===e.type&&Y&&(0,t.jsxs)("div",{className:`${J.headerClass} rounded-xl p-6 md:p-8 text-center shadow-lg`,children:[(0,t.jsx)("div",{className:"flex items-center justify-center gap-3 mb-3",children:(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-white/20 backdrop-blur-sm flex items-center justify-center border-2 border-white/30",children:(0,t.jsx)("span",{className:"text-white font-bold text-lg",children:l+1})})}),(0,t.jsx)("h2",{className:"text-2xl md:text-3xl font-bold mb-2",children:Y.title}),Y.description&&(0,t.jsx)("p",{className:"text-white/95 text-sm md:text-base max-w-2xl mx-auto",children:Y.description})]}),Y&&(0,t.jsx)(B,{section:Y,answers:ee,onAnswerChange:(e,t,s)=>{a||d(a=>{let r=a.findIndex(t=>t.componentId===e),n={componentId:e,componentType:t,answer:s,timeSpent:0,answeredAt:new Date().toISOString()};if(r>=0){let e=[...a];return e[r]=n,e}return[...a,n]})},eventType:e.type,isPreviewMode:a}),(0,t.jsx)("div",{className:`${J.cardClass} rounded-xl p-6`,children:(0,t.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,t.jsxs)(p.Button,{variant:"outline",size:"lg",onClick:()=>{W||(o(e=>e-1),window.scrollTo({top:0,behavior:"smooth"}))},disabled:W||m,className:"flex-1 md:flex-none",children:[(0,t.jsx)(M.ArrowRight,{className:"w-5 h-5 ml-2"}),"Ø§Ù„Ø³Ø§Ø¨Ù‚"]}),(0,t.jsx)(p.Button,{size:"lg",onClick:()=>{if(a){Z||(o(e=>e+1),window.scrollTo({top:0,behavior:"smooth"}));return}et()?Z?es():(o(e=>e+1),window.scrollTo({top:0,behavior:"smooth"})):n({title:"ØªÙ†Ø¨ÙŠÙ‡",description:"ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„Ù‰ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©",variant:"destructive"})},disabled:a?Z:!et()||m,className:`flex-1 md:flex-none md:min-w-[200px] ${J.buttonClass}`,children:a?Z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.CheckCircle,{className:"w-5 h-5 mr-2"}),"Ù…Ø¹Ø§ÙŠÙ†Ø© ÙÙ‚Ø·"]}):(0,t.jsxs)(t.Fragment,{children:["quiz"===e.type?"Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ":"Ø§Ù„ØªØ§Ù„ÙŠ",(0,t.jsx)(S.ArrowLeft,{className:"w-5 h-5 mr-2"})]}):m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(N.Loader2,{className:"w-5 h-5 mr-2 animate-spin"}),"Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„..."]}):Z?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(C.CheckCircle,{className:"w-5 h-5 mr-2"}),"quiz"===e.type?"Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±":"Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª"]}):(0,t.jsxs)(t.Fragment,{children:["quiz"===e.type?"Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ":"Ø§Ù„ØªØ§Ù„ÙŠ",(0,t.jsx)(S.ArrowLeft,{className:"w-5 h-5 mr-2"})]})})]})})]})}e.s(["default",()=>$],94244)}]);