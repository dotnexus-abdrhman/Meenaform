module.exports=[61626,a=>{"use strict";var b=a.i(21910),c=a.i(9765),d=a.i(61393),e=a.i(5742),f=a.i(86899),g=a.i(18747),h=a.i(64082),i=a.i(75983),j=a.i(70791),k=a.i(2995),l=a.i(68960),m=a.i(33270),n=a.i(10551),o=a.i(35032),p=a.i(91084),q=a.i(20226),r=a.i(11115),s=a.i(90960),t=a.i(19700),u=a.i(70712);let v=(0,u.default)("bookmark-plus",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}],["line",{x1:"12",x2:"12",y1:"7",y2:"13",key:"1cppfj"}],["line",{x1:"15",x2:"9",y1:"10",y2:"10",key:"1gty7f"}]]);var w=a.i(28675),x=a.i(47278),y=a.i(86312),z=a.i(47885);let A={survey:{label:"استبيان",color:"text-blue-600",bgColor:"bg-blue-50"},poll:{label:"استطلاع",color:"text-purple-600",bgColor:"bg-purple-50"},form:{label:"نموذج",color:"text-green-600",bgColor:"bg-green-50"},quiz:{label:"اختبار",color:"text-orange-600",bgColor:"bg-orange-50"}};function B({event:a,onDuplicate:c,onArchive:d,onDelete:e,onShare:f,onSaveAsTemplate:g,onPublish:h,onUnpublish:i}){let u=A[a.type];return(0,b.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-white to-purple-50 border-b border-gray-200",children:(0,b.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[(0,b.jsx)("div",{className:"mb-4",children:(0,b.jsxs)(y.default,{href:"/dashboard/events",className:"inline-flex items-center text-sm text-gray-600 hover:text-primary transition-colors",children:[(0,b.jsx)(l.ArrowRight,{className:"w-4 h-4 ml-1"}),"العودة إلى الأحداث"]})}),(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row lg:items-start lg:justify-between gap-6",children:[(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-3",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-lg text-gray-600 mb-4 max-w-3xl",children:a.description}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,b.jsx)(k.default,{status:a.status}),(0,b.jsx)("span",{className:`inline-flex items-center gap-1 text-sm px-3 py-1 rounded-full ${u.bgColor} ${u.color} font-medium`,children:u.label}),a.sections&&a.sections.length>0&&(0,b.jsxs)("span",{className:"inline-flex items-center gap-1 text-sm px-3 py-1 rounded-full bg-gray-100 text-gray-700 font-medium",children:[a.sections.length," قسم"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-2 md:gap-3",children:["draft"===a.status&&h&&(0,b.jsxs)(j.Button,{onClick:h,size:"lg",className:"bg-green-600 hover:bg-green-700 shadow-lg shadow-green-600/30",children:[(0,b.jsx)(w.Send,{className:"w-5 h-5 ml-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"نشر الحدث"}),(0,b.jsx)("span",{className:"sm:hidden",children:"نشر"})]}),"active"===a.status&&i&&(0,b.jsxs)(j.Button,{onClick:i,variant:"outline",size:"lg",className:"hover:bg-yellow-50 hover:border-yellow-500 hover:text-yellow-700",children:[(0,b.jsx)(x.FileText,{className:"w-5 h-5 ml-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"تحويل لمسودة"}),(0,b.jsx)("span",{className:"sm:hidden",children:"مسودة"})]}),(0,b.jsx)(j.Button,{asChild:!0,variant:"outline",size:"lg",className:"hidden md:inline-flex hover:bg-purple-50 hover:border-purple-500 hover:text-purple-600",children:(0,b.jsxs)(y.default,{href:`/dashboard/events/${a.id}/results`,children:[(0,b.jsx)(t.BarChart3,{className:"w-5 h-5 ml-2"}),"عرض النتائج"]})}),(0,b.jsx)(j.Button,{asChild:!0,variant:"outline",size:"lg",className:"hidden md:inline-flex hover:bg-primary/5 hover:border-primary",children:(0,b.jsxs)(y.default,{href:`/preview/${a.id}`,target:"_blank",children:[(0,b.jsx)(s.Eye,{className:"w-5 h-5 ml-2"}),"معاينة"]})}),(0,b.jsx)(j.Button,{asChild:!0,size:"lg",className:"bg-primary hover:bg-primary/90 shadow-lg shadow-primary/30",children:(0,b.jsxs)(y.default,{href:`/dashboard/events/${a.id}/edit`,children:[(0,b.jsx)(m.Edit,{className:"w-5 h-5 ml-2"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"تعديل"})]})}),(0,b.jsxs)(j.Button,{onClick:f,variant:"outline",size:"lg",className:"hidden md:inline-flex hover:bg-green-50 hover:border-green-500 hover:text-green-600",children:[(0,b.jsx)(n.Share2,{className:"w-5 h-5 ml-2"}),"مشاركة"]}),(0,b.jsxs)(z.DropdownMenu,{children:[(0,b.jsx)(z.DropdownMenuTrigger,{asChild:!0,children:(0,b.jsx)(j.Button,{variant:"outline",size:"lg",className:"px-3",children:(0,b.jsx)(r.MoreVertical,{className:"w-5 h-5"})})}),(0,b.jsxs)(z.DropdownMenuContent,{align:"end",className:"w-48",children:[(0,b.jsx)(z.DropdownMenuItem,{asChild:!0,className:"md:hidden",children:(0,b.jsxs)(y.default,{href:`/dashboard/events/${a.id}/results`,children:[(0,b.jsx)(t.BarChart3,{className:"w-4 h-4 ml-2"}),"عرض النتائج"]})}),(0,b.jsx)(z.DropdownMenuItem,{asChild:!0,className:"md:hidden",children:(0,b.jsxs)(y.default,{href:`/preview/${a.id}`,target:"_blank",children:[(0,b.jsx)(s.Eye,{className:"w-4 h-4 ml-2"}),"معاينة"]})}),(0,b.jsxs)(z.DropdownMenuItem,{onClick:f,className:"md:hidden",children:[(0,b.jsx)(n.Share2,{className:"w-4 h-4 ml-2"}),"مشاركة"]}),(0,b.jsx)(z.DropdownMenuSeparator,{className:"md:hidden"}),(0,b.jsxs)(z.DropdownMenuItem,{onClick:g,children:[(0,b.jsx)(v,{className:"w-4 h-4 ml-2"}),"حفظ كقالب"]}),(0,b.jsxs)(z.DropdownMenuItem,{onClick:c,children:[(0,b.jsx)(o.Copy,{className:"w-4 h-4 ml-2"}),"نسخ الحدث"]}),(0,b.jsx)(z.DropdownMenuSeparator,{}),(0,b.jsxs)(z.DropdownMenuItem,{onClick:d,children:[(0,b.jsx)(p.Archive,{className:"w-4 h-4 ml-2"}),"أرشفة"]}),(0,b.jsxs)(z.DropdownMenuItem,{onClick:e,className:"text-red-600 focus:text-red-600",children:[(0,b.jsx)(q.Trash2,{className:"w-4 h-4 ml-2"}),"حذف"]})]})]})]})]})]})})}var C=a.i(84578),D=a.i(36609),E=a.i(6562),F=a.i(80950),G=a.i(14833),H=a.i(32884),I=a.i(93929),J=a.i(17468);function K({event:a}){let c=[{icon:D.Calendar,label:"تاريخ الإنشاء",value:(0,I.format)(new Date(a.createdAt),"d MMMM yyyy",{locale:J.ar})},{icon:E.Clock,label:"آخر تحديث",value:(0,I.format)(new Date(a.updatedAt),"d MMMM yyyy",{locale:J.ar})},...a.startDate?[{icon:D.Calendar,label:"تاريخ البداية",value:(0,I.format)(new Date(a.startDate),"d MMMM yyyy",{locale:J.ar})}]:[],...a.endDate?[{icon:D.Calendar,label:"تاريخ النهاية",value:(0,I.format)(new Date(a.endDate),"d MMMM yyyy",{locale:J.ar})}]:[],{icon:x.FileText,label:"عدد الأقسام",value:`${a.sections?.length||0} قسم`},{icon:F.Settings,label:"يتطلب تسجيل دخول",value:a.settings.requireAuth?"نعم":"لا",icon2:a.settings.requireAuth?G.CheckCircle:H.XCircle,color:a.settings.requireAuth?"text-green-600":"text-gray-400"},{icon:F.Settings,label:"السماح بتعديل الردود",value:a.settings.allowEdit?"نعم":"لا",icon2:a.settings.allowEdit?G.CheckCircle:H.XCircle,color:a.settings.allowEdit?"text-green-600":"text-gray-400"},{icon:F.Settings,label:"عرض النتائج للمشاركين",value:a.settings.showResults?"نعم":"لا",icon2:a.settings.showResults?G.CheckCircle:H.XCircle,color:a.settings.showResults?"text-green-600":"text-gray-400"}];return(0,b.jsxs)(C.Card,{className:"p-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"معلومات الحدث"}),(0,b.jsx)("div",{className:"space-y-4",children:c.map((a,c)=>{let d=a.icon,e=a.icon2;return(0,b.jsxs)("div",{className:"flex items-center justify-between py-3 border-b border-gray-100 last:border-0",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-gray-50",children:(0,b.jsx)(d,{className:"w-5 h-5 text-gray-600"})}),(0,b.jsx)("span",{className:"text-sm text-gray-600",children:a.label})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:a.value}),e&&(0,b.jsx)(e,{className:`w-4 h-4 ${a.color||"text-gray-400"}`})]})]},c)})})]})}var L=a.i(77825),M=a.i(35754);let N=(0,u.default)("qr-code",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);function O({shareCode:a,eventTitle:d}){let e=(0,c.useRef)(null),f=`https://event-meena.com/e/${a}`;return(0,b.jsxs)(C.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(N,{className:"w-5 h-5 text-primary"})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"رمز QR للحدث"})]}),(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{ref:e,className:"inline-flex p-6 bg-white rounded-xl border-2 border-gray-200 mb-4",children:(0,b.jsx)(L.QRCodeSVG,{value:f,size:200,level:"H",includeMargin:!1,fgColor:"#1a56db"})}),(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:"امسح رمز QR للوصول المباشر إلى الحدث"}),(0,b.jsxs)(j.Button,{onClick:()=>{if(!e.current)return;let b=e.current.querySelector("svg");if(!b)return;let c=document.createElement("canvas"),d=c.getContext("2d");if(!d)return;let f=new XMLSerializer().serializeToString(b),g=new Image,h=new Blob([f],{type:"image/svg+xml;charset=utf-8"}),i=URL.createObjectURL(h);g.onload=()=>{c.width=g.width,c.height=g.height,d.drawImage(g,0,0),URL.revokeObjectURL(i),c.toBlob(b=>{if(!b)return;let c=document.createElement("a");c.download=`qr-code-${a}.png`,c.href=URL.createObjectURL(b),c.click(),URL.revokeObjectURL(c.href)})},g.src=i},variant:"outline",className:"w-full hover:bg-primary/5 hover:border-primary",children:[(0,b.jsx)(M.Download,{className:"w-4 h-4 ml-2"}),"تحميل رمز QR"]})]})]})}var P=a.i(32476),Q=a.i(19488),R=a.i(41987),S=a.i(86632);function T({shareCode:a}){let[d,e]=(0,c.useState)(!1),{toast:f}=(0,h.useToast)(),g=`https://event-meena.com/e/${a}`,i=async()=>{try{await navigator.clipboard.writeText(g),e(!0),f({title:"تم النسخ!",description:"تم نسخ رابط الحدث إلى الحافظة"}),setTimeout(()=>e(!1),2e3)}catch(a){f({title:"خطأ",description:"فشل نسخ الرابط",variant:"destructive"})}};return(0,b.jsxs)(C.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-green-50",children:(0,b.jsx)(Q.Link2,{className:"w-5 h-5 text-green-600"})}),(0,b.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"رابط الحدث العام"})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)(P.Input,{value:g,readOnly:!0,className:"flex-1 bg-gray-50 font-mono text-sm",dir:"ltr"}),(0,b.jsx)(j.Button,{onClick:i,variant:"outline",className:`px-4 ${d?"bg-green-50 border-green-500 text-green-600":"hover:bg-primary/5 hover:border-primary"}`,children:d?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(R.Check,{className:"w-4 h-4 ml-2"}),"تم النسخ"]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(o.Copy,{className:"w-4 h-4 ml-2"}),"نسخ"]})})]}),(0,b.jsxs)(j.Button,{onClick:()=>{window.open(g,"_blank")},variant:"outline",className:"w-full hover:bg-blue-50 hover:border-blue-500 hover:text-blue-600",children:[(0,b.jsx)(S.ExternalLink,{className:"w-4 h-4 ml-2"}),"فتح في نافذة جديدة"]}),(0,b.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"شارك هذا الرابط مع المشاركين للوصول إلى الحدث"})]})]})}var U=a.i(70133),V=a.i(21914),W=a.i(27308),X=a.i(81437),Y=a.i(65049),Z=a.i(15247),$=a.i(42370),_=a.i(90072),aa=a.i(66691);let ab={question:{label:"سؤال",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},rating:{label:"تقييم",icon:V.Star,color:"text-yellow-600",bgColor:"bg-yellow-50"},pdf_upload:{label:"رفع PDF",icon:W.Upload,color:"text-red-600",bgColor:"bg-red-50"},image_upload:{label:"رفع صورة",icon:X.Image,color:"text-green-600",bgColor:"bg-green-50"},video_upload:{label:"رفع فيديو",icon:Y.Video,color:"text-purple-600",bgColor:"bg-purple-50"},link:{label:"رابط",icon:Q.Link2,color:"text-cyan-600",bgColor:"bg-cyan-50"},table:{label:"جدول",icon:Z.Table,color:"text-orange-600",bgColor:"bg-orange-50"},signature:{label:"توقيع",icon:$.PenTool,color:"text-pink-600",bgColor:"bg-pink-50"},text:{label:"نص",icon:_.Type,color:"text-gray-600",bgColor:"bg-gray-50"},display:{label:"عرض",icon:x.FileText,color:"text-indigo-600",bgColor:"bg-indigo-50"},short_text:{label:"نص قصير",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},long_text:{label:"نص طويل",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},single_choice:{label:"اختيار من متعدد",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},multiple_choice:{label:"اختيار متعدد",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},dropdown:{label:"قائمة منسدلة",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},yes_no:{label:"نعم/لا",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},linear_scale:{label:"مقياس خطي",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},choice_grid:{label:"شبكة اختيارات",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},number:{label:"رقم",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},email:{label:"بريد إلكتروني",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},phone:{label:"رقم جوال",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},date:{label:"تاريخ",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"},time:{label:"وقت",icon:aa.HelpCircle,color:"text-blue-600",bgColor:"bg-blue-50"}};function ac({event:a}){return a.sections&&0!==a.sections.length?(0,b.jsxs)(C.Card,{className:"p-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,b.jsx)("div",{className:"p-2 rounded-lg bg-primary/10",children:(0,b.jsx)(U.Layers,{className:"w-5 h-5 text-primary"})}),(0,b.jsxs)("h3",{className:"text-xl font-bold text-gray-900",children:["أقسام الحدث (",a.sections.length,")"]})]}),(0,b.jsx)("div",{className:"space-y-4",children:a.sections.map((a,c)=>(0,b.jsxs)("div",{className:"p-4 rounded-lg border border-gray-200 hover:border-primary/30 hover:shadow-md transition-all",children:[(0,b.jsxs)("div",{className:"flex items-start gap-3 mb-3",children:[(0,b.jsx)("div",{className:"flex items-center justify-center w-8 h-8 rounded-full bg-primary text-white text-sm font-bold",children:c+1}),(0,b.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,b.jsx)("h4",{className:"text-lg font-semibold text-gray-900 mb-1",children:a.title}),a.description&&(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.description})]})]}),a.components&&a.components.length>0&&(0,b.jsxs)("div",{className:"mr-11 space-y-2",children:[(0,b.jsxs)("p",{className:"text-xs font-semibold text-gray-500 uppercase mb-2",children:["المكونات (",a.components.length,")"]}),(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:a.components.map(a=>{let c=ab[a.type]||{label:"مكون",icon:aa.HelpCircle,color:"text-gray-600",bgColor:"bg-gray-50"},d=c.icon;return(0,b.jsxs)("div",{className:`flex items-center gap-2 p-2 rounded-lg ${c.bgColor}`,children:[(0,b.jsx)(d,{className:`w-4 h-4 ${c.color}`}),(0,b.jsx)("span",{className:`text-sm font-medium ${c.color}`,children:c.label})]},a.id)})})]}),(!a.components||0===a.components.length)&&(0,b.jsx)("div",{className:"mr-11 text-sm text-gray-400 italic",children:"لا توجد مكونات في هذا القسم"})]},a.id))})]}):(0,b.jsxs)(C.Card,{className:"p-8 text-center",children:[(0,b.jsx)("div",{className:"inline-flex p-4 rounded-full bg-gray-100 mb-4",children:(0,b.jsx)(U.Layers,{className:"w-8 h-8 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"لا توجد أقسام بعد"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:"ابدأ بإضافة أقسام ومكونات إلى الحدث"})]})}var ad=a.i(82828),ae=a.i(72555),af=a.i(19631),ag=a.i(16550),ah=a.i(23511),ai=a.i(46017),aj=a.i(67763),ak=a.i(25560),al=a.i(34975);function am({event:a,open:d,onOpenChange:e}){let[f,g]=(0,c.useState)(a.title),[h,i]=(0,c.useState)(a.description||""),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(!1),o=(0,ai.useUserTemplatesStore)(a=>a.createTemplate),p=async b=>{if(b.preventDefault(),!f.trim())return void al.toast.error("الرجاء إدخال اسم القالب");l(!0);try{o({name:f.trim(),description:h.trim(),type:a.type,sections:a.sections,settings:a.settings,sourceEventId:a.id,sourceEventTitle:a.title,tags:[a.type]}),n(!0),al.toast.success("تم حفظ القالب بنجاح!",{description:"يمكنك الآن استخدام هذا القالب لإنشاء أحداث جديدة"}),setTimeout(()=>{e(!1),n(!1),g(a.title),i(a.description||"")},1500)}catch(a){console.error("Error creating template:",a),al.toast.error("حدث خطأ أثناء حفظ القالب")}finally{l(!1)}},q=()=>{k||(e(!1),n(!1),g(a.title),i(a.description||""))};return(0,b.jsx)(af.Dialog,{open:d,onOpenChange:q,children:(0,b.jsx)(af.DialogContent,{className:"sm:max-w-[550px]",children:m?(0,b.jsxs)("div",{className:"py-8 text-center",children:[(0,b.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 animate-bounce",children:(0,b.jsx)(ak.CheckCircle2,{className:"w-10 h-10 text-green-600"})}),(0,b.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"تم الحفظ بنجاح!"}),(0,b.jsx)("p",{className:"text-gray-600",children:"تم حفظ القالب في قوالبك الخاصة"})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(af.DialogHeader,{children:(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-amber-100 to-yellow-100 flex items-center justify-center",children:(0,b.jsx)(v,{className:"w-6 h-6 text-amber-600"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)(af.DialogTitle,{className:"text-xl",children:"حفظ كقالب مخصص"}),(0,b.jsx)(af.DialogDescription,{children:"احفظ هذا الحدث كقالب لإعادة استخدامه لاحقاً"})]})]})}),(0,b.jsxs)("form",{onSubmit:p,className:"space-y-5 mt-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(ag.Label,{htmlFor:"template-name",className:"text-base font-semibold",children:["اسم القالب ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(P.Input,{id:"template-name",value:f,onChange:a=>g(a.target.value),placeholder:"مثال: استبيان رضا العملاء",required:!0,className:"text-base"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)(ag.Label,{htmlFor:"template-description",className:"text-base font-semibold",children:["وصف القالب ",(0,b.jsx)("span",{className:"text-gray-400 text-sm",children:"(اختياري)"})]}),(0,b.jsx)(ah.Textarea,{id:"template-description",value:h,onChange:a=>i(a.target.value),placeholder:"وصف مختصر للقالب وكيفية استخدامه...",rows:3,className:"resize-none"})]}),(0,b.jsx)("div",{className:"bg-gradient-to-br from-blue-50 to-sky-50 border-2 border-blue-200 rounded-lg p-4",children:(0,b.jsxs)("div",{className:"flex items-start gap-3",children:[(0,b.jsx)(aj.Sparkles,{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,b.jsxs)("div",{className:"text-sm text-gray-700 space-y-1",children:[(0,b.jsx)("p",{className:"font-semibold text-blue-900",children:"سيتم حفظ:"}),(0,b.jsxs)("ul",{className:"list-disc list-inside space-y-0.5 mr-2",children:[(0,b.jsxs)("li",{children:["جميع الأقسام (",a.sections.length," قسم)"]}),(0,b.jsx)("li",{children:"جميع المكونات والأسئلة"}),(0,b.jsx)("li",{children:"الإعدادات والتخصيصات"}),(0,b.jsx)("li",{children:"رسائل الشكر والنتائج"})]})]})]})}),(0,b.jsxs)(af.DialogFooter,{className:"gap-2",children:[(0,b.jsx)(j.Button,{type:"button",variant:"outline",onClick:q,disabled:k,children:"إلغاء"}),(0,b.jsx)(j.Button,{type:"submit",disabled:k||!f.trim(),className:"bg-gradient-to-r from-amber-600 to-yellow-600 hover:from-amber-700 hover:to-yellow-700",children:k?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"جاري الحفظ..."]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(v,{className:"w-4 h-4 mr-2"}),"حفظ القالب"]})})]})]})]})})})}var an=a.i(99001);function ao(){let a=(0,d.useParams)(),e=(0,d.useRouter)(),{toast:j}=(0,h.useToast)(),k=a.id,{currentEvent:l,fetchEventById:m,deleteEvent:n,duplicateEvent:o,archiveEvent:p,updateEventStatus:q,isLoading:r,events:s}=(0,f.useEventsStore)(),{fetchContacts:t,fetchGroups:u}=(0,g.useContactsStore)(),[v,w]=(0,c.useState)(!1),[x,y]=(0,c.useState)(!1),[z,A]=(0,c.useState)(!1);(0,c.useEffect)(()=>{k&&(m(k),t(),u())},[k,m,t,u]);let C=async()=>{try{await n(k),w(!1),e.push("/dashboard/events")}catch(a){console.error("Error deleting event:",a)}},D=async()=>{try{let a=await o(k);j({title:"تم نسخ الحدث بنجاح",description:`تم إنشاء "${a.title}"`}),e.push("/dashboard/events")}catch(a){console.error("Error duplicating event:",a),j({title:"خطأ",description:"فشل في نسخ الحدث",variant:"destructive"})}},E=async()=>{try{await p(k),j({title:"تمت الأرشفة",description:"تم أرشفة الحدث بنجاح"}),e.push("/dashboard/events")}catch(a){console.error("Error archiving event:",a),j({title:"خطأ",description:"فشل في أرشفة الحدث",variant:"destructive"})}},F=async()=>{try{await q(k,"active"),j({title:"تم النشر",description:"تم نشر الحدث بنجاح وأصبح متاحاً للمشاركين"})}catch(a){console.error("Error publishing event:",a),j({title:"خطأ",description:"فشل في نشر الحدث",variant:"destructive"})}},G=async()=>{try{await q(k,"draft"),j({title:"تم التحويل",description:"تم تحويل الحدث إلى مسودة"})}catch(a){console.error("Error unpublishing event:",a),j({title:"خطأ",description:"فشل في تحويل الحدث إلى مسودة",variant:"destructive"})}};return r||!l?(0,b.jsx)(i.default,{children:(0,b.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsx)(an.default,{message:"جاري تحميل تفاصيل الحدث..."})})}):(0,b.jsxs)(i.default,{children:[(0,b.jsx)(B,{event:l,onDuplicate:D,onArchive:E,onDelete:()=>w(!0),onShare:()=>{y(!0)},onSaveAsTemplate:()=>A(!0),onPublish:F,onUnpublish:G}),(0,b.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsx)(K,{event:l}),(0,b.jsx)(ac,{event:l})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsx)(O,{shareCode:l.shareCode||"",eventTitle:l.title}),(0,b.jsx)(T,{shareCode:l.shareCode||""})]})]})}),(0,b.jsx)(ad.default,{open:v,onOpenChange:w,onConfirm:C,eventTitle:l.title}),(0,b.jsx)(ae.default,{open:x,onClose:()=>y(!1),eventId:k,eventTitle:l.title,eventUrl:`/events/${k}`}),(0,b.jsx)(am,{event:l,open:z,onOpenChange:A})]})}function ap(){return(0,b.jsx)(e.default,{children:(0,b.jsx)(ao,{})})}a.s(["default",()=>ap],61626)}];

//# sourceMappingURL=event-meena_app_dashboard_events_%5Bid%5D_page_tsx_d738d1a5._.js.map