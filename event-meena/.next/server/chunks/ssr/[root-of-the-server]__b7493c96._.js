module.exports=[64082,a=>{"use strict";function b(){return{toast:({title:a,description:b,variant:c})=>{let d=b?`${a}
${b}`:a;"destructive"===c?alert(`❌ ${d}`):alert(`✅ ${d}`)}}}a.s(["useToast",()=>b])},46195,a=>{"use strict";let b=(0,a.i(70712).default)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);a.s(["Search",()=>b],46195)},5742,47752,48041,a=>{"use strict";var b=a.i(21910),c=a.i(9765),d=a.i(61393),e=a.i(53377),f=a.i(69798);function g({children:a}){let g=(0,d.useRouter)(),{isAuthenticated:h,isLoading:i,checkAuth:j}=(0,f.useAuthStore)();return((0,c.useEffect)(()=>{j()},[j]),(0,c.useEffect)(()=>{i||h||g.push("/login")},[h,i,g]),i||!h)?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(e.Loader2,{className:"w-12 h-12 text-primary animate-spin mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"جاري التحقق من الجلسة..."})]})}):(0,b.jsx)(b.Fragment,{children:a})}a.s(["default",()=>g],5742);let h=(0,a.i(70712).default)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);a.s(["default",()=>h],47752),a.s(["ChevronRight",()=>h],48041)},79487,a=>{"use strict";let b=(0,a.i(70712).default)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);a.s(["Users",()=>b],79487)},80950,a=>{"use strict";let b=(0,a.i(70712).default)("settings",[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);a.s(["Settings",()=>b],80950)},84578,a=>{"use strict";var b=a.i(21910),c=a.i(92001);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardHeader",()=>e,"CardTitle",()=>f])},67763,a=>{"use strict";let b=(0,a.i(70712).default)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]);a.s(["Sparkles",()=>b],67763)},89517,a=>{"use strict";let b=(0,a.i(70712).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["default",()=>b])},18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},92439,85977,a=>{"use strict";let b=(0,a.i(70712).default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["default",()=>b],85977),a.s(["X",()=>b],92439)},69798,33268,a=>{"use strict";var b=a.i(9765);let c=a=>{let b,c=new Set,d=(a,d)=>{let e="function"==typeof a?a(b):a;if(!Object.is(e,b)){let a=b;b=(null!=d?d:"object"!=typeof e||null===e)?e:Object.assign({},b,e),c.forEach(c=>c(b,a))}},e=()=>b,f={setState:d,getState:e,getInitialState:()=>g,subscribe:a=>(c.add(a),()=>c.delete(a))},g=b=a(d,e,f);return f},d=a=>{let d=a?c(a):c,e=a=>(function(a,c=a=>a){let d=b.default.useSyncExternalStore(a.subscribe,b.default.useCallback(()=>c(a.getState()),[a,c]),b.default.useCallback(()=>c(a.getInitialState()),[a,c]));return b.default.useDebugValue(d),d})(d,a);return Object.assign(e,d),e},e=a=>a?d(a):d;a.s(["create",()=>e],33268);var f=a.i(18230),g=a.i(19114);let h=e(a=>({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null,login:async b=>{a({isLoading:!0,error:null});try{let c=await f.authService.login(b);a({user:c.user,token:c.token,isAuthenticated:!0,isLoading:!1,error:null})}catch(b){throw a({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:b instanceof g.ApiError||b instanceof Error?b.message:"حدث خطأ أثناء تسجيل الدخول"}),b}},signup:async b=>{a({isLoading:!0,error:null});try{let c=await f.authService.register(b);a({user:c.user,token:c.token,isAuthenticated:!0,isLoading:!1,error:null})}catch(b){throw a({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:b instanceof g.ApiError||b instanceof Error?b.message:"حدث خطأ أثناء إنشاء الحساب"}),b}},logout:async()=>{a({isLoading:!0});try{await f.authService.logout()}finally{a({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})}},checkAuth:async()=>{if(!g.tokenManager.hasValidToken())return void a({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null});a({isLoading:!0});try{let b=await f.authService.getCurrentUser(),c=g.tokenManager.getAccessToken();a({user:b,token:c,isAuthenticated:!0,isLoading:!1,error:null})}catch{g.tokenManager.clearTokens(),a({user:null,token:null,isAuthenticated:!1,isLoading:!1,error:null})}},updateProfile:async b=>{a({isLoading:!0,error:null});try{let c=await f.authService.updateProfile(b);a({user:c,isLoading:!1,error:null})}catch(b){throw a({isLoading:!1,error:b instanceof g.ApiError||b instanceof Error?b.message:"حدث خطأ أثناء تحديث الملف الشخصي"}),b}},clearError:()=>{a({error:null})}}));a.s(["useAuthStore",0,h],69798)},17775,a=>{"use strict";let b=(0,a.i(70712).default)("circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);a.s(["default",()=>b])},11242,a=>{"use strict";let b=(0,a.i(70712).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);a.s(["UserPlus",()=>b],11242)},18747,a=>{"use strict";var b=a.i(33268),c=a.i(6643),d=a.i(19114);let e=(0,b.create)((a,b)=>({contacts:[],groups:[],currentContact:null,currentGroup:null,isLoading:!1,error:null,filters:{},groupsFilters:{},fetchContacts:async()=>{a({isLoading:!0,error:null});try{let b=await c.contactsService.getAll();a({contacts:b,isLoading:!1})}catch(b){a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل تحميل جهات الاتصال",isLoading:!1})}},fetchContactById:async b=>{a({isLoading:!0,error:null});try{let d=await c.contactsService.getById(b);a({currentContact:d,isLoading:!1})}catch(b){a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل تحميل جهة الاتصال",isLoading:!1})}},createContact:async e=>{a({isLoading:!0,error:null});try{let d=await c.contactsService.create(e);return a(a=>({contacts:[d,...a.contacts],isLoading:!1})),e.groupIds&&e.groupIds.length>0&&await b().fetchGroups(),d}catch(b){throw a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل إنشاء جهة الاتصال",isLoading:!1}),b}},updateContact:async(e,f)=>{a({isLoading:!0,error:null});try{let d=await c.contactsService.update(e,f);a(a=>({contacts:a.contacts.map(a=>a.id===e?d:a),currentContact:a.currentContact?.id===e?d:a.currentContact,isLoading:!1})),await b().fetchGroups()}catch(b){throw a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل تحديث جهة الاتصال",isLoading:!1}),b}},deleteContact:async e=>{a({isLoading:!0,error:null});try{await c.contactsService.delete(e),a(a=>({contacts:a.contacts.filter(a=>a.id!==e),currentContact:a.currentContact?.id===e?null:a.currentContact,isLoading:!1})),await b().fetchGroups()}catch(b){throw a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل حذف جهة الاتصال",isLoading:!1}),b}},fetchGroups:async()=>{a({isLoading:!0,error:null});try{let b=await c.groupsService.getAll();a({groups:b,isLoading:!1})}catch(b){a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل تحميل المجموعات",isLoading:!1})}},fetchGroupById:async b=>{a({isLoading:!0,error:null});try{let d=await c.groupsService.getById(b);a({currentGroup:d,isLoading:!1})}catch(b){a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل تحميل المجموعة",isLoading:!1})}},createGroup:async e=>{a({isLoading:!0,error:null});try{let d=await c.groupsService.create(e);return a(a=>({groups:[d,...a.groups],isLoading:!1})),e.contactIds&&e.contactIds.length>0&&await b().fetchContacts(),d}catch(b){throw a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل إنشاء المجموعة",isLoading:!1}),b}},updateGroup:async(e,f)=>{a({isLoading:!0,error:null});try{let d=await c.groupsService.update(e,f);a(a=>({groups:a.groups.map(a=>a.id===e?d:a),currentGroup:a.currentGroup?.id===e?d:a.currentGroup,isLoading:!1})),await b().fetchContacts()}catch(b){throw a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل تحديث المجموعة",isLoading:!1}),b}},deleteGroup:async e=>{a({isLoading:!0,error:null});try{await c.groupsService.delete(e),a(a=>({groups:a.groups.filter(a=>a.id!==e),currentGroup:a.currentGroup?.id===e?null:a.currentGroup,isLoading:!1})),await b().fetchContacts()}catch(b){throw a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل حذف المجموعة",isLoading:!1}),b}},addContactsToGroup:async(e,f)=>{a({isLoading:!0,error:null});try{await c.groupsService.addContacts(e,f),await b().fetchGroups(),await b().fetchContacts(),a({isLoading:!1})}catch(b){throw a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل إضافة جهات الاتصال",isLoading:!1}),b}},removeContactsFromGroup:async(e,f)=>{a({isLoading:!0,error:null});try{await c.groupsService.removeContacts(e,f),await b().fetchGroups(),await b().fetchContacts(),a({isLoading:!1})}catch(b){throw a({error:b instanceof d.ApiError||b instanceof Error?b.message:"فشل إزالة جهات الاتصال",isLoading:!1}),b}},setFilters:b=>{a({filters:b})},setGroupsFilters:b=>{a({groupsFilters:b})},getFilteredContacts:()=>{let{contacts:a,filters:c}=b(),d=[...a];if(c.search){let a=c.search.toLowerCase();d=d.filter(b=>b.name.toLowerCase().includes(a)||b.email.toLowerCase().includes(a)||b.phone?.toLowerCase().includes(a))}return c.groupId&&(d=d.filter(a=>a.groupIds.includes(c.groupId))),c.tags&&c.tags.length>0&&(d=d.filter(a=>c.tags.some(b=>a.tags.includes(b)))),d},getFilteredGroups:()=>{let{groups:a,groupsFilters:c}=b(),d=[...a];if(c.search){let a=c.search.toLowerCase();d=d.filter(b=>b.name.toLowerCase().includes(a)||b.description?.toLowerCase().includes(a))}return d},getContactsByGroup:a=>{let{contacts:c}=b();return c.filter(b=>b.groupIds.includes(a))},getGroupsByContact:a=>{let{groups:c}=b();return c.filter(b=>b.contactIds.includes(a))},searchContacts:a=>{let{contacts:c}=b(),d=a.toLowerCase();return c.filter(a=>a.name.toLowerCase().includes(d)||a.email.toLowerCase().includes(d)||a.phone?.toLowerCase().includes(d))},searchGroups:a=>{let{groups:c}=b(),d=a.toLowerCase();return c.filter(a=>a.name.toLowerCase().includes(d)||a.description?.toLowerCase().includes(d))}}));a.s(["useContactsStore",0,e])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b7493c96._.js.map